import{i as ia,g as oa,a as da,r as g,o as ca,b as me,c as ee,j as e,U as ae,C as ge,M as Re,d as Fe,X as se,e as $e,H as xa,L as ne,f as re,h as ua,k as Le,s as ma,l as ga,u as pe,m as te,n as He,p as pa,q as ha,A as ba,P as fa,T as ja,t as Na,v as Ie,F as va,S as ya,w as he,x as Ne,y as ve,z as wa,R as ie,B as ka,D as Ma,E as Ca,G as Ka,I as Sa,J as Pa}from"./vendor-s1sEaKki.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))h(d);new MutationObserver(d=>{for(const u of d)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&h(p)}).observe(document,{childList:!0,subtree:!0});function x(d){const u={};return d.integrity&&(u.integrity=d.integrity),d.referrerPolicy&&(u.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?u.credentials="include":d.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function h(d){if(d.ep)return;d.ep=!0;const u=x(d);fetch(d.href,u)}})();let ye;try{typeof __firebase_config<"u"?ye=JSON.parse(__firebase_config):ye={apiKey:"AIzaSyBwf0YITW6dueNHMtfD_d-fA0TcVhBT06c",authDomain:"rt-05-rw-09.firebaseapp.com",projectId:"rt-05-rw-09",storageBucket:"rt-05-rw-09.firebasestorage.app",messagingSenderId:"656172952610",appId:"1:656172952610:web:f6c98f827617589e73ae7b"}}catch(n){console.error("Error parsing firebase config",n)}const We=ia(ye),H=oa(We),be=da(We),Ee=n=>new Promise((m,x)=>{const h=new FileReader;h.readAsDataURL(n),h.onload=d=>{var p;const u=new Image;u.src=(p=d.target)==null?void 0:p.result,u.onload=()=>{const N=document.createElement("canvas");let y=u.width,M=u.height;const w=800;y>M?y>w&&(M*=w/y,y=w):M>w&&(y*=w/M,M=w),N.width=y,N.height=M;const S=N.getContext("2d");if(!S){x(new Error("Canvas ctx error"));return}S.drawImage(u,0,0,y,M),m(N.toDataURL("image/jpeg",.7))},u.onerror=N=>x(N)},h.onerror=d=>x(d)}),Be=()=>new Date().toISOString().split("T")[0],O={nomorKK:"",alamat:"",statusHubungan:"Kepala Keluarga",isPendatang:!1,nik:"",nama:"",noHp:"",tempatLahir:"",tanggalLahir:"",jenisKelamin:"Laki-laki",golDarah:"-",agama:"Islam",statusPerkawinan:"Belum Kawin",pendidikan:"SMA/Sederajat",pekerjaan:"",statusRumah:"Milik Sendiri",jenisBpjs:"Tidak Memiliki",hasMobil:!1,platMobil:"",hasMotor:!1,platMotor:"",catatan:"",isMoved:!1,alamatPindah:"",tanggalPindah:"",isDeceased:!1,tanggalMeninggal:"",penyebabMeninggal:"",files:[]},fe={namaKegiatan:"",tanggal:"",deskripsi:"",keterangan:"",files:[]},je={namaPelapor:"",deskripsi:"",status:"Menunggu",tanggapan:"",files:[],tanggalPengaduan:"",tanggalPenyelesaian:""};function Da(){const[n,m]=g.useState(null),[x,h]=g.useState("penduduk"),[d,u]=g.useState("summary"),[p,N]=g.useState([]),[y,M]=g.useState([]),[w,S]=g.useState([]),[$,W]=g.useState(!1),[Ue,U]=g.useState(!1),[b,oe]=g.useState("resident"),[we,P]=g.useState(null),[q,ke]=g.useState(""),[J,Me]=g.useState(""),[de,qe]=g.useState("Semua"),[G,Je]=g.useState(""),[X,Ce]=g.useState(null),[f,C]=g.useState("kk"),[A,Ke]=g.useState(""),[T,Se]=g.useState(""),[Ge,ce]=g.useState(!1),[F,Y]=g.useState({id:"",tanggapan:"",files:[]}),[xe,Pe]=g.useState(!1),[De,V]=g.useState(null),[o,c]=g.useState(O),[K,D]=g.useState(fe),[I,L]=g.useState(je);g.useEffect(()=>((async()=>{try{typeof __initial_auth_token<"u"&&__initial_auth_token?await ma(be,__initial_auth_token):await ga(be)}catch(l){console.error("Auth Error:",l)}})(),ca(be,m)),[]),g.useEffect(()=>{if(!n)return;const a=me(ee(H,"residents"),s=>{const r=s.docs.map(i=>({id:i.id,...i.data(),files:i.data().files||[],catatan:i.data().catatan||""}));r.sort((i,j)=>{const B=["Kepala Keluarga","Istri","Suami","Anak"];return B.indexOf(i.statusHubungan)-B.indexOf(j.statusHubungan)}),N(r)},s=>console.error("Error Resident:",s)),l=me(ee(H,"activities"),s=>{const r=s.docs.map(i=>({id:i.id,...i.data(),files:i.data().files||[]}));r.sort((i,j)=>new Date(j.tanggal).getTime()-new Date(i.tanggal).getTime()),M(r)},s=>console.error("Error Activity:",s)),t=me(ee(H,"complaints"),s=>{const r=s.docs.map(i=>({id:i.id,...i.data(),files:i.data().files||[],resolutionFiles:i.data().resolutionFiles||[],tanggalPengaduan:i.data().tanggalPengaduan||"",tanggalPenyelesaian:i.data().tanggalPenyelesaian||""}));S(r.sort((i,j)=>i.status==="Menunggu"&&j.status!=="Menunggu"?-1:i.status!=="Menunggu"&&j.status==="Menunggu"?1:0))},s=>console.error("Error Complaint:",s));return()=>{a(),l(),t()}},[n]);const k=g.useMemo(()=>{const a=p.filter(r=>!r.isMoved&&!r.isDeceased),l=p.filter(r=>r.isMoved),t=p.filter(r=>r.isDeceased),s=a.filter(r=>r.statusHubungan==="Kepala Keluarga");return{totalWarga:a.length,totalKK:s.length,totalPindah:l.length,totalMeninggal:t.length,totalPendatang:a.filter(r=>r.isPendatang).length,rumahMilik:s.filter(r=>r.statusRumah==="Milik Sendiri").length,rumahSewa:s.filter(r=>r.statusRumah==="Sewa/Kontrak").length,rumahMenumpang:s.filter(r=>r.statusRumah==="Menumpang").length,totalMobil:a.filter(r=>r.hasMobil).length,totalMotor:a.filter(r=>r.hasMotor).length,lakiLaki:a.filter(r=>r.jenisKelamin==="Laki-laki").length,perempuan:a.filter(r=>r.jenisKelamin==="Perempuan").length}},[p]),Xe=g.useMemo(()=>{const a={};return p.filter(l=>!l.isMoved&&!l.isDeceased).forEach(l=>{a[l.nomorKK]||(a[l.nomorKK]=[]),a[l.nomorKK].push(l)}),Object.keys(a).forEach(l=>{a[l].sort((t,s)=>{const r=["Kepala Keluarga","Suami","Istri","Anak","Menantu","Orang Tua","Mertua","Famili Lain"],i=r.indexOf(t.statusHubungan),j=r.indexOf(s.statusHubungan);return(i===-1?99:i)-(j===-1?99:j)})}),a},[p]),Ye=async a=>{if(a.preventDefault(),!n)return alert("Sistem belum siap.");if($)return;W(!0);let l="",t={};if(b==="resident"||b==="move"||b==="death"?(l="residents",t=o):b==="activity"?(l="activities",t=K):b==="complaint"&&(l="complaints",t=I,!xe&&!t.tanggalPengaduan&&(t.tanggalPengaduan=Be())),new Blob([JSON.stringify(t)]).size>9e5){alert("Ukuran data/foto terlalu besar. Mohon kurangi jumlah foto."),W(!1);return}try{const s=ee(H,l);xe&&De?(await pe(te(s,De),{...t,updatedAt:He()}),alert("Data berhasil diperbarui!"),E()):(await pa(s,{...t,createdAt:He()}),b==="resident"?confirm(`Data berhasil disimpan!

Klik OK untuk tambah anggota keluarga lain.
Klik Cancel untuk selesai.`)?c(i=>({...O,nomorKK:i.nomorKK,alamat:i.alamat,statusRumah:i.statusRumah,statusHubungan:"Anak",isPendatang:i.isPendatang})):E():(alert("Data berhasil disimpan!"),E()))}catch(s){console.error("Gagal Menyimpan:",s),alert(`Gagal menyimpan data.
Error: ${s.message}`)}finally{W(!1)}},Q=async(a,l)=>{if(confirm("Yakin hapus data ini secara permanen?"))try{await Ka(te(H,a,l))}catch(t){alert("Gagal menghapus: "+t.message)}},ue=async a=>{const l=Array.from(a.target.files||[]),t=[];for(const s of l)try{const r=await Ee(s);t.push(r)}catch(r){console.error(r)}b==="resident"?c(s=>({...s,files:[...s.files,...t]})):b==="activity"?D(s=>({...s,files:[...s.files||[],...t]})):b==="complaint"&&L(s=>({...s,files:[...s.files||[],...t]})),a.target.value=""},Ve=a=>{b==="resident"?c(l=>({...l,files:l.files.filter((t,s)=>s!==a)})):b==="activity"?D(l=>({...l,files:(l.files||[]).filter((t,s)=>s!==a)})):b==="complaint"&&L(l=>({...l,files:(l.files||[]).filter((t,s)=>s!==a)}))},Qe=a=>{Y({id:a,tanggapan:"",files:[]}),ce(!0)},Ze=async a=>{const l=Array.from(a.target.files||[]),t=[];for(const s of l)try{const r=await Ee(s);t.push(r)}catch(r){console.error(r)}Y(s=>({...s,files:[...s.files,...t]})),a.target.value=""},ea=async a=>{if(a.preventDefault(),!(!n||!F.id))try{await pe(te(H,"complaints",F.id),{status:"Selesai",tanggapan:F.tanggapan,resolutionFiles:F.files,tanggalPenyelesaian:Be()}),ce(!1)}catch(l){console.error(l),alert("Gagal menyelesaikan pengaduan.")}},aa=async(a,l)=>{const t=w.find(s=>s.id===a);if((t==null?void 0:t.status)==="Selesai")return alert("Pengaduan yang sudah selesai tidak dapat diubah statusnya lagi.");try{const s={status:l};l!=="Selesai"&&(s.tanggalPenyelesaian=""),await pe(te(H,"complaints",a),s)}catch(s){console.error(s),alert("Gagal update status")}},z=(a,l)=>{oe(a),W(!1),l?(Pe(!0),V(l.id),a==="resident"&&c(l),a==="activity"&&D({...l,files:l.files||[]}),a==="complaint"&&L({...l,files:l.files||[]})):(Pe(!1),V(null),a==="resident"&&c(O),a==="activity"&&D(fe),a==="complaint"&&L(je)),U(!0)},Ae=a=>{c({...a,alamatPindah:"",tanggalPindah:""}),V(a.id),oe("move"),U(!0)},Te=a=>{c({...a,isDeceased:!0,tanggalMeninggal:"",penyebabMeninggal:""}),V(a.id),oe("death"),U(!0)},E=()=>{U(!1),ce(!1),c(O),D(fe),L(je)},Z=(a,l)=>e.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-2",children:a==null?void 0:a.map((t,s)=>e.jsxs("div",{className:"w-16 h-16 relative flex-shrink-0 group",children:[e.jsx("img",{src:t,className:"w-full h-full object-cover rounded border border-gray-200 cursor-pointer",onClick:()=>P(t)}),e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),l?l(s):Ve(s)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 shadow transition",children:e.jsx(se,{size:12})})]},s))}),ze=a=>!a||a.length===0?null:e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(Sa,{size:12})," Lampiran (",a.length,")"]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:a.map((l,t)=>e.jsx("div",{className:"w-10 h-10 rounded border border-gray-200 overflow-hidden cursor-pointer hover:opacity-80",onClick:()=>P(l),children:e.jsx("img",{src:l,className:"w-full h-full object-cover"})},t))})]}),sa=()=>{let a="Laporan Ringkasan";d==="warga"&&(a="Laporan Detail Data Warga"),d==="kegiatan"&&(a="Laporan Kegiatan & Dokumentasi"),d==="aduan"&&(a="Laporan & Status Pengaduan Warga");let l="";return(A||T)&&(l=`Periode: ${A||"Awal"} s/d ${T||"Sekarang"}`),e.jsxs("div",{className:"pb-20 bg-white p-6 rounded-xl border shadow-sm print:shadow-none print:border-none print:p-0 print:w-full",children:[e.jsxs("div",{className:"hidden print:flex flex-col items-center justify-center mb-8 border-b-2 border-gray-800 pb-4",children:[e.jsx("h1",{className:"text-2xl font-bold uppercase",children:"RT. 05 RW. 09 PERUMAHAN BUANA PERMAI"}),e.jsx("h2",{className:"text-lg font-medium",children:"Kelurahan Cipondoh, Kecamatan Cipondoh, Kota Tangerang"}),e.jsx("h3",{className:"text-xl font-bold mt-4 uppercase underline",children:a}),l&&e.jsx("p",{className:"text-md font-medium mt-1",children:l}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Dicetak pada: ",new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 print:hidden gap-4",children:[e.jsx("div",{className:"flex gap-2 bg-slate-100 p-1 rounded-lg overflow-x-auto w-full sm:w-auto",children:[{id:"summary",label:"Ringkasan",icon:e.jsx(Fe,{size:16})},{id:"warga",label:"Data Warga",icon:e.jsx(ha,{size:16})},{id:"kegiatan",label:"Kegiatan",icon:e.jsx(ba,{size:16})},{id:"aduan",label:"Pengaduan",icon:e.jsx(Re,{size:16})}].map(t=>e.jsxs("button",{onClick:()=>u(t.id),className:`px-3 py-2 rounded-md text-sm font-medium flex items-center gap-2 transition ${d===t.id?"bg-white shadow text-blue-600":"text-slate-500 hover:bg-slate-200"}`,children:[t.icon," ",t.label]},t.id))}),e.jsxs("button",{onClick:()=>window.print(),className:"bg-slate-800 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-slate-700 shadow w-full sm:w-auto justify-center",children:[e.jsx(fa,{size:18})," Cetak Laporan"]})]}),(d==="kegiatan"||d==="aduan")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6 items-center bg-slate-50 p-3 rounded border print:hidden",children:[e.jsxs("span",{className:"text-sm font-bold text-slate-600 flex items-center gap-1",children:[e.jsx(ge,{size:16})," Filter Periode:"]}),e.jsx("input",{type:"date",value:A,onChange:t=>Ke(t.target.value),className:"border rounded px-2 py-1 text-sm"}),e.jsx("span",{className:"text-slate-400",children:"-"}),e.jsx("input",{type:"date",value:T,onChange:t=>Se(t.target.value),className:"border rounded px-2 py-1 text-sm"}),(A||T)&&e.jsx("button",{onClick:()=>{Ke(""),Se("")},className:"text-xs text-red-500 hover:underline ml-2",children:"Reset"})]}),e.jsxs("div",{className:"space-y-8 min-h-[50vh]",children:[d==="summary"&&e.jsxs("section",{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Total Warga"}),e.jsxs("p",{className:"text-2xl font-bold",children:[k.totalWarga," ",e.jsx("span",{className:"text-sm font-normal",children:"Jiwa"})]})]}),e.jsxs("div",{className:"p-4 bg-indigo-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Kepala Keluarga"}),e.jsxs("p",{className:"text-2xl font-bold",children:[k.totalKK," ",e.jsx("span",{className:"text-sm font-normal",children:"KK"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Pendatang"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:[k.totalPendatang," ",e.jsx("span",{className:"text-sm font-normal text-black",children:"Jiwa"})]})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Warga Meninggal"}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[k.totalMeninggal," ",e.jsx("span",{className:"text-sm font-normal text-black",children:"Jiwa"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("h4",{className:"font-bold border-b pb-2 mb-2",children:"Statistik Kendaraan & Hunian"}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{children:"Mobil"}),e.jsxs("span",{className:"font-bold",children:[k.totalMobil," Unit"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{children:"Motor"}),e.jsxs("span",{className:"font-bold",children:[k.totalMotor," Unit"]})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{children:"Status Rumah"}),e.jsxs("span",{className:"text-xs font-bold bg-gray-100 p-1 rounded",children:["Milik: ",k.rumahMilik," | Sewa: ",k.rumahSewa," | Menumpang: ",k.rumahMenumpang]})]})]}),e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("h4",{className:"font-bold border-b pb-2 mb-2",children:"Statistik Aduan"}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{children:"Selesai"}),e.jsx("span",{className:"font-bold text-green-600",children:w.filter(t=>t.status==="Selesai").length})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{children:"Dalam Proses"}),e.jsx("span",{className:"font-bold text-yellow-600",children:w.filter(t=>t.status!=="Selesai").length})]})]})]})]}),d==="warga"&&e.jsx("section",{className:"space-y-6",children:Object.entries(Xe).map(([t,s])=>{const r=s.find(i=>i.statusHubungan==="Kepala Keluarga")||s[0];return e.jsxs("div",{className:"border rounded-lg overflow-hidden break-inside-avoid page-break-after-auto mb-6 border-slate-300 shadow-sm print:shadow-none",children:[e.jsxs("div",{className:"bg-slate-100 p-4 border-b border-slate-300 flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-lg text-slate-800",children:[r.nama," ",e.jsxs("span",{className:"text-sm font-normal text-slate-600",children:["(",r.statusHubungan,")"]})]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["No. KK: ",e.jsx("span",{className:"font-mono font-bold text-slate-900",children:t})]})]}),e.jsxs("div",{className:"text-left sm:text-right mt-2 sm:mt-0",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-bold",children:"Alamat:"})," ",r.alamat]}),r.noHp&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-bold",children:"HP (Kepala):"})," ",r.noHp]})]})]}),e.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[e.jsx("thead",{className:"bg-slate-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left w-8",children:"No"}),e.jsx("th",{className:"p-2 text-left",children:"Nama / NIK / HP"}),e.jsx("th",{className:"p-2 text-left",children:"L/P & TTL"}),e.jsx("th",{className:"p-2 text-left",children:"Status/Pekerjaan"}),e.jsx("th",{className:"p-2 text-center",children:"Hubungan"}),e.jsx("th",{className:"p-2 text-center w-40",children:"Foto"})]})}),e.jsx("tbody",{className:"divide-y",children:s.map((i,j)=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-2 text-center",children:j+1}),e.jsxs("td",{className:"p-2",children:[e.jsx("div",{className:"font-bold",children:i.nama}),e.jsx("div",{className:"text-slate-500 text-xs",children:i.nik}),i.noHp&&e.jsxs("div",{className:"text-slate-500 text-[10px] mt-0.5",children:["ðŸ“ž ",i.noHp]})]}),e.jsxs("td",{className:"p-2",children:[i.jenisKelamin==="Laki-laki"?"L":"P",", ",i.tempatLahir,e.jsx("div",{className:"text-slate-500 text-xs",children:i.tanggalLahir})]}),e.jsxs("td",{className:"p-2",children:[e.jsx("div",{children:i.statusPerkawinan}),e.jsx("div",{className:"text-slate-500 text-xs",children:i.pekerjaan})]}),e.jsx("td",{className:"p-2 text-center",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${i.statusHubungan==="Kepala Keluarga"?"bg-blue-100 text-blue-700 font-bold":"bg-slate-100"}`,children:i.statusHubungan})}),e.jsx("td",{className:"p-2 text-center",children:i.files&&i.files.length>0?e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:i.files.map((B,ra)=>e.jsx("img",{src:B,className:"w-40 h-40 object-cover border rounded shadow-sm print:w-40 print:h-40 cursor-pointer",onClick:()=>P(B)},ra))}):"-"})]},i.id))})]})]},t)})}),d==="kegiatan"&&e.jsx("section",{children:(()=>{const t=y.filter(s=>!(A&&s.tanggal<A||T&&s.tanggal>T));return t.length===0?e.jsx("p",{className:"text-center italic text-gray-500",children:"Tidak ada data kegiatan pada periode ini."}):e.jsx("div",{className:"space-y-6",children:t.map((s,r)=>e.jsx("div",{className:"border-b-2 border-slate-100 pb-6 break-inside-avoid",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-slate-800 text-white w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-full font-bold",children:r+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-lg text-slate-800",children:s.namaKegiatan}),e.jsx("span",{className:"text-sm font-mono text-slate-500 bg-slate-100 px-2 py-1 rounded w-fit",children:s.tanggal})]}),e.jsx("p",{className:"text-slate-700 text-sm whitespace-pre-wrap mb-3 text-justify",children:s.deskripsi}),s.keterangan&&e.jsxs("div",{className:"text-xs bg-yellow-50 border border-yellow-200 p-2 rounded text-yellow-800 mb-3 inline-block",children:[e.jsx("strong",{children:"Catatan:"})," ",s.keterangan]}),s.files&&s.files.length>0&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2",children:s.files.map((i,j)=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("img",{src:i,className:"w-full h-64 object-cover rounded-lg border shadow-sm cursor-pointer hover:opacity-95",onClick:()=>P(i)}),e.jsxs("span",{className:"text-[10px] text-center text-slate-400",children:["Dokumentasi ",j+1]})]},j))})]})]})},s.id))})})()}),d==="aduan"&&e.jsx("section",{children:(()=>{const t=w.filter(s=>!(A&&s.tanggalPengaduan<A||T&&s.tanggalPengaduan>T));return t.length===0?e.jsx("p",{className:"text-center italic text-gray-500",children:"Tidak ada data pengaduan pada periode ini."}):e.jsx("div",{className:"space-y-6",children:t.map((s,r)=>e.jsxs("div",{className:"border border-slate-200 rounded-xl p-5 break-inside-avoid bg-white shadow-sm print:shadow-none",children:[e.jsxs("div",{className:"flex justify-between items-start border-b border-slate-100 pb-3 mb-4",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-bold text-lg text-slate-800 block",children:["Laporan #",r+1,": ",s.namaPelapor]}),e.jsxs("span",{className:"text-xs text-slate-500",children:["Tanggal Masuk: ",s.tanggalPengaduan]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${s.status==="Selesai"?"bg-green-100 text-green-700 border-green-200":s.status==="Proses"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-red-100 text-red-700 border-red-200"}`,children:s.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("p",{className:"text-sm font-bold text-red-700 mb-2 flex items-center gap-2",children:[e.jsx(ja,{size:16})," MASALAH / KELUHAN"]}),e.jsx("div",{className:"text-sm text-slate-700 bg-red-50 p-4 rounded-lg border border-red-100 flex-1 mb-3",children:s.deskripsi}),s.files&&s.files.length>0?e.jsxs("div",{className:"mt-auto",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 block mb-2",children:"FOTO BUKTI AWAL:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.files.map((i,j)=>e.jsx("img",{src:i,className:"w-full h-48 object-cover border rounded-lg shadow-sm cursor-pointer hover:opacity-90",onClick:()=>P(i)},j))})]}):e.jsx("p",{className:"text-xs text-slate-400 italic text-center p-4 border border-dashed rounded",children:"Tidak ada foto bukti awal."})]}),e.jsxs("div",{className:"flex flex-col h-full border-l pl-0 md:pl-8 border-slate-100",children:[e.jsxs("p",{className:"text-sm font-bold text-green-700 mb-2 flex items-center gap-2",children:[e.jsx(Le,{size:16})," PENYELESAIAN / TINDAK LANJUT"]}),s.tanggapan?e.jsxs("div",{className:"mb-3 flex-1",children:[e.jsx("div",{className:"text-sm text-slate-700 bg-green-50 p-4 rounded-lg border border-green-100 mb-2",children:s.tanggapan}),e.jsxs("p",{className:"text-xs text-green-700 font-mono text-right",children:["Diselesaikan: ",s.tanggalPenyelesaian]})]}):e.jsx("p",{className:"text-sm text-slate-400 italic bg-slate-50 p-4 rounded-lg mb-3 flex-1",children:"Belum ada data penyelesaian."}),s.resolutionFiles&&s.resolutionFiles.length>0?e.jsxs("div",{className:"mt-auto",children:[e.jsx("span",{className:"text-xs font-bold text-green-600 block mb-2",children:"FOTO HASIL PENYELESAIAN:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.resolutionFiles.map((i,j)=>e.jsx("img",{src:i,className:"w-full h-48 object-cover border rounded-lg shadow-sm cursor-pointer hover:opacity-90",onClick:()=>P(i)},j))})]}):e.jsx("p",{className:"text-xs text-slate-400 italic text-center p-4 border border-dashed rounded mt-auto",children:"Tidak ada foto penyelesaian."})]})]})]},s.id))})})()}),e.jsx("div",{className:"hidden print:flex justify-end mt-12 pt-8 break-inside-avoid",children:e.jsxs("div",{className:"text-center w-64",children:[e.jsxs("p",{className:"mb-24",children:["Mengetahui,",e.jsx("br",{}),"Ketua RT. 05 RW. 09"]}),e.jsx("p",{className:"font-bold underline",children:"( ....................................... )"})]})})]})]})},ta=()=>{const a=p.filter(t=>G===""||t.nama.toLowerCase().includes(G.toLowerCase())||t.nomorKK.includes(G)?f==="kk"?t.statusHubungan==="Kepala Keluarga"&&!t.isMoved&&!t.isDeceased:f==="pindah"?t.isMoved:f==="meninggal"?t.isDeceased:f==="datang"?t.isPendatang&&!t.isMoved&&!t.isDeceased:f==="milik"?t.statusHubungan==="Kepala Keluarga"&&!t.isMoved&&t.statusRumah==="Milik Sendiri":f==="sewa"?t.statusHubungan==="Kepala Keluarga"&&!t.isMoved&&t.statusRumah==="Sewa/Kontrak":f==="numpang"?t.statusHubungan==="Kepala Keluarga"&&!t.isMoved&&t.statusRumah==="Menumpang":!1:!1),l=t=>p.filter(s=>s.nomorKK===t);if(X){const t=l(X);return e.jsxs("div",{className:"animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("button",{onClick:()=>Ce(null),className:"p-2 bg-white border rounded-full",children:e.jsx(Na,{size:20})}),e.jsxs("h2",{className:"text-xl font-bold",children:["Detail Keluarga (KK: ",X,")"]}),e.jsxs("button",{onClick:()=>{const s=t.find(i=>i.statusHubungan==="Kepala Keluarga")||t[0],r={...O,nomorKK:X,alamat:(s==null?void 0:s.alamat)||"",isPendatang:s==null?void 0:s.isPendatang};z("resident"),c(r)},className:"ml-auto bg-green-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(Ie,{size:16})," Tambah Anggota"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(s=>e.jsx(Oe,{data:s,onEdit:()=>z("resident",s),onDelete:()=>Q("residents",s.id),onMove:()=>Ae(s),onDeath:()=>Te(s),onPreview:r=>P(r)},s.id))})]})}return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 mb-6",children:[e.jsx(_,{icon:e.jsx(ae,{}),label:"Total Warga",value:k.totalWarga,color:"bg-blue-600",active:!1,onClick:()=>{}}),e.jsx(_,{icon:e.jsx(va,{}),label:"Kepala Keluarga",value:k.totalKK,color:"bg-indigo-500",active:f==="kk",onClick:()=>C("kk")}),e.jsx(_,{icon:e.jsx(Ie,{}),label:"Pendatang",value:k.totalPendatang,color:"bg-green-600",active:f==="datang",onClick:()=>C("datang")}),e.jsx(_,{icon:e.jsx(ne,{}),label:"Warga Pindah",value:k.totalPindah,color:"bg-orange-500",active:f==="pindah",onClick:()=>C("pindah")}),e.jsx(_,{icon:e.jsx(re,{}),label:"Meninggal",value:k.totalMeninggal,color:"bg-red-600",active:f==="meninggal",onClick:()=>C("meninggal")})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4",children:[e.jsx("button",{onClick:()=>C("kk"),className:`px-3 py-1 rounded text-xs border ${f==="kk"?"bg-slate-800 text-white":"bg-white"}`,children:"Semua KK"}),e.jsx("button",{onClick:()=>C("datang"),className:`px-3 py-1 rounded text-xs border ${f==="datang"?"bg-green-600 text-white":"bg-white"}`,children:"Pendatang"}),e.jsx("button",{onClick:()=>C("milik"),className:`px-3 py-1 rounded text-xs border ${f==="milik"?"bg-emerald-600 text-white":"bg-white"}`,children:"Rumah Milik"}),e.jsx("button",{onClick:()=>C("sewa"),className:`px-3 py-1 rounded text-xs border ${f==="sewa"?"bg-orange-500 text-white":"bg-white"}`,children:"Sewa/Kontrak"}),e.jsx("button",{onClick:()=>C("numpang"),className:`px-3 py-1 rounded text-xs border ${f==="numpang"?"bg-purple-500 text-white":"bg-white"}`,children:"Menumpang"}),e.jsx("button",{onClick:()=>C("meninggal"),className:`px-3 py-1 rounded text-xs border ${f==="meninggal"?"bg-red-600 text-white":"bg-white"}`,children:"Arsip Meninggal"})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(ya,{className:"absolute left-3 top-2.5 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Cari Nama / KK...",value:G,onChange:t=>Je(t.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:()=>z("resident"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(he,{size:18})," Baru"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(t=>["kk","milik","sewa","numpang"].includes(f)?e.jsx(Aa,{data:t,memberCount:l(t.nomorKK).length,onClick:()=>Ce(t.nomorKK)},t.id):e.jsx(Oe,{data:t,onEdit:()=>z("resident",t),onDelete:()=>Q("residents",t.id),onMove:()=>Ae(t),onDeath:()=>Te(t),onPreview:s=>P(s)},t.id))})]})},la=()=>{const a=y.filter(l=>!(q&&l.tanggal<q||J&&l.tanggal>J));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Kegiatan RT"}),e.jsxs("button",{onClick:()=>z("activity"),className:"bg-purple-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(he,{size:18})," Tambah"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(ge,{size:14,className:"inline"})," Periode:"]}),e.jsx("input",{type:"date",value:q,onChange:l=>ke(l.target.value),className:"border rounded text-sm px-1"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"date",value:J,onChange:l=>Me(l.target.value),className:"border rounded text-sm px-1"}),(q||J)&&e.jsx("button",{onClick:()=>{ke(""),Me("")},className:"text-xs text-red-500",children:"Reset"})]}),e.jsx("div",{className:"space-y-4",children:a.map(l=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-bold text-lg",children:l.namaKegiatan}),e.jsx("span",{className:"text-sm bg-purple-100 text-purple-700 px-2 py-1 rounded h-fit",children:l.tanggal})]}),e.jsx("p",{className:"text-gray-600 text-sm whitespace-pre-wrap",children:l.deskripsi}),l.keterangan&&e.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded border",children:l.keterangan}),ze(l.files),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsxs("button",{onClick:()=>z("activity",l),className:"text-blue-600 text-sm flex items-center gap-1",children:[e.jsx(Ne,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>Q("activities",l.id),className:"text-red-600 text-sm flex items-center gap-1",children:[e.jsx(ve,{size:14})," Hapus"]})]})]},l.id))})]})},na=()=>{const a=w.filter(l=>!(de!=="Semua"&&l.status!==de));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Pengaduan"}),e.jsxs("button",{onClick:()=>z("complaint"),className:"bg-orange-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(he,{size:18})," Buat"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(wa,{size:14,className:"inline"})," Status:"]}),e.jsxs("select",{value:de,onChange:l=>qe(l.target.value),className:"border rounded text-sm px-2 py-1",children:[e.jsx("option",{value:"Semua",children:"Semua"}),e.jsx("option",{value:"Menunggu",children:"Menunggu"}),e.jsx("option",{value:"Proses",children:"Proses"}),e.jsx("option",{value:"Selesai",children:"Selesai"})]})]}),e.jsx("div",{className:"space-y-4",children:a.map(l=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-bold",children:l.namaPelapor}),e.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${l.status==="Selesai"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:l.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:l.deskripsi}),ze(l.files),l.status==="Selesai"&&e.jsxs("div",{className:"bg-green-50 p-2 rounded text-xs text-green-800 border border-green-200",children:["âœ… ",l.tanggapan]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2 pt-2 border-t flex-wrap",children:[["Menunggu","Proses"].map(t=>e.jsx("button",{onClick:()=>aa(l.id,t),className:"text-xs border px-2 py-1 rounded hover:bg-gray-50",children:t},t)),e.jsx("button",{onClick:()=>Qe(l.id),className:"text-xs border px-2 py-1 rounded hover:bg-green-50 text-green-700 font-bold",children:"Selesai"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{onClick:()=>z("complaint",l),className:"text-blue-500",children:e.jsx(Ne,{size:16})}),e.jsx("button",{onClick:()=>Q("complaints",l.id),className:"text-red-500",children:e.jsx(ve,{size:16})})]})]})]},l.id))})]})};return e.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 font-sans",children:[e.jsxs("header",{className:"bg-white border-b sticky top-0 z-30 shadow-sm p-4 print:hidden",children:[e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 text-white p-2 rounded",children:e.jsx(ae,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-sm leading-tight",children:"RT. 05 RW. 09 Buana Permai"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sistem Data"})]})]}),e.jsxs("div",{className:"flex mt-4 border-t pt-2 gap-4 overflow-x-auto",children:[e.jsx(le,{active:x==="penduduk",onClick:()=>h("penduduk"),icon:e.jsx(ae,{size:16}),label:"Warga"}),e.jsx(le,{active:x==="kegiatan",onClick:()=>h("kegiatan"),icon:e.jsx(ge,{size:16}),label:"Kegiatan"}),e.jsx(le,{active:x==="pengaduan",onClick:()=>h("pengaduan"),icon:e.jsx(Re,{size:16}),label:"Aduan"}),e.jsx(le,{active:x==="laporan",onClick:()=>h("laporan"),icon:e.jsx(Fe,{size:16}),label:"Laporan"})]})]}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-4",children:[x==="penduduk"&&ta(),x==="kegiatan"&&la(),x==="pengaduan"&&na(),x==="laporan"&&sa()]}),we&&e.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4 cursor-pointer print:hidden",onClick:()=>P(null),children:[e.jsx("img",{src:we,className:"max-w-full max-h-full rounded shadow-lg object-contain"}),e.jsx("button",{className:"absolute top-4 right-4 text-white bg-black/50 rounded-full p-2 hover:bg-black/70 transition",children:e.jsx(se,{size:24})})]}),Ue&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto print:hidden",children:e.jsxs("div",{className:"bg-white w-full rounded-xl max-w-lg relative flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-xl sticky top-0 z-10",children:[e.jsxs("h2",{className:"font-bold text-lg capitalize",children:[xe?"Edit":"Tambah"," ",b]}),e.jsx("button",{onClick:E,children:e.jsx(se,{size:24,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:Ye,className:"p-4 overflow-y-auto space-y-6",children:[b==="resident"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx($e,{size:18})," Data Pribadi"]}),e.jsx(v,{label:"NIK",value:o.nik,onChange:a=>c({...o,nik:a.target.value}),required:!0}),e.jsx(v,{label:"Nama Lengkap",value:o.nama,onChange:a=>c({...o,nama:a.target.value}),required:!0}),e.jsx(v,{label:"No Handphone (WA)",value:o.noHp,onChange:a=>c({...o,noHp:a.target.value})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(v,{label:"Tempat Lahir",value:o.tempatLahir,onChange:a=>c({...o,tempatLahir:a.target.value})}),e.jsx(v,{label:"Tgl Lahir",type:"date",value:o.tanggalLahir,onChange:a=>c({...o,tanggalLahir:a.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(R,{label:"Jenis Kelamin",value:o.jenisKelamin,onChange:a=>c({...o,jenisKelamin:a.target.value}),options:["Laki-laki","Perempuan"]}),e.jsx(R,{label:"Gol. Darah",value:o.golDarah,onChange:a=>c({...o,golDarah:a.target.value}),options:["-","A","B","AB","O"]})]}),e.jsx(R,{label:"Agama",value:o.agama,onChange:a=>c({...o,agama:a.target.value}),options:["Islam","Kristen","Katolik","Hindu","Buddha","Konghucu"]}),e.jsx(R,{label:"Pendidikan Terakhir",value:o.pendidikan,onChange:a=>c({...o,pendidikan:a.target.value}),options:["Tidak/Belum Sekolah","SD/Sederajat","SMP/Sederajat","SMA/Sederajat","D1","D2","D3","S1","S2","S3"]}),e.jsx(v,{label:"Pekerjaan",value:o.pekerjaan,onChange:a=>c({...o,pekerjaan:a.target.value})}),e.jsx(R,{label:"Status Kawin",value:o.statusPerkawinan,onChange:a=>c({...o,statusPerkawinan:a.target.value}),options:["Belum Kawin","Kawin","Cerai Hidup","Cerai Mati"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(ae,{size:18})," Data Keluarga"]}),e.jsx(v,{label:"Nomor KK",value:o.nomorKK,onChange:a=>c({...o,nomorKK:a.target.value}),required:!0}),e.jsx(R,{label:"Hubungan",value:o.statusHubungan,onChange:a=>c({...o,statusHubungan:a.target.value}),options:["Kepala Keluarga","Suami","Istri","Anak","Menantu","Orang Tua","Mertua","Famili Lain"]}),e.jsx(v,{label:"Alamat Domisili",value:o.alamat,onChange:a=>c({...o,alamat:a.target.value})}),e.jsxs("div",{className:"flex items-center gap-2 bg-green-50 p-3 rounded border border-green-200",children:[e.jsx("input",{type:"checkbox",checked:o.isPendatang,onChange:a=>c({...o,isPendatang:a.target.checked}),className:"w-5 h-5 text-green-600 rounded"}),e.jsx("label",{className:"text-sm font-medium text-green-800",children:"Warga Pendatang (Baru Masuk)"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(xa,{size:18})," Aset & Kepemilikan"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(R,{label:"Status Rumah",value:o.statusRumah,onChange:a=>c({...o,statusRumah:a.target.value}),options:["Milik Sendiri","Sewa/Kontrak","Menumpang"]}),e.jsx(R,{label:"BPJS",value:o.jenisBpjs,onChange:a=>c({...o,jenisBpjs:a.target.value}),options:["Tidak Memiliki","BPJS Mandiri","BPJS Kantor","BPJS PBI"]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded border border-slate-200 space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Kendaraan"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o.hasMobil,onChange:a=>c({...o,hasMobil:a.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm w-16",children:"Mobil"}),e.jsx("input",{type:"text",disabled:!o.hasMobil,value:o.platMobil,onChange:a=>c({...o,platMobil:a.target.value}),placeholder:"Plat Nomor",className:"flex-1 border rounded px-2 py-1 text-sm disabled:bg-slate-100"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o.hasMotor,onChange:a=>c({...o,hasMotor:a.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm w-16",children:"Motor"}),e.jsx("input",{type:"text",disabled:!o.hasMotor,value:o.platMotor,onChange:a=>c({...o,platMotor:a.target.value}),placeholder:"Plat Nomor",className:"flex-1 border rounded px-2 py-1 text-sm disabled:bg-slate-100"})]})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Catatan Tambahan"}),e.jsx("textarea",{value:o.catatan,onChange:a=>c({...o,catatan:a.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Contoh: Sakit menahun, butuh bantuan, dll."})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Dokumen"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ue,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Z(o.files)]})]})]}),b==="move"&&e.jsxs("div",{className:"space-y-4 bg-orange-50 p-4 rounded border border-orange-200",children:[e.jsxs("div",{className:"flex gap-2 text-orange-800 text-sm mb-2",children:[e.jsx(ne,{size:16})," ",e.jsx("p",{children:"Form Lapor Pindah Warga"})]}),e.jsx(v,{label:"Tanggal Pindah",type:"date",value:o.tanggalPindah,onChange:a=>c({...o,tanggalPindah:a.target.value}),required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Alamat Pindah"}),e.jsx("textarea",{className:"w-full border rounded-lg p-2 focus:ring-2 focus:ring-blue-500",rows:3,value:o.alamatPindah,onChange:a=>c({...o,alamatPindah:a.target.value}),required:!0})]})]}),b==="death"&&e.jsxs("div",{className:"space-y-4 bg-red-50 p-4 rounded border border-red-200",children:[e.jsxs("div",{className:"flex gap-2 text-red-800 text-sm mb-2",children:[e.jsx(re,{size:16})," ",e.jsx("p",{children:"Form Lapor Warga Meninggal"})]}),e.jsx(v,{label:"Tanggal Meninggal",type:"date",value:o.tanggalMeninggal,onChange:a=>c({...o,tanggalMeninggal:a.target.value}),required:!0}),e.jsx(v,{label:"Penyebab Meninggal",value:o.penyebabMeninggal,onChange:a=>c({...o,penyebabMeninggal:a.target.value}),required:!0})]}),b==="activity"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{label:"Nama Kegiatan",value:K.namaKegiatan,onChange:a=>D({...K,namaKegiatan:a.target.value}),required:!0}),e.jsx(v,{label:"Tanggal",type:"date",value:K.tanggal,onChange:a=>D({...K,tanggal:a.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:3,placeholder:"Deskripsi",value:K.deskripsi,onChange:a=>D({...K,deskripsi:a.target.value})}),e.jsx(v,{label:"Keterangan",value:K.keterangan,onChange:a=>D({...K,keterangan:a.target.value})}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ue,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Z(K.files)]})]}),b==="complaint"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{label:"Nama Pelapor",value:I.namaPelapor,onChange:a=>L({...I,namaPelapor:a.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:4,placeholder:"Isi Pengaduan...",value:I.deskripsi,onChange:a=>L({...I,deskripsi:a.target.value}),required:!0}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Bukti"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ue,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Z(I.files)]})]}),e.jsx("div",{className:"pt-4 border-t sticky bottom-0 bg-white",children:e.jsx("button",{type:"submit",disabled:$,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold shadow hover:bg-blue-700 disabled:bg-blue-300 flex justify-center items-center gap-2",children:$?e.jsxs(e.Fragment,{children:[e.jsx(ua,{className:"animate-spin"})," Menyimpan..."]}):"SIMPAN DATA"})})]})]})}),Ge&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 print:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[e.jsx(Le,{size:20})," Selesaikan Pengaduan"]}),e.jsx("button",{onClick:E,className:"text-gray-500 hover:text-red-500",children:e.jsx(se,{size:20})})]}),e.jsxs("form",{onSubmit:ea,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catatan / Tanggapan Penyelesaian"}),e.jsx("textarea",{value:F.tanggapan,onChange:a=>Y({...F,tanggapan:a.target.value}),placeholder:"Contoh: Masalah telah diperbaiki pada hari Senin...",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 resize-none",required:!0})]}),e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Bukti Foto Penyelesaian"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Ze,className:"text-sm w-full file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Z(F.files,a=>Y(l=>({...l,files:l.files.filter((t,s)=>s!==a)})))]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 shadow-sm",children:"Simpan Selesai"})]})]})]})})]})}function le({active:n,onClick:m,icon:x,label:h}){return e.jsxs("button",{onClick:m,className:`flex items-center gap-1 px-3 py-2 text-sm font-medium border-b-2 transition ${n?"border-blue-600 text-blue-600":"border-transparent text-gray-500"}`,children:[x," ",h]})}function _({icon:n,label:m,value:x,color:h,active:d,onClick:u}){return e.jsxs("div",{onClick:u,className:`p-3 rounded-lg border flex items-center gap-3 cursor-pointer ${d?"ring-2 ring-blue-400 bg-blue-50":"bg-white"}`,children:[e.jsx("div",{className:`${h} text-white p-2 rounded shadow`,children:n}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:m}),e.jsx("p",{className:"text-xl font-bold",children:x})]})]})}function Oe({data:n,onEdit:m,onDelete:x,onMove:h,onDeath:d,onPreview:u}){const p=n.statusHubungan==="Kepala Keluarga";return e.jsxs("div",{className:`p-4 rounded-xl border shadow-sm ${n.isMoved?"bg-orange-50":n.isDeceased?"bg-red-50":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center border",children:n.files&&n.files.length>0?e.jsx("img",{src:n.files[0],className:"w-full h-full object-cover cursor-pointer",onClick:()=>u(n.files[0])}):e.jsx($e,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold truncate",children:n.nama}),e.jsx("p",{className:"text-xs text-gray-500",children:n.statusHubungan})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.isMoved&&e.jsx("span",{className:"text-[10px] bg-orange-600 text-white px-2 py-0.5 rounded",children:"PINDAH"}),n.isDeceased&&e.jsx("span",{className:"text-[10px] bg-red-600 text-white px-2 py-0.5 rounded",children:"MENINGGAL"}),n.isPendatang&&!n.isMoved&&!n.isDeceased&&e.jsx("span",{className:"text-[10px] bg-green-600 text-white px-2 py-0.5 rounded",children:"PENDATANG"})]})]}),e.jsxs("div",{className:"mt-3 text-xs space-y-1 text-gray-600 border-t pt-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"NIK:"})," ",n.nik]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"KK:"})," ",n.nomorKK]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"JK:"})," ",n.jenisKelamin]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Gol.D:"})," ",n.golDarah]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Agama:"})," ",n.agama]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Status:"})," ",n.statusPerkawinan]})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Pekerjaan:"})," ",n.pekerjaan]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Alamat:"})," ",n.alamat]}),n.noHp&&e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"HP:"})," ",n.noHp]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[n.hasMobil&&e.jsxs("span",{className:"text-[10px] bg-orange-100 text-orange-700 px-1 rounded flex items-center gap-1",children:[e.jsx(ka,{size:10})," ",n.platMobil]}),n.hasMotor&&e.jsxs("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1 rounded flex items-center gap-1",children:[e.jsx(Ma,{size:10})," ",n.platMotor]})]}),n.files&&n.files.length>0&&e.jsx("div",{className:"flex gap-1 mt-2 overflow-x-auto pt-1",children:n.files.map((N,y)=>e.jsx("img",{src:N,className:"w-8 h-8 rounded object-cover border cursor-pointer hover:opacity-80",onClick:()=>u(N)},y))})]}),n.catatan&&e.jsxs("div",{className:"bg-yellow-50 p-2 rounded text-yellow-800 text-[10px] sm:text-xs mt-2 border border-yellow-100 flex gap-1 items-start",children:[e.jsx(Ca,{size:12,className:"mt-0.5 flex-shrink-0"})," ",e.jsx("span",{children:n.catatan})]}),p&&!n.isMoved&&!n.isDeceased&&e.jsx("div",{className:"flex justify-between border-t pt-2 mt-2",children:e.jsxs("span",{className:"text-gray-500 text-[10px]",children:["Rumah: ",n.statusRumah]})}),n.isMoved&&e.jsxs("div",{className:"bg-orange-100 p-2 rounded text-orange-700 mt-2 text-xs",children:[e.jsxs("span",{className:"font-bold flex items-center gap-1",children:[e.jsx(ne,{size:10})," Pindah ke:"]}),n.alamatPindah," (",n.tanggalPindah,")"]}),n.isDeceased&&e.jsxs("div",{className:"bg-red-100 p-2 rounded text-red-700 mt-2 text-xs",children:[e.jsxs("span",{className:"font-bold flex items-center gap-1",children:[e.jsx(re,{size:10})," Meninggal:"]})," ",n.tanggalMeninggal," (",n.penyebabMeninggal,")"]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center pt-2 border-t",children:[!n.isMoved&&!n.isDeceased&&e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:h,className:"text-orange-600 text-xs flex items-center gap-1 border border-orange-200 px-2 py-1 rounded hover:bg-orange-50",children:[e.jsx(ne,{size:12})," Pindah"]}),e.jsxs("button",{onClick:d,className:"text-red-600 text-xs flex items-center gap-1 border border-red-200 px-2 py-1 rounded hover:bg-red-50",children:[e.jsx(re,{size:12})," Meninggal"]})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("button",{onClick:m,className:"text-blue-600 bg-blue-50 p-1 rounded",children:e.jsx(Ne,{size:16})}),e.jsx("button",{onClick:x,className:"text-red-600 bg-red-50 p-1 rounded",children:e.jsx(ve,{size:16})})]})]})]})}function Aa({data:n,memberCount:m,onClick:x}){return e.jsxs("div",{onClick:x,className:"p-4 rounded-xl border shadow-sm bg-white cursor-pointer hover:shadow-md flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-full font-bold w-10 h-10 flex items-center justify-center overflow-hidden",children:n.files&&n.files.length>0?e.jsx("img",{src:n.files[0],className:"w-full h-full object-cover"}):n.nama[0]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:n.nama}),e.jsxs("p",{className:"text-xs text-gray-500",children:["KK: ",n.nomorKK]})]})]}),e.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[m," Anggota"]})]})}function v({label:n,name:m,type:x="text",value:h,onChange:d,placeholder:u,required:p,disabled:N,className:y}){const M=ie.useMemo(()=>`input-${m}-${Math.random().toString(36).substr(2,9)}`,[m]),w=S=>{if(x==="date"&&S.target.showPicker)try{S.target.showPicker()}catch{}};return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:M,className:"text-sm font-medium text-gray-700 mb-1 block",children:[n," ",p&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:M,type:x,name:m,value:h,onChange:d,onClick:x==="date"?S=>w(S):void 0,placeholder:u,required:p,disabled:N,className:`px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition w-full min-h-[42px] ${y}`})]})}function R({label:n,name:m,value:x,onChange:h,options:d,required:u}){const p=ie.useMemo(()=>`select-${m}-${Math.random().toString(36).substr(2,9)}`,[m]);return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:p,className:"text-sm font-medium text-gray-700 mb-1 block",children:[n," ",u&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{id:p,name:m,value:x,onChange:h,required:u,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white w-full min-h-[42px]",children:d.map(N=>e.jsx("option",{value:N,children:N},N))})]})}class Ta extends ie.Component{constructor(m){super(m),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(m){return{hasError:!0,error:m}}componentDidCatch(m,x){console.error("Uncaught error:",m,x),this.setState({errorInfo:x})}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"#721c24",backgroundColor:"#f8d7da",fontFamily:"sans-serif",height:"100vh",boxSizing:"border-box"},children:[e.jsx("h2",{style:{borderBottom:"1px solid #f5c6cb",paddingBottom:"10px"},children:"Oops, terjadi kesalahan fatal."}),e.jsx("p",{children:"Aplikasi mengalami crash. Mohon screenshot pesan di bawah ini dan kirimkan ke pengembang:"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Error:"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",border:"1px solid #f5c6cb"},children:this.state.error&&this.state.error.toString()})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Stack Trace:"}),e.jsxs("details",{style:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[e.jsx("summary",{children:"Klik untuk melihat detail"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",fontSize:"12px",marginTop:"5px",border:"1px solid #ccc"},children:this.state.errorInfo&&this.state.errorInfo.componentStack})]})]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",cursor:"pointer",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",fontSize:"16px"},children:"Muat Ulang Halaman"})]}):this.props.children}}const _e=document.getElementById("root");_e?Pa(_e).render(e.jsx(ie.StrictMode,{children:e.jsx(Ta,{children:e.jsx(Da,{})})})):console.error("Gagal menemukan elemen ID 'root' di index.html");
