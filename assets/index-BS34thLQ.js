import{i as Ze,g as ea,a as aa,r as g,o as sa,b as ie,c as X,j as e,U as V,C as Ke,M as Ce,d as Me,X as Y,e as Le,H as Pe,L as ta,f as la,s as na,h as ra,u as oe,k as Q,l as Ae,m as ia,n as oa,A as da,P as ca,p as xa,q as De,F as ma,t as Ie,K as ua,B as ga,S as pa,v as de,w as ue,T as ge,x as ha,R as ee,y as ba,z as fa,D as ja,E as va,G as Na,I as ya,J as wa}from"./vendor-Dj7MReU_.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const x of i)if(x.type==="childList")for(const p of x.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&h(p)}).observe(document,{childList:!0,subtree:!0});function o(i){const x={};return i.integrity&&(x.integrity=i.integrity),i.referrerPolicy&&(x.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?x.credentials="include":i.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function h(i){if(i.ep)return;i.ep=!0;const x=o(i);fetch(i.href,x)}})();let pe;try{typeof __firebase_config<"u"?pe=JSON.parse(__firebase_config):pe={apiKey:"AIzaSyBwf0YITW6dueNHMtfD_d-fA0TcVhBT06c",authDomain:"rt-05-rw-09.firebaseapp.com",projectId:"rt-05-rw-09",storageBucket:"rt-05-rw-09.firebasestorage.app",messagingSenderId:"656172952610",appId:"1:656172952610:web:f6c98f827617589e73ae7b"}}catch(n){console.error("Error parsing firebase config",n)}const Be=Ze(pe),z=ea(Be),ce=aa(Be),Te=n=>new Promise((c,o)=>{const h=new FileReader;h.readAsDataURL(n),h.onload=i=>{var p;const x=new Image;x.src=(p=i.target)==null?void 0:p.result,x.onload=()=>{const b=document.createElement("canvas");let N=x.width,w=x.height;const v=800;N>w?N>v&&(w*=v/N,N=v):w>v&&(N*=v/w,w=v),b.width=N,b.height=w;const K=b.getContext("2d");if(!K){o(new Error("Canvas ctx error"));return}K.drawImage(x,0,0,N,w),c(b.toDataURL("image/jpeg",.7))},x.onerror=b=>o(b)},h.onerror=i=>o(i)}),ze=()=>new Date().toISOString().split("T")[0],E={nomorKK:"",alamat:"",statusHubungan:"Kepala Keluarga",isPendatang:!1,nik:"",nama:"",tempatLahir:"",tanggalLahir:"",jenisKelamin:"Laki-laki",golDarah:"-",agama:"Islam",statusPerkawinan:"Belum Kawin",pendidikan:"SMA/Sederajat",pekerjaan:"",statusRumah:"Milik Sendiri",jenisBpjs:"Tidak Memiliki",hasMobil:!1,platMobil:"",hasMotor:!1,platMotor:"",catatan:"",isMoved:!1,alamatPindah:"",tanggalPindah:"",files:[]},xe={namaKegiatan:"",tanggal:"",deskripsi:"",keterangan:"",files:[]},me={namaPelapor:"",deskripsi:"",status:"Menunggu",tanggapan:"",files:[],tanggalPengaduan:"",tanggalPenyelesaian:""};function ka(){const[n,c]=g.useState(null),[o,h]=g.useState("penduduk"),[i,x]=g.useState("summary"),[p,b]=g.useState([]),[N,w]=g.useState([]),[v,K]=g.useState([]),[H,_]=g.useState(!1),[Ee,ae]=g.useState(!1),[f,he]=g.useState("resident"),[be,M]=g.useState(null),[U,fe]=g.useState(""),[O,je]=g.useState(""),[se,He]=g.useState("Semua"),[W,_e]=g.useState(""),[$,ve]=g.useState(null),[y,F]=g.useState("kk"),[Ue,te]=g.useState(!1),[P,G]=g.useState({id:"",tanggapan:"",files:[]}),[le,Ne]=g.useState(!1),[ye,ne]=g.useState(null),[r,m]=g.useState(E),[S,C]=g.useState(xe),[L,T]=g.useState(me);g.useEffect(()=>((async()=>{try{typeof __initial_auth_token<"u"&&__initial_auth_token?await na(ce,__initial_auth_token):await ra(ce)}catch(a){console.error("Auth Error:",a)}})(),sa(ce,c)),[]),g.useEffect(()=>{if(!n)return;const s=ie(X(z,"residents"),t=>{const d=t.docs.map(u=>({id:u.id,...u.data(),files:u.data().files||[],catatan:u.data().catatan||""}));d.sort((u,B)=>{const Se=["Kepala Keluarga","Istri","Suami","Anak"];return Se.indexOf(u.statusHubungan)-Se.indexOf(B.statusHubungan)}),b(d)},t=>console.error("Error Resident:",t)),a=ie(X(z,"activities"),t=>{const d=t.docs.map(u=>({id:u.id,...u.data(),files:u.data().files||[]}));d.sort((u,B)=>new Date(B.tanggal).getTime()-new Date(u.tanggal).getTime()),w(d)},t=>console.error("Error Activity:",t)),l=ie(X(z,"complaints"),t=>{const d=t.docs.map(u=>({id:u.id,...u.data(),files:u.data().files||[],tanggalPengaduan:u.data().tanggalPengaduan||"",tanggalPenyelesaian:u.data().tanggalPenyelesaian||""}));K(d.sort((u,B)=>u.status==="Menunggu"&&B.status!=="Menunggu"?-1:u.status!=="Menunggu"&&B.status==="Menunggu"?1:0))},t=>console.error("Error Complaint:",t));return()=>{s(),a(),l()}},[n]);const j=g.useMemo(()=>{const s=p.filter(t=>!t.isMoved),a=p.filter(t=>t.isMoved),l=s.filter(t=>t.statusHubungan==="Kepala Keluarga");return{totalWarga:s.length,totalKK:l.length,totalPindah:a.length,totalPendatang:s.filter(t=>t.isPendatang).length,rumahMilik:l.filter(t=>t.statusRumah==="Milik Sendiri").length,rumahSewa:l.filter(t=>t.statusRumah==="Sewa/Kontrak").length,rumahMenumpang:l.filter(t=>t.statusRumah==="Menumpang").length,totalMobil:s.filter(t=>t.hasMobil).length,totalMotor:s.filter(t=>t.hasMotor).length,lakiLaki:s.filter(t=>t.jenisKelamin==="Laki-laki").length,perempuan:s.filter(t=>t.jenisKelamin==="Perempuan").length}},[p]),Oe=async s=>{if(s.preventDefault(),!n)return alert("Sistem belum siap.");if(H)return;_(!0);let a="",l={};if(f==="resident"||f==="move"?(a="residents",l=r):f==="activity"?(a="activities",l=S):f==="complaint"&&(a="complaints",l=L,!le&&!l.tanggalPengaduan&&(l.tanggalPengaduan=ze())),new Blob([JSON.stringify(l)]).size>9e5){alert("Ukuran data/foto terlalu besar. Mohon kurangi jumlah foto."),_(!1);return}try{const t=X(z,a);le&&ye?(await oe(Q(t,ye),{...l,updatedAt:Ae()}),alert("Data berhasil diperbarui!"),I()):(await ia(t,{...l,createdAt:Ae()}),f==="resident"?confirm(`Data berhasil disimpan!

Klik OK untuk tambah anggota keluarga lain.
Klik Cancel untuk selesai.`)?m(u=>({...E,nomorKK:u.nomorKK,alamat:u.alamat,statusRumah:u.statusRumah,statusHubungan:"Anak",isPendatang:u.isPendatang})):I():(alert("Data berhasil disimpan!"),I()))}catch(t){console.error("Gagal Menyimpan:",t),alert(`Gagal menyimpan data.
Error: ${t.message}`)}finally{_(!1)}},J=async(s,a)=>{if(confirm("Yakin hapus data ini?"))try{await Na(Q(z,s,a))}catch(l){alert("Gagal menghapus: "+l.message)}},re=async s=>{const a=Array.from(s.target.files||[]),l=[];for(const t of a)try{const d=await Te(t);l.push(d)}catch(d){console.error(d)}f==="resident"?m(t=>({...t,files:[...t.files,...l]})):f==="activity"?C(t=>({...t,files:[...t.files||[],...l]})):f==="complaint"&&T(t=>({...t,files:[...t.files||[],...l]})),s.target.value=""},We=s=>{f==="resident"?m(a=>({...a,files:a.files.filter((l,t)=>t!==s)})):f==="activity"?C(a=>({...a,files:(a.files||[]).filter((l,t)=>t!==s)})):f==="complaint"&&T(a=>({...a,files:(a.files||[]).filter((l,t)=>t!==s)}))},$e=s=>{G({id:s,tanggapan:"",files:[]}),te(!0)},Ge=async s=>{const a=Array.from(s.target.files||[]),l=[];for(const t of a)try{const d=await Te(t);l.push(d)}catch(d){console.error(d)}G(t=>({...t,files:[...t.files,...l]})),s.target.value=""},Je=async s=>{if(s.preventDefault(),!(!n||!P.id))try{const a=v.find(d=>d.id===P.id),t=[...(a==null?void 0:a.files)||[],...P.files];await oe(Q(z,"complaints",P.id),{status:"Selesai",tanggapan:P.tanggapan,files:t,tanggalPenyelesaian:ze()}),te(!1)}catch(a){console.error(a),alert("Gagal menyelesaikan pengaduan.")}},qe=async(s,a)=>{try{const l={status:a};a!=="Selesai"&&(l.tanggalPenyelesaian=""),await oe(Q(z,"complaints",s),l)}catch(l){console.error(l),alert("Gagal update status")}},A=(s,a)=>{he(s),_(!1),a?(Ne(!0),ne(a.id),s==="resident"&&m(a),s==="activity"&&C({...a,files:a.files||[]}),s==="complaint"&&T({...a,files:a.files||[]})):(Ne(!1),ne(null),s==="resident"&&m(E),s==="activity"&&C(xe),s==="complaint"&&T(me)),ae(!0)},we=s=>{m({...s,alamatPindah:"",tanggalPindah:""}),ne(s.id),he("move"),ae(!0)},I=()=>{ae(!1),te(!1),m(E),C(xe),T(me)},q=(s,a)=>e.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-2",children:s==null?void 0:s.map((l,t)=>e.jsxs("div",{className:"w-16 h-16 relative flex-shrink-0 group",children:[e.jsx("img",{src:l,className:"w-full h-full object-cover rounded border border-gray-200 cursor-pointer",onClick:()=>M(l)}),e.jsx("button",{type:"button",onClick:d=>{d.stopPropagation(),a?a(t):We(t)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 shadow transition",children:e.jsx(Y,{size:12})})]},t))}),ke=s=>!s||s.length===0?null:e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(ya,{size:12})," Lampiran (",s.length,")"]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:s.map((a,l)=>e.jsx("div",{className:"w-10 h-10 rounded border border-gray-200 overflow-hidden cursor-pointer hover:opacity-80",onClick:()=>M(a),children:e.jsx("img",{src:a,className:"w-full h-full object-cover"})},l))})]}),Xe=()=>{let s="Laporan Ringkasan";return i==="warga"&&(s="Laporan Detail Data Warga"),i==="kegiatan"&&(s="Laporan Kegiatan & Dokumentasi"),i==="aduan"&&(s="Laporan & Status Pengaduan Warga"),e.jsxs("div",{className:"pb-20 bg-white p-6 rounded-xl border shadow-sm print:shadow-none print:border-none print:p-0 print:w-full",children:[e.jsxs("div",{className:"hidden print:flex flex-col items-center justify-center mb-8 border-b-2 border-gray-800 pb-4",children:[e.jsx("h1",{className:"text-2xl font-bold uppercase",children:"RT. 05 RW. 09 PERUMAHAN BUANA PERMAI"}),e.jsx("h2",{className:"text-lg font-medium",children:"Kelurahan Cipondoh, Kecamatan Cipondoh, Kota Tangerang"}),e.jsx("h3",{className:"text-xl font-bold mt-2 uppercase",children:s}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Dicetak pada: ",new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 print:hidden gap-4",children:[e.jsx("div",{className:"flex gap-2 bg-slate-100 p-1 rounded-lg overflow-x-auto w-full sm:w-auto",children:[{id:"summary",label:"Ringkasan",icon:e.jsx(Me,{size:16})},{id:"warga",label:"Data Warga",icon:e.jsx(oa,{size:16})},{id:"kegiatan",label:"Kegiatan",icon:e.jsx(da,{size:16})},{id:"aduan",label:"Pengaduan",icon:e.jsx(Ce,{size:16})}].map(a=>e.jsxs("button",{onClick:()=>x(a.id),className:`px-3 py-2 rounded-md text-sm font-medium flex items-center gap-2 transition ${i===a.id?"bg-white shadow text-blue-600":"text-slate-500 hover:bg-slate-200"}`,children:[a.icon," ",a.label]},a.id))}),e.jsxs("button",{onClick:()=>window.print(),className:"bg-slate-800 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-slate-700 shadow w-full sm:w-auto justify-center",children:[e.jsx(ca,{size:18})," Cetak Laporan"]})]}),e.jsxs("div",{className:"space-y-8 min-h-[50vh]",children:[i==="summary"&&e.jsxs("section",{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Total Warga"}),e.jsxs("p",{className:"text-2xl font-bold",children:[j.totalWarga," ",e.jsx("span",{className:"text-sm font-normal",children:"Jiwa"})]})]}),e.jsxs("div",{className:"p-4 bg-indigo-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Kepala Keluarga"}),e.jsxs("p",{className:"text-2xl font-bold",children:[j.totalKK," ",e.jsx("span",{className:"text-sm font-normal",children:"KK"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Laki-laki / Perempuan"}),e.jsxs("p",{className:"text-2xl font-bold",children:[j.lakiLaki," ",e.jsx("span",{className:"text-sm font-normal text-gray-400",children:"/"})," ",j.perempuan]})]}),e.jsxs("div",{className:"p-4 bg-orange-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Status Rumah"}),e.jsxs("p",{className:"text-sm font-bold",children:["Milik: ",j.rumahMilik," | Sewa: ",j.rumahSewa]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("h4",{className:"font-bold border-b pb-2 mb-2",children:"Statistik Kendaraan"}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{children:"Mobil"}),e.jsxs("span",{className:"font-bold",children:[j.totalMobil," Unit"]})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{children:"Motor"}),e.jsxs("span",{className:"font-bold",children:[j.totalMotor," Unit"]})]})]}),e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("h4",{className:"font-bold border-b pb-2 mb-2",children:"Statistik Aduan"}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{children:"Selesai"}),e.jsx("span",{className:"font-bold text-green-600",children:v.filter(a=>a.status==="Selesai").length})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{children:"Dalam Proses"}),e.jsx("span",{className:"font-bold text-yellow-600",children:v.filter(a=>a.status!=="Selesai").length})]})]})]})]}),i==="warga"&&e.jsx("section",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs sm:text-sm border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 print:bg-gray-200",children:[e.jsx("th",{className:"border p-2 text-left w-8",children:"No"}),e.jsx("th",{className:"border p-2 text-left",children:"Nama / NIK"}),e.jsx("th",{className:"border p-2 text-left",children:"KK / Hubungan"}),e.jsx("th",{className:"border p-2 text-left",children:"L/P & Usia"}),e.jsx("th",{className:"border p-2 text-left",children:"Status/Pekerjaan"}),e.jsx("th",{className:"border p-2 text-center w-24",children:"Foto"})]})}),e.jsx("tbody",{children:p.map((a,l)=>e.jsxs("tr",{className:"break-inside-avoid",children:[e.jsx("td",{className:"border p-2 text-center align-middle",children:l+1}),e.jsxs("td",{className:"border p-2 align-middle",children:[e.jsx("div",{className:"font-bold",children:a.nama}),e.jsx("div",{className:"text-gray-500",children:a.nik})]}),e.jsxs("td",{className:"border p-2 align-middle",children:[e.jsx("div",{children:a.nomorKK}),e.jsx("div",{className:"italic text-gray-500",children:a.statusHubungan})]}),e.jsxs("td",{className:"border p-2 align-middle",children:[a.jenisKelamin==="Laki-laki"?"L":"P",", ",a.tempatLahir,e.jsx("div",{className:"text-gray-500",children:a.tanggalLahir})]}),e.jsxs("td",{className:"border p-2 align-middle",children:[e.jsx("div",{children:a.statusPerkawinan}),e.jsx("div",{className:"text-gray-500",children:a.pekerjaan})]}),e.jsx("td",{className:"border p-2 text-center align-middle",children:a.files&&a.files.length>0?e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:a.files.map((t,d)=>e.jsx("img",{src:t,className:"w-20 h-20 object-cover border rounded shadow-sm print:w-24 print:h-24 cursor-pointer",onClick:()=>M(t)},d))}):"-"})]},a.id))})]})}),i==="kegiatan"&&e.jsxs("section",{children:[N.length===0&&e.jsx("p",{className:"text-center italic text-gray-500",children:"Tidak ada data kegiatan."}),e.jsx("div",{className:"grid grid-cols-1 gap-8",children:N.map((a,l)=>e.jsxs("div",{className:"border rounded-lg p-4 break-inside-avoid flex flex-col gap-4 bg-white",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 border-b pb-2",children:[e.jsx("span",{className:"bg-slate-800 text-white w-6 h-6 flex items-center justify-center rounded-full text-xs",children:l+1}),e.jsx("h4",{className:"font-bold text-lg",children:a.namaKegiatan}),e.jsx("span",{className:"ml-auto text-sm text-gray-500 font-mono",children:a.tanggal})]}),e.jsx("p",{className:"text-gray-800 text-sm whitespace-pre-wrap mb-2 text-justify",children:a.deskripsi}),a.keterangan&&e.jsxs("p",{className:"text-xs bg-gray-100 p-2 rounded inline-block w-full",children:[e.jsx("strong",{children:"Keterangan:"})," ",a.keterangan]})]}),a.files&&a.files.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 mb-2 uppercase",children:"Dokumentasi:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:a.files.map((t,d)=>e.jsx("img",{src:t,className:"w-full h-32 object-cover rounded border shadow-sm print:h-40 cursor-pointer hover:opacity-90",onClick:()=>M(t)},d))})]})]},a.id))})]}),i==="aduan"&&e.jsx("section",{children:e.jsx("div",{className:"grid grid-cols-1 gap-6",children:v.map((a,l)=>e.jsxs("div",{className:"border rounded-lg p-4 break-inside-avoid bg-white flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between items-start border-b pb-2",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-bold text-lg",children:["#",l+1," - ",a.namaPelapor]}),e.jsxs("span",{className:"text-xs text-gray-500 block",children:["Tanggal Lapor: ",a.tanggalPengaduan]})]}),e.jsx("span",{className:`px-3 py-1 rounded text-xs font-bold border ${a.status==="Selesai"?"bg-green-100 text-green-700 border-green-200":a.status==="Proses"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-red-100 text-red-700 border-red-200"}`,children:a.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Uraian Masalah:"}),e.jsx("p",{className:"text-sm text-gray-800 bg-red-50 p-3 rounded border border-red-100 min-h-[80px]",children:a.deskripsi}),a.files&&a.files.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 block mb-1",children:"Foto Bukti Awal:"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:a.files.map((t,d)=>e.jsx("img",{src:t,className:"w-24 h-24 object-cover border rounded shadow-sm cursor-pointer",onClick:()=>M(t)},d))})]})]}),e.jsxs("div",{className:"border-l pl-0 md:pl-6 border-gray-200",children:[e.jsx("p",{className:"text-sm font-bold text-gray-700 mb-1",children:"Tindak Lanjut / Penyelesaian:"}),a.tanggapan?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-800 bg-green-50 p-3 rounded border border-green-100 min-h-[80px]",children:a.tanggapan}),e.jsxs("p",{className:"text-xs text-green-700 mt-1 font-mono text-right",children:["Selesai Tgl: ",a.tanggalPenyelesaian]})]}):e.jsx("p",{className:"text-sm text-gray-400 italic bg-gray-50 p-3 rounded",children:"Belum ada tindak lanjut."})]})]})]},a.id))})}),e.jsx("div",{className:"hidden print:flex justify-end mt-12 pt-8",children:e.jsxs("div",{className:"text-center w-64",children:[e.jsxs("p",{className:"mb-20",children:["Mengetahui,",e.jsx("br",{}),"Ketua RT. 05 RW. 09"]}),e.jsx("p",{className:"font-bold underline",children:"( ....................................... )"})]})})]})]})},Ve=()=>{const s=p.filter(l=>W===""||l.nama.toLowerCase().includes(W.toLowerCase())||l.nomorKK.includes(W)?y==="kk"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved:y==="pindah"?l.isMoved:y==="datang"?l.isPendatang&&!l.isMoved:y==="milik"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved&&l.statusRumah==="Milik Sendiri":y==="sewa"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved&&l.statusRumah==="Sewa/Kontrak":y==="numpang"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved&&l.statusRumah==="Menumpang":!1:!1),a=l=>p.filter(t=>t.nomorKK===l);if($){const l=a($);return e.jsxs("div",{className:"animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("button",{onClick:()=>ve(null),className:"p-2 bg-white border rounded-full",children:e.jsx(xa,{size:20})}),e.jsxs("h2",{className:"text-xl font-bold",children:["Detail Keluarga (KK: ",$,")"]}),e.jsxs("button",{onClick:()=>{const t=l.find(u=>u.statusHubungan==="Kepala Keluarga")||l[0],d={...E,nomorKK:$,alamat:(t==null?void 0:t.alamat)||"",isPendatang:t==null?void 0:t.isPendatang};A("resident"),m(d)},className:"ml-auto bg-green-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(De,{size:16})," Tambah Anggota"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(t=>e.jsx(Re,{data:t,onEdit:()=>A("resident",t),onDelete:()=>J("residents",t.id),onMove:()=>we(t),onPreview:d=>M(d)},t.id))})]})}return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[e.jsx(R,{icon:e.jsx(V,{}),label:"Total Warga",value:j.totalWarga,color:"bg-blue-600",active:!1,onClick:()=>{}}),e.jsx(R,{icon:e.jsx(ma,{}),label:"Kepala Keluarga",value:j.totalKK,color:"bg-indigo-500",active:y==="kk",onClick:()=>F("kk")}),e.jsx(R,{icon:e.jsx(Ie,{}),label:"Warga Pindah",value:j.totalPindah,color:"bg-red-500",active:y==="pindah",onClick:()=>F("pindah")}),e.jsx(R,{icon:e.jsx(De,{}),label:"Warga Datang",value:j.totalPendatang,color:"bg-green-500",active:y==="datang",onClick:()=>F("datang")})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-2",children:"FILTER STATUS RUMAH (KK)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(R,{icon:e.jsx(Pe,{}),label:"Milik Sendiri",value:j.rumahMilik,color:"bg-emerald-600",active:y==="milik",onClick:()=>F("milik")}),e.jsx(R,{icon:e.jsx(ua,{}),label:"Sewa",value:j.rumahSewa,color:"bg-orange-500",active:y==="sewa",onClick:()=>F("sewa")}),e.jsx(R,{icon:e.jsx(ga,{}),label:"Menumpang",value:j.rumahMenumpang,color:"bg-purple-500",active:y==="numpang",onClick:()=>F("numpang")})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(pa,{className:"absolute left-3 top-2.5 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Cari Nama / KK...",value:W,onChange:l=>_e(l.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:()=>A("resident"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(de,{size:18})," Baru"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(l=>["kk","milik","sewa","numpang"].includes(y)?e.jsx(Sa,{data:l,memberCount:a(l.nomorKK).length,onClick:()=>ve(l.nomorKK)},l.id):e.jsx(Re,{data:l,onEdit:()=>A("resident",l),onDelete:()=>J("residents",l.id),onMove:()=>we(l),onPreview:t=>M(t)},l.id))})]})},Ye=()=>{const s=N.filter(a=>!(U&&a.tanggal<U||O&&a.tanggal>O));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Kegiatan RT"}),e.jsxs("button",{onClick:()=>A("activity"),className:"bg-purple-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(de,{size:18})," Tambah"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(Ke,{size:14,className:"inline"})," Periode:"]}),e.jsx("input",{type:"date",value:U,onChange:a=>fe(a.target.value),className:"border rounded text-sm px-1"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"date",value:O,onChange:a=>je(a.target.value),className:"border rounded text-sm px-1"}),(U||O)&&e.jsx("button",{onClick:()=>{fe(""),je("")},className:"text-xs text-red-500",children:"Reset"})]}),e.jsx("div",{className:"space-y-4",children:s.map(a=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-bold text-lg",children:a.namaKegiatan}),e.jsx("span",{className:"text-sm bg-purple-100 text-purple-700 px-2 py-1 rounded h-fit",children:a.tanggal})]}),e.jsx("p",{className:"text-gray-600 text-sm whitespace-pre-wrap",children:a.deskripsi}),a.keterangan&&e.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded border",children:a.keterangan}),ke(a.files),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsxs("button",{onClick:()=>A("activity",a),className:"text-blue-600 text-sm flex items-center gap-1",children:[e.jsx(ue,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>J("activities",a.id),className:"text-red-600 text-sm flex items-center gap-1",children:[e.jsx(ge,{size:14})," Hapus"]})]})]},a.id))})]})},Qe=()=>{const s=v.filter(a=>!(se!=="Semua"&&a.status!==se));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Pengaduan"}),e.jsxs("button",{onClick:()=>A("complaint"),className:"bg-orange-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(de,{size:18})," Buat"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(ha,{size:14,className:"inline"})," Status:"]}),e.jsxs("select",{value:se,onChange:a=>He(a.target.value),className:"border rounded text-sm px-2 py-1",children:[e.jsx("option",{value:"Semua",children:"Semua"}),e.jsx("option",{value:"Menunggu",children:"Menunggu"}),e.jsx("option",{value:"Proses",children:"Proses"}),e.jsx("option",{value:"Selesai",children:"Selesai"})]})]}),e.jsx("div",{className:"space-y-4",children:s.map(a=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-bold",children:a.namaPelapor}),e.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${a.status==="Selesai"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:a.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:a.deskripsi}),ke(a.files),a.status==="Selesai"&&e.jsxs("div",{className:"bg-green-50 p-2 rounded text-xs text-green-800 border border-green-200",children:["âœ… ",a.tanggapan]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2 pt-2 border-t flex-wrap",children:[["Menunggu","Proses"].map(l=>e.jsx("button",{onClick:()=>qe(a.id,l),className:"text-xs border px-2 py-1 rounded hover:bg-gray-50",children:l},l)),e.jsx("button",{onClick:()=>$e(a.id),className:"text-xs border px-2 py-1 rounded hover:bg-green-50 text-green-700 font-bold",children:"Selesai"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{onClick:()=>A("complaint",a),className:"text-blue-500",children:e.jsx(ue,{size:16})}),e.jsx("button",{onClick:()=>J("complaints",a.id),className:"text-red-500",children:e.jsx(ge,{size:16})})]})]})]},a.id))})]})};return e.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 font-sans",children:[e.jsxs("header",{className:"bg-white border-b sticky top-0 z-30 shadow-sm p-4 print:hidden",children:[e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 text-white p-2 rounded",children:e.jsx(V,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-sm leading-tight",children:"RT. 05 RW. 09 Buana Permai"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sistem Data"})]})]}),e.jsxs("div",{className:"flex mt-4 border-t pt-2 gap-4 overflow-x-auto",children:[e.jsx(Z,{active:o==="penduduk",onClick:()=>h("penduduk"),icon:e.jsx(V,{size:16}),label:"Warga"}),e.jsx(Z,{active:o==="kegiatan",onClick:()=>h("kegiatan"),icon:e.jsx(Ke,{size:16}),label:"Kegiatan"}),e.jsx(Z,{active:o==="pengaduan",onClick:()=>h("pengaduan"),icon:e.jsx(Ce,{size:16}),label:"Aduan"}),e.jsx(Z,{active:o==="laporan",onClick:()=>h("laporan"),icon:e.jsx(Me,{size:16}),label:"Laporan"})]})]}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-4",children:[o==="penduduk"&&Ve(),o==="kegiatan"&&Ye(),o==="pengaduan"&&Qe(),o==="laporan"&&Xe()]}),be&&e.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4 cursor-pointer print:hidden",onClick:()=>M(null),children:[e.jsx("img",{src:be,className:"max-w-full max-h-full rounded shadow-lg object-contain"}),e.jsx("button",{className:"absolute top-4 right-4 text-white bg-black/50 rounded-full p-2 hover:bg-black/70 transition",children:e.jsx(Y,{size:24})})]}),Ee&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto print:hidden",children:e.jsxs("div",{className:"bg-white w-full rounded-xl max-w-lg relative flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-xl sticky top-0 z-10",children:[e.jsxs("h2",{className:"font-bold text-lg capitalize",children:[le?"Edit":"Tambah"," ",f]}),e.jsx("button",{onClick:I,children:e.jsx(Y,{size:24,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:Oe,className:"p-4 overflow-y-auto space-y-6",children:[f==="resident"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(Le,{size:18})," Data Pribadi"]}),e.jsx(k,{label:"NIK",value:r.nik,onChange:s=>m({...r,nik:s.target.value}),required:!0}),e.jsx(k,{label:"Nama Lengkap",value:r.nama,onChange:s=>m({...r,nama:s.target.value}),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(k,{label:"Tempat Lahir",value:r.tempatLahir,onChange:s=>m({...r,tempatLahir:s.target.value})}),e.jsx(k,{label:"Tgl Lahir",type:"date",value:r.tanggalLahir,onChange:s=>m({...r,tanggalLahir:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(D,{label:"Jenis Kelamin",value:r.jenisKelamin,onChange:s=>m({...r,jenisKelamin:s.target.value}),options:["Laki-laki","Perempuan"]}),e.jsx(D,{label:"Gol. Darah",value:r.golDarah,onChange:s=>m({...r,golDarah:s.target.value}),options:["-","A","B","AB","O"]})]}),e.jsx(D,{label:"Agama",value:r.agama,onChange:s=>m({...r,agama:s.target.value}),options:["Islam","Kristen","Katolik","Hindu","Buddha","Konghucu"]}),e.jsx(D,{label:"Pendidikan Terakhir",value:r.pendidikan,onChange:s=>m({...r,pendidikan:s.target.value}),options:["Tidak/Belum Sekolah","SD/Sederajat","SMP/Sederajat","SMA/Sederajat","D1","D2","D3","S1","S2","S3"]}),e.jsx(k,{label:"Pekerjaan",value:r.pekerjaan,onChange:s=>m({...r,pekerjaan:s.target.value})}),e.jsx(D,{label:"Status Kawin",value:r.statusPerkawinan,onChange:s=>m({...r,statusPerkawinan:s.target.value}),options:["Belum Kawin","Kawin","Cerai Hidup","Cerai Mati"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(V,{size:18})," Data Keluarga"]}),e.jsx(k,{label:"Nomor KK",value:r.nomorKK,onChange:s=>m({...r,nomorKK:s.target.value}),required:!0}),e.jsx(D,{label:"Hubungan",value:r.statusHubungan,onChange:s=>m({...r,statusHubungan:s.target.value}),options:["Kepala Keluarga","Suami","Istri","Anak","Menantu","Orang Tua","Mertua","Famili Lain"]}),e.jsx(k,{label:"Alamat Domisili",value:r.alamat,onChange:s=>m({...r,alamat:s.target.value})}),e.jsxs("div",{className:"flex items-center gap-2 bg-green-50 p-3 rounded border border-green-200",children:[e.jsx("input",{type:"checkbox",checked:r.isPendatang,onChange:s=>m({...r,isPendatang:s.target.checked}),className:"w-5 h-5 text-green-600 rounded"}),e.jsx("label",{className:"text-sm font-medium text-green-800",children:"Warga Pendatang (Baru Masuk)"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(Pe,{size:18})," Aset & Kepemilikan"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(D,{label:"Status Rumah",value:r.statusRumah,onChange:s=>m({...r,statusRumah:s.target.value}),options:["Milik Sendiri","Sewa/Kontrak","Menumpang"]}),e.jsx(D,{label:"BPJS",value:r.jenisBpjs,onChange:s=>m({...r,jenisBpjs:s.target.value}),options:["Tidak Memiliki","BPJS Mandiri","BPJS Kantor","BPJS PBI"]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded border border-slate-200 space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Kendaraan"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:r.hasMobil,onChange:s=>m({...r,hasMobil:s.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm w-16",children:"Mobil"}),e.jsx("input",{type:"text",disabled:!r.hasMobil,value:r.platMobil,onChange:s=>m({...r,platMobil:s.target.value}),placeholder:"Plat Nomor",className:"flex-1 border rounded px-2 py-1 text-sm disabled:bg-slate-100"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:r.hasMotor,onChange:s=>m({...r,hasMotor:s.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm w-16",children:"Motor"}),e.jsx("input",{type:"text",disabled:!r.hasMotor,value:r.platMotor,onChange:s=>m({...r,platMotor:s.target.value}),placeholder:"Plat Nomor",className:"flex-1 border rounded px-2 py-1 text-sm disabled:bg-slate-100"})]})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Catatan Tambahan"}),e.jsx("textarea",{value:r.catatan,onChange:s=>m({...r,catatan:s.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Contoh: Sakit menahun, butuh bantuan, dll."})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Dokumen"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:re,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(r.files)]})]})]}),f==="activity"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Nama Kegiatan",value:S.namaKegiatan,onChange:s=>C({...S,namaKegiatan:s.target.value}),required:!0}),e.jsx(k,{label:"Tanggal",type:"date",value:S.tanggal,onChange:s=>C({...S,tanggal:s.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:3,placeholder:"Deskripsi",value:S.deskripsi,onChange:s=>C({...S,deskripsi:s.target.value})}),e.jsx(k,{label:"Keterangan",value:S.keterangan,onChange:s=>C({...S,keterangan:s.target.value})}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:re,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(S.files)]})]}),f==="complaint"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Nama Pelapor",value:L.namaPelapor,onChange:s=>T({...L,namaPelapor:s.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:4,placeholder:"Isi Pengaduan...",value:L.deskripsi,onChange:s=>T({...L,deskripsi:s.target.value}),required:!0}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Bukti"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:re,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(L.files)]})]}),e.jsx("div",{className:"pt-4 border-t sticky bottom-0 bg-white",children:e.jsx("button",{type:"submit",disabled:H,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold shadow hover:bg-blue-700 disabled:bg-blue-300 flex justify-center items-center gap-2",children:H?e.jsxs(e.Fragment,{children:[e.jsx(ta,{className:"animate-spin"})," Menyimpan..."]}):"SIMPAN DATA"})})]})]})}),Ue&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 print:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[e.jsx(la,{size:20})," Selesaikan Pengaduan"]}),e.jsx("button",{onClick:I,className:"text-gray-500 hover:text-red-500",children:e.jsx(Y,{size:20})})]}),e.jsxs("form",{onSubmit:Je,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catatan / Tanggapan Penyelesaian"}),e.jsx("textarea",{value:P.tanggapan,onChange:s=>G({...P,tanggapan:s.target.value}),placeholder:"Contoh: Masalah telah diperbaiki pada hari Senin...",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 resize-none",required:!0})]}),e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Bukti Foto Penyelesaian"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Ge,className:"text-sm w-full file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(P.files,s=>G(a=>({...a,files:a.files.filter((l,t)=>t!==s)})))]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 shadow-sm",children:"Simpan Selesai"})]})]})]})})]})}function Z({active:n,onClick:c,icon:o,label:h}){return e.jsxs("button",{onClick:c,className:`flex items-center gap-1 px-3 py-2 text-sm font-medium border-b-2 transition ${n?"border-blue-600 text-blue-600":"border-transparent text-gray-500"}`,children:[o," ",h]})}function R({icon:n,label:c,value:o,color:h,active:i,onClick:x}){return e.jsxs("div",{onClick:x,className:`p-3 rounded-lg border flex items-center gap-3 cursor-pointer ${i?"ring-2 ring-blue-400 bg-blue-50":"bg-white"}`,children:[e.jsx("div",{className:`${h} text-white p-2 rounded shadow`,children:n}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:c}),e.jsx("p",{className:"text-xl font-bold",children:o})]})]})}function Re({data:n,onEdit:c,onDelete:o,onMove:h,onPreview:i}){const x=n.statusHubungan==="Kepala Keluarga";return e.jsxs("div",{className:`p-4 rounded-xl border shadow-sm ${n.isMoved?"bg-red-50":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center border",children:n.files&&n.files.length>0?e.jsx("img",{src:n.files[0],className:"w-full h-full object-cover cursor-pointer",onClick:()=>i(n.files[0])}):e.jsx(Le,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold truncate",children:n.nama}),e.jsx("p",{className:"text-xs text-gray-500",children:n.statusHubungan})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.isMoved&&e.jsx("span",{className:"text-[10px] bg-red-600 text-white px-2 py-0.5 rounded",children:"PINDAH"}),n.isPendatang&&!n.isMoved&&e.jsx("span",{className:"text-[10px] bg-green-600 text-white px-2 py-0.5 rounded",children:"PENDATANG"})]})]}),e.jsxs("div",{className:"mt-3 text-xs space-y-1 text-gray-600 border-t pt-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"NIK:"})," ",n.nik]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"KK:"})," ",n.nomorKK]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"JK:"})," ",n.jenisKelamin]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Gol.D:"})," ",n.golDarah]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Agama:"})," ",n.agama]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Status:"})," ",n.statusPerkawinan]})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Pekerjaan:"})," ",n.pekerjaan]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Alamat:"})," ",n.alamat]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[n.hasMobil&&e.jsxs("span",{className:"text-[10px] bg-orange-100 text-orange-700 px-1 rounded flex items-center gap-1",children:[e.jsx(ba,{size:10})," ",n.platMobil]}),n.hasMotor&&e.jsxs("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1 rounded flex items-center gap-1",children:[e.jsx(fa,{size:10})," ",n.platMotor]})]}),n.files&&n.files.length>0&&e.jsx("div",{className:"flex gap-1 mt-2 overflow-x-auto pt-1",children:n.files.map((p,b)=>e.jsx("img",{src:p,className:"w-8 h-8 rounded object-cover border cursor-pointer hover:opacity-80",onClick:()=>i(p)},b))})]}),n.catatan&&e.jsxs("div",{className:"bg-yellow-50 p-2 rounded text-yellow-800 text-[10px] sm:text-xs mt-2 border border-yellow-100 flex gap-1 items-start",children:[e.jsx(ja,{size:12,className:"mt-0.5 flex-shrink-0"})," ",e.jsx("span",{children:n.catatan})]}),x&&!n.isMoved&&e.jsx("div",{className:"flex justify-between border-t pt-2 mt-2",children:e.jsxs("span",{className:"text-gray-500 text-[10px]",children:["Rumah: ",n.statusRumah]})}),n.isMoved&&e.jsxs("div",{className:"bg-red-100 p-2 rounded text-red-700 mt-2 text-xs",children:[e.jsxs("span",{className:"font-bold flex items-center gap-1",children:[e.jsx(Ie,{size:10})," Pindah ke:"]}),n.alamatPindah," (",n.tanggalPindah,")"]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center pt-2 border-t",children:[!n.isMoved&&e.jsxs("button",{onClick:h,className:"text-orange-600 text-xs flex items-center gap-1",children:[e.jsx(va,{size:12})," Pindah"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("button",{onClick:c,className:"text-blue-600 bg-blue-50 p-1 rounded",children:e.jsx(ue,{size:16})}),e.jsx("button",{onClick:o,className:"text-red-600 bg-red-50 p-1 rounded",children:e.jsx(ge,{size:16})})]})]})]})}function Sa({data:n,memberCount:c,onClick:o}){return e.jsxs("div",{onClick:o,className:"p-4 rounded-xl border shadow-sm bg-white cursor-pointer hover:shadow-md flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-full font-bold w-10 h-10 flex items-center justify-center overflow-hidden",children:n.files&&n.files.length>0?e.jsx("img",{src:n.files[0],className:"w-full h-full object-cover"}):n.nama[0]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:n.nama}),e.jsxs("p",{className:"text-xs text-gray-500",children:["KK: ",n.nomorKK]})]})]}),e.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[c," Anggota"]})]})}function k({label:n,name:c,type:o="text",value:h,onChange:i,placeholder:x,required:p,disabled:b,className:N}){const w=ee.useMemo(()=>`input-${c}-${Math.random().toString(36).substr(2,9)}`,[c]),v=K=>{if(o==="date"&&K.target.showPicker)try{K.target.showPicker()}catch{}};return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:w,className:"text-sm font-medium text-gray-700 mb-1 block",children:[n," ",p&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:w,type:o,name:c,value:h,onChange:i,onClick:o==="date"?K=>v(K):void 0,placeholder:x,required:p,disabled:b,className:`px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition w-full min-h-[42px] ${N}`})]})}function D({label:n,name:c,value:o,onChange:h,options:i,required:x}){const p=ee.useMemo(()=>`select-${c}-${Math.random().toString(36).substr(2,9)}`,[c]);return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:p,className:"text-sm font-medium text-gray-700 mb-1 block",children:[n," ",x&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{id:p,name:c,value:o,onChange:h,required:x,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white w-full min-h-[42px]",children:i.map(b=>e.jsx("option",{value:b,children:b},b))})]})}class Ka extends ee.Component{constructor(c){super(c),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(c){return{hasError:!0,error:c}}componentDidCatch(c,o){console.error("Uncaught error:",c,o),this.setState({errorInfo:o})}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"#721c24",backgroundColor:"#f8d7da",fontFamily:"sans-serif",height:"100vh",boxSizing:"border-box"},children:[e.jsx("h2",{style:{borderBottom:"1px solid #f5c6cb",paddingBottom:"10px"},children:"Oops, terjadi kesalahan fatal."}),e.jsx("p",{children:"Aplikasi mengalami crash. Mohon screenshot pesan di bawah ini dan kirimkan ke pengembang:"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Error:"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",border:"1px solid #f5c6cb"},children:this.state.error&&this.state.error.toString()})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Stack Trace:"}),e.jsxs("details",{style:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[e.jsx("summary",{children:"Klik untuk melihat detail"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",fontSize:"12px",marginTop:"5px",border:"1px solid #ccc"},children:this.state.errorInfo&&this.state.errorInfo.componentStack})]})]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",cursor:"pointer",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",fontSize:"16px"},children:"Muat Ulang Halaman"})]}):this.props.children}}const Fe=document.getElementById("root");Fe?wa(Fe).render(e.jsx(ee.StrictMode,{children:e.jsx(Ka,{children:e.jsx(ka,{})})})):console.error("Gagal menemukan elemen ID 'root' di index.html");
