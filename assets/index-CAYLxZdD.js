import{i as qe,g as We,a as Ge,r as u,o as Je,b as ae,c as W,j as e,U as te,C as we,M as Xe,X as se,L as Ve,d as Ye,s as Qe,e as Ze,u as ne,f as G,h as Se,k as ea,A as aa,l as Ce,F as ta,m as Fe,H as sa,K as na,B as la,S as ia,P as le,n as ue,T as me,p as ra,R as J,q as oa,t as da,I as ca,v as ua}from"./vendor-DTJzsa7g.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))m(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&m(h)}).observe(document,{childList:!0,subtree:!0});function o(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function m(i){if(i.ep)return;i.ep=!0;const c=o(i);fetch(i.href,c)}})();let ge;try{typeof __firebase_config<"u"?ge=JSON.parse(__firebase_config):ge={apiKey:"AIzaSyBwf0YITW6dueNHMtfD_d-fA0TcVhBT06c",authDomain:"rt-05-rw-09.firebaseapp.com",projectId:"rt-05-rw-09",storageBucket:"rt-05-rw-09.firebasestorage.app",messagingSenderId:"656172952610",appId:"1:656172952610:web:f6c98f827617589e73ae7b"}}catch(l){console.error("Error parsing firebase config",l)}const Te=qe(ge),T=We(Te),ie=Ge(Te),P=typeof __app_id<"u"?__app_id:"default-app-id",Ke=l=>new Promise((r,o)=>{const m=new FileReader;m.readAsDataURL(l),m.onload=i=>{var h;const c=new Image;c.src=(h=i.target)==null?void 0:h.result,c.onload=()=>{const b=document.createElement("canvas");let v=c.width,y=c.height;const N=800;v>y?v>N&&(y*=N/v,v=N):y>N&&(v*=N/y,y=N),b.width=v,b.height=y;const k=b.getContext("2d");if(!k){o(new Error("Canvas ctx error"));return}k.drawImage(c,0,0,v,y),r(b.toDataURL("image/jpeg",.6))},c.onerror=b=>o(b)},m.onerror=i=>o(i)}),Me=()=>new Date().toISOString().split("T")[0],_={nomorKK:"",alamat:"",statusHubungan:"Kepala Keluarga",nik:"",nama:"",tempatLahir:"",tanggalLahir:"",jenisKelamin:"Laki-laki",golDarah:"-",agama:"Islam",statusPerkawinan:"Belum Kawin",pendidikan:"SMA/Sederajat",pekerjaan:"",statusRumah:"Milik Sendiri",jenisBpjs:"Tidak Memiliki",hasMobil:!1,platMobil:"",hasMotor:!1,platMotor:"",isMoved:!1,alamatPindah:"",tanggalPindah:"",isPendatang:!1,catatan:"",files:[]},re={namaKegiatan:"",tanggal:"",deskripsi:"",keterangan:"",files:[]},oe={namaPelapor:"",deskripsi:"",status:"Menunggu",tanggapan:"",files:[],tanggalPengaduan:"",tanggalPenyelesaian:""};function ma(){const[l,r]=u.useState(null),[o,m]=u.useState("penduduk"),[i,c]=u.useState([]),[h,b]=u.useState([]),[v,y]=u.useState([]),[N,k]=u.useState(!1),[xe,X]=u.useState(!1),[f,pe]=u.useState("resident"),[E,fe]=u.useState(""),[H,he]=u.useState(""),[V,Re]=u.useState("Semua"),[B,ze]=u.useState(""),[O,be]=u.useState(null),[j,z]=u.useState("kk"),[De,Y]=u.useState(!1),[K,U]=u.useState({id:"",tanggapan:"",files:[]}),[Q,je]=u.useState(!1),[ve,Z]=u.useState(null),[x,p]=u.useState(_),[w,S]=u.useState(re),[D,A]=u.useState(oe);u.useEffect(()=>((async()=>{console.log("Memulai proses autentikasi...");try{typeof __initial_auth_token<"u"&&__initial_auth_token?(console.log("Login menggunakan Custom Token..."),await Qe(ie,__initial_auth_token)):(console.log("Login menggunakan Anonymous Auth..."),await Ze(ie)),console.log("Autentikasi berhasil!")}catch(a){console.error("Gagal Autentikasi:",a),alert("Gagal terhubung ke database. Coba refresh halaman.")}})(),Je(ie,r)),[]),u.useEffect(()=>{if(!l)return;console.log(`Mengambil data dari path: artifacts/${P}/public/data`);const t=ae(W(T,"artifacts",P,"public","data","residents"),n=>{const g=n.docs.map(d=>({id:d.id,...d.data(),files:d.data().files||[],catatan:d.data().catatan||""}));g.sort((d,L)=>{const ke=["Kepala Keluarga","Istri","Suami","Anak"];return ke.indexOf(d.statusHubungan)-ke.indexOf(L.statusHubungan)}),c(g)},n=>console.error("Err Residents:",n)),a=ae(W(T,"artifacts",P,"public","data","activities"),n=>{const g=n.docs.map(d=>({id:d.id,...d.data(),files:d.data().files||[]}));g.sort((d,L)=>new Date(L.tanggal).getTime()-new Date(d.tanggal).getTime()),b(g)},n=>console.error("Err Activities:",n)),s=ae(W(T,"artifacts",P,"public","data","complaints"),n=>{const g=n.docs.map(d=>({id:d.id,...d.data(),files:d.data().files||[],tanggalPengaduan:d.data().tanggalPengaduan||"",tanggalPenyelesaian:d.data().tanggalPenyelesaian||""}));y(g.sort((d,L)=>d.status==="Menunggu"&&L.status!=="Menunggu"?-1:d.status!=="Menunggu"&&L.status==="Menunggu"?1:0))},n=>console.error("Err Complaints:",n));return()=>{t(),a(),s()}},[l]);const F=u.useMemo(()=>{const t=i.filter(n=>!n.isMoved),a=i.filter(n=>n.isMoved),s=t.filter(n=>n.statusHubungan==="Kepala Keluarga");return{totalWarga:t.length,totalKK:s.length,totalPindah:a.length,totalPendatang:t.filter(n=>n.isPendatang).length,rumahMilik:s.filter(n=>n.statusRumah==="Milik Sendiri").length,rumahSewa:s.filter(n=>n.statusRumah==="Sewa/Kontrak").length,rumahMenumpang:s.filter(n=>n.statusRumah==="Menumpang").length}},[i]),Ie=async t=>{if(t.preventDefault(),!l)return alert("Sistem belum siap. Tunggu sebentar...");if(N)return;k(!0);let a="",s={};if(f==="resident"||f==="move"?(a="residents",s=x):f==="activity"?(a="activities",s=w):f==="complaint"&&(a="complaints",s=D,!Q&&!s.tanggalPengaduan&&(s.tanggalPengaduan=Me())),new Blob([JSON.stringify(s)]).size>9e5){alert("Ukuran data/foto terlalu besar. Mohon kurangi jumlah foto."),k(!1);return}try{const n=W(T,"artifacts",P,"public","data",a);Q&&ve?(await ne(G(n,ve),{...s,updatedAt:Se()}),alert("Data berhasil diperbarui!"),I()):(await ea(n,{...s,createdAt:Se()}),f==="resident"?confirm(`Data berhasil disimpan!

Klik OK untuk tambah anggota keluarga lain.
Klik Cancel untuk selesai.`)?p(d=>({..._,nomorKK:d.nomorKK,alamat:d.alamat,statusRumah:d.statusRumah,statusHubungan:"Anak",isPendatang:d.isPendatang})):I():(alert("Data berhasil disimpan!"),I()))}catch(n){console.error("Gagal Menyimpan:",n),alert(`Gagal menyimpan data.
Error: ${n.message}`)}finally{k(!1)}},$=async(t,a)=>{if(confirm("Yakin hapus data ini?"))try{await da(G(T,"artifacts",P,"public","data",t,a))}catch(s){alert("Gagal menghapus: "+s.message)}},ee=async t=>{const a=Array.from(t.target.files||[]),s=[];for(const n of a)try{const g=await Ke(n);s.push(g)}catch(g){console.error(g)}f==="resident"?p(n=>({...n,files:[...n.files,...s]})):f==="activity"?S(n=>({...n,files:[...n.files||[],...s]})):f==="complaint"&&A(n=>({...n,files:[...n.files||[],...s]})),t.target.value=""},Le=t=>{f==="resident"?p(a=>({...a,files:a.files.filter((s,n)=>n!==t)})):f==="activity"?S(a=>({...a,files:(a.files||[]).filter((s,n)=>n!==t)})):f==="complaint"&&A(a=>({...a,files:(a.files||[]).filter((s,n)=>n!==t)}))},_e=t=>{U({id:t,tanggapan:"",files:[]}),Y(!0)},Ee=async t=>{const a=Array.from(t.target.files||[]),s=[];for(const n of a)try{const g=await Ke(n);s.push(g)}catch(g){console.error(g)}U(n=>({...n,files:[...n.files,...s]})),t.target.value=""},He=async t=>{if(t.preventDefault(),!(!l||!K.id))try{const a=v.find(g=>g.id===K.id),n=[...(a==null?void 0:a.files)||[],...K.files];await ne(G(T,"artifacts",P,"public","data","complaints",K.id),{status:"Selesai",tanggapan:K.tanggapan,files:n,tanggalPenyelesaian:Me()}),Y(!1)}catch(a){console.error(a),alert("Gagal menyelesaikan pengaduan.")}},Be=async(t,a)=>{try{const s={status:a};a!=="Selesai"&&(s.tanggalPenyelesaian=""),await ne(G(T,"artifacts",P,"public","data","complaints",t),s)}catch(s){console.error(s),alert("Gagal update status")}},M=(t,a)=>{pe(t),k(!1),a?(je(!0),Z(a.id),t==="resident"&&p(a),t==="activity"&&S({...a,files:a.files||[]}),t==="complaint"&&A({...a,files:a.files||[]})):(je(!1),Z(null),t==="resident"&&p(_),t==="activity"&&S(re),t==="complaint"&&A(oe)),X(!0)},ye=t=>{p({...t,alamatPindah:"",tanggalPindah:""}),Z(t.id),pe("move"),X(!0)},I=()=>{X(!1),Y(!1),p(_),S(re),A(oe)},q=(t,a)=>e.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-2",children:t==null?void 0:t.map((s,n)=>e.jsxs("div",{className:"w-16 h-16 relative flex-shrink-0 group",children:[e.jsx("img",{src:s,className:"w-full h-full object-cover rounded border border-gray-200 cursor-pointer",onClick:()=>window.open(s)}),e.jsx("button",{type:"button",onClick:()=>a?a(n):Le(n),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 shadow transition",children:e.jsx(se,{size:12})})]},n))}),Ne=t=>!t||t.length===0?null:e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(ca,{size:12})," Lampiran (",t.length,")"]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:t.map((a,s)=>e.jsx("div",{className:"w-10 h-10 rounded border border-gray-200 overflow-hidden cursor-pointer hover:opacity-80",onClick:()=>window.open(a),children:e.jsx("img",{src:a,className:"w-full h-full object-cover"})},s))})]}),Oe=()=>{const t=i.filter(s=>B===""||s.nama.toLowerCase().includes(B.toLowerCase())||s.nomorKK.includes(B)?j==="kk"?s.statusHubungan==="Kepala Keluarga"&&!s.isMoved:j==="pindah"?s.isMoved:j==="datang"?s.isPendatang&&!s.isMoved:j==="milik"?s.statusHubungan==="Kepala Keluarga"&&!s.isMoved&&s.statusRumah==="Milik Sendiri":j==="sewa"?s.statusHubungan==="Kepala Keluarga"&&!s.isMoved&&s.statusRumah==="Sewa/Kontrak":j==="numpang"?s.statusHubungan==="Kepala Keluarga"&&!s.isMoved&&s.statusRumah==="Menumpang":!1:!1),a=s=>i.filter(n=>n.nomorKK===s);if(O){const s=a(O);return e.jsxs("div",{className:"animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("button",{onClick:()=>be(null),className:"p-2 bg-white border rounded-full",children:e.jsx(aa,{size:20})}),e.jsxs("h2",{className:"text-xl font-bold",children:["Detail Keluarga (KK: ",O,")"]}),e.jsxs("button",{onClick:()=>{const n=s.find(d=>d.statusHubungan==="Kepala Keluarga")||s[0],g={..._,nomorKK:O,alamat:(n==null?void 0:n.alamat)||"",isPendatang:n==null?void 0:n.isPendatang};M("resident"),p(g)},className:"ml-auto bg-green-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(Ce,{size:16})," Tambah Anggota"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(n=>e.jsx(Pe,{data:n,onEdit:()=>M("resident",n),onDelete:()=>$("residents",n.id),onMove:()=>ye(n)},n.id))})]})}return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[e.jsx(R,{icon:e.jsx(te,{}),label:"Total Warga",value:F.totalWarga,color:"bg-blue-600",active:!1,onClick:()=>{}}),e.jsx(R,{icon:e.jsx(ta,{}),label:"Kepala Keluarga",value:F.totalKK,color:"bg-indigo-500",active:j==="kk",onClick:()=>z("kk")}),e.jsx(R,{icon:e.jsx(Fe,{}),label:"Warga Pindah",value:F.totalPindah,color:"bg-red-500",active:j==="pindah",onClick:()=>z("pindah")}),e.jsx(R,{icon:e.jsx(Ce,{}),label:"Warga Datang",value:F.totalPendatang,color:"bg-green-500",active:j==="datang",onClick:()=>z("datang")})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-2",children:"FILTER STATUS RUMAH (KK)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(R,{icon:e.jsx(sa,{}),label:"Milik Sendiri",value:F.rumahMilik,color:"bg-emerald-600",active:j==="milik",onClick:()=>z("milik")}),e.jsx(R,{icon:e.jsx(na,{}),label:"Sewa",value:F.rumahSewa,color:"bg-orange-500",active:j==="sewa",onClick:()=>z("sewa")}),e.jsx(R,{icon:e.jsx(la,{}),label:"Menumpang",value:F.rumahMenumpang,color:"bg-purple-500",active:j==="numpang",onClick:()=>z("numpang")})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(ia,{className:"absolute left-3 top-2.5 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Cari Nama / KK...",value:B,onChange:s=>ze(s.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:()=>M("resident"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(le,{size:18})," Baru"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(s=>["kk","milik","sewa","numpang"].includes(j)?e.jsx(ga,{data:s,memberCount:a(s.nomorKK).length,onClick:()=>be(s.nomorKK)},s.id):e.jsx(Pe,{data:s,onEdit:()=>M("resident",s),onDelete:()=>$("residents",s.id),onMove:()=>ye(s)},s.id))})]})},Ue=()=>{const t=h.filter(a=>!(E&&a.tanggal<E||H&&a.tanggal>H));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Kegiatan RT"}),e.jsxs("button",{onClick:()=>M("activity"),className:"bg-purple-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(le,{size:18})," Tambah"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(we,{size:14,className:"inline"})," Periode:"]}),e.jsx("input",{type:"date",value:E,onChange:a=>fe(a.target.value),className:"border rounded text-sm px-1"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"date",value:H,onChange:a=>he(a.target.value),className:"border rounded text-sm px-1"}),(E||H)&&e.jsx("button",{onClick:()=>{fe(""),he("")},className:"text-xs text-red-500",children:"Reset"})]}),e.jsx("div",{className:"space-y-4",children:t.map(a=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-bold text-lg",children:a.namaKegiatan}),e.jsx("span",{className:"text-sm bg-purple-100 text-purple-700 px-2 py-1 rounded h-fit",children:a.tanggal})]}),e.jsx("p",{className:"text-gray-600 text-sm whitespace-pre-wrap",children:a.deskripsi}),a.keterangan&&e.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded border",children:a.keterangan}),Ne(a.files),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsxs("button",{onClick:()=>M("activity",a),className:"text-blue-600 text-sm flex items-center gap-1",children:[e.jsx(ue,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>$("activities",a.id),className:"text-red-600 text-sm flex items-center gap-1",children:[e.jsx(me,{size:14})," Hapus"]})]})]},a.id))})]})},$e=()=>{const t=v.filter(a=>!(V!=="Semua"&&a.status!==V));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Pengaduan"}),e.jsxs("button",{onClick:()=>M("complaint"),className:"bg-orange-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(le,{size:18})," Buat"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(ra,{size:14,className:"inline"})," Status:"]}),e.jsxs("select",{value:V,onChange:a=>Re(a.target.value),className:"border rounded text-sm px-2 py-1",children:[e.jsx("option",{value:"Semua",children:"Semua"}),e.jsx("option",{value:"Menunggu",children:"Menunggu"}),e.jsx("option",{value:"Proses",children:"Proses"}),e.jsx("option",{value:"Selesai",children:"Selesai"})]})]}),e.jsx("div",{className:"space-y-4",children:t.map(a=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-bold",children:a.namaPelapor}),e.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${a.status==="Selesai"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:a.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:a.deskripsi}),Ne(a.files),a.status==="Selesai"&&e.jsxs("div",{className:"bg-green-50 p-2 rounded text-xs text-green-800 border border-green-200",children:["âœ… ",a.tanggapan]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2 pt-2 border-t flex-wrap",children:[["Menunggu","Proses"].map(s=>e.jsx("button",{onClick:()=>Be(a.id,s),className:"text-xs border px-2 py-1 rounded hover:bg-gray-50",children:s},s)),e.jsx("button",{onClick:()=>_e(a.id),className:"text-xs border px-2 py-1 rounded hover:bg-green-50 text-green-700 font-bold",children:"Selesai"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{onClick:()=>M("complaint",a),className:"text-blue-500",children:e.jsx(ue,{size:16})}),e.jsx("button",{onClick:()=>$("complaints",a.id),className:"text-red-500",children:e.jsx(me,{size:16})})]})]})]},a.id))})]})};return e.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 font-sans",children:[e.jsxs("header",{className:"bg-white border-b sticky top-0 z-30 shadow-sm p-4",children:[e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 text-white p-2 rounded",children:e.jsx(te,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-sm leading-tight",children:"RT. 05 RW. 09 Buana Permai"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sistem Data"})]})]}),e.jsxs("div",{className:"flex mt-4 border-t pt-2 gap-4 overflow-x-auto",children:[e.jsx(de,{active:o==="penduduk",onClick:()=>m("penduduk"),icon:e.jsx(te,{size:16}),label:"Warga"}),e.jsx(de,{active:o==="kegiatan",onClick:()=>m("kegiatan"),icon:e.jsx(we,{size:16}),label:"Kegiatan"}),e.jsx(de,{active:o==="pengaduan",onClick:()=>m("pengaduan"),icon:e.jsx(Xe,{size:16}),label:"Aduan"})]})]}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-4",children:[o==="penduduk"&&Oe(),o==="kegiatan"&&Ue(),o==="pengaduan"&&$e()]}),xe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white w-full rounded-xl max-w-lg relative flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-xl sticky top-0 z-10",children:[e.jsxs("h2",{className:"font-bold text-lg capitalize",children:[Q?"Edit":"Tambah"," ",f]}),e.jsx("button",{onClick:I,children:e.jsx(se,{size:24,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:Ie,className:"p-4 overflow-y-auto space-y-4",children:[f==="resident"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{label:"NIK",value:x.nik,onChange:t=>p({...x,nik:t.target.value}),required:!0}),e.jsx(C,{label:"Nama Lengkap",value:x.nama,onChange:t=>p({...x,nama:t.target.value}),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(C,{label:"Tempat Lahir",value:x.tempatLahir,onChange:t=>p({...x,tempatLahir:t.target.value})}),e.jsx(C,{label:"Tgl Lahir",type:"date",value:x.tanggalLahir,onChange:t=>p({...x,tanggalLahir:t.target.value})})]}),e.jsx(ce,{label:"Jenis Kelamin",value:x.jenisKelamin,onChange:t=>p({...x,jenisKelamin:t.target.value}),options:["Laki-laki","Perempuan"]}),e.jsx(C,{label:"Nomor KK",value:x.nomorKK,onChange:t=>p({...x,nomorKK:t.target.value}),required:!0}),e.jsx(ce,{label:"Hubungan",value:x.statusHubungan,onChange:t=>p({...x,statusHubungan:t.target.value}),options:["Kepala Keluarga","Suami","Istri","Anak","Menantu","Orang Tua","Mertua","Famili Lain"]}),e.jsx(ce,{label:"Status Rumah",value:x.statusRumah,onChange:t=>p({...x,statusRumah:t.target.value}),options:["Milik Sendiri","Sewa/Kontrak","Menumpang"]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Dokumen"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ee,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(x.files)]})]}),f==="activity"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{label:"Nama Kegiatan",value:w.namaKegiatan,onChange:t=>S({...w,namaKegiatan:t.target.value}),required:!0}),e.jsx(C,{label:"Tanggal",type:"date",value:w.tanggal,onChange:t=>S({...w,tanggal:t.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:3,placeholder:"Deskripsi",value:w.deskripsi,onChange:t=>S({...w,deskripsi:t.target.value})}),e.jsx(C,{label:"Keterangan",value:w.keterangan,onChange:t=>S({...w,keterangan:t.target.value})}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ee,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(w.files)]})]}),f==="complaint"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{label:"Nama Pelapor",value:D.namaPelapor,onChange:t=>A({...D,namaPelapor:t.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:4,placeholder:"Isi Pengaduan...",value:D.deskripsi,onChange:t=>A({...D,deskripsi:t.target.value}),required:!0}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Bukti"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ee,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(D.files)]})]}),e.jsx("div",{className:"pt-4 border-t sticky bottom-0 bg-white",children:e.jsx("button",{type:"submit",disabled:N,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold shadow hover:bg-blue-700 disabled:bg-blue-300 flex justify-center items-center gap-2",children:N?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"animate-spin"})," Menyimpan..."]}):"SIMPAN DATA"})})]})]})}),De&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[e.jsx(Ye,{size:20})," Selesaikan Pengaduan"]}),e.jsx("button",{onClick:I,className:"text-gray-500 hover:text-red-500",children:e.jsx(se,{size:20})})]}),e.jsxs("form",{onSubmit:He,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catatan / Tanggapan Penyelesaian"}),e.jsx("textarea",{value:K.tanggapan,onChange:t=>U({...K,tanggapan:t.target.value}),placeholder:"Contoh: Masalah telah diperbaiki pada hari Senin...",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 resize-none",required:!0})]}),e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Bukti Foto Penyelesaian"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Ee,className:"text-sm w-full file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(K.files,t=>U(a=>({...a,files:a.files.filter((s,n)=>n!==t)})))]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 shadow-sm",children:"Simpan Selesai"})]})]})]})})]})}function de({active:l,onClick:r,icon:o,label:m}){return e.jsxs("button",{onClick:r,className:`flex items-center gap-1 px-3 py-2 text-sm font-medium border-b-2 transition ${l?"border-blue-600 text-blue-600":"border-transparent text-gray-500"}`,children:[o," ",m]})}function R({icon:l,label:r,value:o,color:m,active:i,onClick:c}){return e.jsxs("div",{onClick:c,className:`p-3 rounded-lg border flex items-center gap-3 cursor-pointer ${i?"ring-2 ring-blue-400 bg-blue-50":"bg-white"}`,children:[e.jsx("div",{className:`${m} text-white p-2 rounded shadow`,children:l}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:r}),e.jsx("p",{className:"text-xl font-bold",children:o})]})]})}function Pe({data:l,onEdit:r,onDelete:o,onMove:m}){return e.jsxs("div",{className:`p-4 rounded-xl border shadow-sm ${l.isMoved?"bg-red-50":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:e.jsx(oa,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold truncate",children:l.nama}),e.jsx("p",{className:"text-xs text-gray-500",children:l.statusHubungan})]})]}),l.isMoved&&e.jsx("span",{className:"text-[10px] bg-red-600 text-white px-2 py-0.5 rounded",children:"PINDAH"})]}),e.jsxs("div",{className:"mt-3 text-xs space-y-1 text-gray-600 border-t pt-2",children:[e.jsxs("p",{children:["NIK: ",l.nik]}),e.jsxs("p",{children:["TTL: ",l.tempatLahir,", ",l.tanggalLahir]}),e.jsxs("p",{children:["JK: ",l.jenisKelamin]})]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center pt-2 border-t",children:[!l.isMoved&&e.jsxs("button",{onClick:m,className:"text-orange-600 text-xs flex items-center gap-1",children:[e.jsx(Fe,{size:12})," Pindah"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("button",{onClick:r,className:"text-blue-600 bg-blue-50 p-1 rounded",children:e.jsx(ue,{size:16})}),e.jsx("button",{onClick:o,className:"text-red-600 bg-red-50 p-1 rounded",children:e.jsx(me,{size:16})})]})]})]})}function ga({data:l,memberCount:r,onClick:o}){return e.jsxs("div",{onClick:o,className:"p-4 rounded-xl border shadow-sm bg-white cursor-pointer hover:shadow-md flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-full font-bold",children:l.nama[0]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:l.nama}),e.jsxs("p",{className:"text-xs text-gray-500",children:["KK: ",l.nomorKK]})]})]}),e.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[r," Anggota"]})]})}function C({label:l,name:r,type:o="text",value:m,onChange:i,placeholder:c,required:h,disabled:b,className:v}){const y=J.useMemo(()=>`input-${r}-${Math.random().toString(36).substr(2,9)}`,[r]),N=k=>{if(o==="date"&&k.target.showPicker)try{k.target.showPicker()}catch{}};return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:y,className:"text-sm font-medium text-gray-700 mb-1 block",children:[l," ",h&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:y,type:o,name:r,value:m,onChange:i,onClick:o==="date"?k=>N(k):void 0,placeholder:c,required:h,disabled:b,className:`px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition w-full min-h-[42px] ${v}`})]})}function ce({label:l,name:r,value:o,onChange:m,options:i,required:c}){const h=J.useMemo(()=>`select-${r}-${Math.random().toString(36).substr(2,9)}`,[r]);return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:h,className:"text-sm font-medium text-gray-700 mb-1 block",children:[l," ",c&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{id:h,name:r,value:o,onChange:m,required:c,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white w-full min-h-[42px]",children:i.map(b=>e.jsx("option",{value:b,children:b},b))})]})}class xa extends J.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,o){console.error("Uncaught error:",r,o),this.setState({errorInfo:o})}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"#721c24",backgroundColor:"#f8d7da",fontFamily:"sans-serif",height:"100vh",boxSizing:"border-box"},children:[e.jsx("h2",{style:{borderBottom:"1px solid #f5c6cb",paddingBottom:"10px"},children:"Oops, terjadi kesalahan fatal."}),e.jsx("p",{children:"Aplikasi mengalami crash. Mohon screenshot pesan di bawah ini dan kirimkan ke pengembang:"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Error:"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",border:"1px solid #f5c6cb"},children:this.state.error&&this.state.error.toString()})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Stack Trace:"}),e.jsxs("details",{style:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[e.jsx("summary",{children:"Klik untuk melihat detail"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",fontSize:"12px",marginTop:"5px",border:"1px solid #ccc"},children:this.state.errorInfo&&this.state.errorInfo.componentStack})]})]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",cursor:"pointer",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",fontSize:"16px"},children:"Muat Ulang Halaman"})]}):this.props.children}}const Ae=document.getElementById("root");Ae?ua(Ae).render(e.jsx(J.StrictMode,{children:e.jsx(xa,{children:e.jsx(ma,{})})})):console.error("Gagal menemukan elemen ID 'root' di index.html");
