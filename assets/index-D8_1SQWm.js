import{i as sa,g as ta,a as la,r as g,o as na,b as xe,c as Q,j as e,U as Z,C as Pe,M as Ae,d as De,X as ee,e as Ee,H as ra,L as te,f as le,h as ia,k as Te,s as oa,l as da,u as ue,m as ae,n as ze,p as ca,q as xa,A as ua,P as ma,T as ga,t as pa,v as Le,F as ha,S as ba,w as me,x as be,y as fe,z as fa,R as ne,B as ja,D as Na,E as va,G as ya,I as wa,J as ka}from"./vendor-s1sEaKki.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&h(p)}).observe(document,{childList:!0,subtree:!0});function x(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function h(o){if(o.ep)return;o.ep=!0;const u=x(o);fetch(o.href,u)}})();let je;try{typeof __firebase_config<"u"?je=JSON.parse(__firebase_config):je={apiKey:"AIzaSyBwf0YITW6dueNHMtfD_d-fA0TcVhBT06c",authDomain:"rt-05-rw-09.firebaseapp.com",projectId:"rt-05-rw-09",storageBucket:"rt-05-rw-09.firebasestorage.app",messagingSenderId:"656172952610",appId:"1:656172952610:web:f6c98f827617589e73ae7b"}}catch(r){console.error("Error parsing firebase config",r)}const Be=sa(je),F=ta(Be),ge=la(Be),Fe=r=>new Promise((m,x)=>{const h=new FileReader;h.readAsDataURL(r),h.onload=o=>{var p;const u=new Image;u.src=(p=o.target)==null?void 0:p.result,u.onload=()=>{const j=document.createElement("canvas");let N=u.width,k=u.height;const y=800;N>k?N>y&&(k*=y/N,N=y):k>y&&(N*=y/k,k=y),j.width=N,j.height=k;const S=j.getContext("2d");if(!S){x(new Error("Canvas ctx error"));return}S.drawImage(u,0,0,N,k),m(j.toDataURL("image/jpeg",.7))},u.onerror=j=>x(j)},h.onerror=o=>x(o)}),Re=()=>new Date().toISOString().split("T")[0],I={nomorKK:"",alamat:"",statusHubungan:"Kepala Keluarga",isPendatang:!1,nik:"",nama:"",noHp:"",tempatLahir:"",tanggalLahir:"",jenisKelamin:"Laki-laki",golDarah:"-",agama:"Islam",statusPerkawinan:"Belum Kawin",pendidikan:"SMA/Sederajat",pekerjaan:"",statusRumah:"Milik Sendiri",jenisBpjs:"Tidak Memiliki",hasMobil:!1,platMobil:"",hasMotor:!1,platMotor:"",catatan:"",isMoved:!1,alamatPindah:"",tanggalPindah:"",isDeceased:!1,tanggalMeninggal:"",penyebabMeninggal:"",files:[]},pe={namaKegiatan:"",tanggal:"",deskripsi:"",keterangan:"",files:[]},he={namaPelapor:"",deskripsi:"",status:"Menunggu",tanggapan:"",files:[],tanggalPengaduan:"",tanggalPenyelesaian:""};function Ma(){const[r,m]=g.useState(null),[x,h]=g.useState("penduduk"),[o,u]=g.useState("summary"),[p,j]=g.useState([]),[N,k]=g.useState([]),[y,S]=g.useState([]),[B,O]=g.useState(!1),[Oe,_]=g.useState(!1),[b,re]=g.useState("resident"),[Ne,P]=g.useState(null),[W,ve]=g.useState(""),[$,ye]=g.useState(""),[ie,_e]=g.useState("Semua"),[U,We]=g.useState(""),[q,we]=g.useState(null),[f,C]=g.useState("kk"),[$e,oe]=g.useState(!1),[z,J]=g.useState({id:"",tanggapan:"",files:[]}),[de,ke]=g.useState(!1),[Me,G]=g.useState(null),[i,d]=g.useState(I),[K,A]=g.useState(pe),[R,L]=g.useState(he);g.useEffect(()=>((async()=>{try{typeof __initial_auth_token<"u"&&__initial_auth_token?await oa(ge,__initial_auth_token):await da(ge)}catch(s){console.error("Auth Error:",s)}})(),na(ge,m)),[]),g.useEffect(()=>{if(!r)return;const a=xe(Q(F,"residents"),t=>{const n=t.docs.map(c=>({id:c.id,...c.data(),files:c.data().files||[],catatan:c.data().catatan||""}));n.sort((c,M)=>{const V=["Kepala Keluarga","Istri","Suami","Anak"];return V.indexOf(c.statusHubungan)-V.indexOf(M.statusHubungan)}),j(n)},t=>console.error("Error Resident:",t)),s=xe(Q(F,"activities"),t=>{const n=t.docs.map(c=>({id:c.id,...c.data(),files:c.data().files||[]}));n.sort((c,M)=>new Date(M.tanggal).getTime()-new Date(c.tanggal).getTime()),k(n)},t=>console.error("Error Activity:",t)),l=xe(Q(F,"complaints"),t=>{const n=t.docs.map(c=>({id:c.id,...c.data(),files:c.data().files||[],resolutionFiles:c.data().resolutionFiles||[],tanggalPengaduan:c.data().tanggalPengaduan||"",tanggalPenyelesaian:c.data().tanggalPenyelesaian||""}));S(n.sort((c,M)=>c.status==="Menunggu"&&M.status!=="Menunggu"?-1:c.status!=="Menunggu"&&M.status==="Menunggu"?1:0))},t=>console.error("Error Complaint:",t));return()=>{a(),s(),l()}},[r]);const w=g.useMemo(()=>{const a=p.filter(n=>!n.isMoved&&!n.isDeceased),s=p.filter(n=>n.isMoved),l=p.filter(n=>n.isDeceased),t=a.filter(n=>n.statusHubungan==="Kepala Keluarga");return{totalWarga:a.length,totalKK:t.length,totalPindah:s.length,totalMeninggal:l.length,totalPendatang:a.filter(n=>n.isPendatang).length,rumahMilik:t.filter(n=>n.statusRumah==="Milik Sendiri").length,rumahSewa:t.filter(n=>n.statusRumah==="Sewa/Kontrak").length,rumahMenumpang:t.filter(n=>n.statusRumah==="Menumpang").length,totalMobil:a.filter(n=>n.hasMobil).length,totalMotor:a.filter(n=>n.hasMotor).length,lakiLaki:a.filter(n=>n.jenisKelamin==="Laki-laki").length,perempuan:a.filter(n=>n.jenisKelamin==="Perempuan").length}},[p]),Ue=g.useMemo(()=>{const a={};return p.filter(s=>!s.isMoved&&!s.isDeceased).forEach(s=>{a[s.nomorKK]||(a[s.nomorKK]=[]),a[s.nomorKK].push(s)}),Object.keys(a).forEach(s=>{a[s].sort((l,t)=>{const n=["Kepala Keluarga","Suami","Istri","Anak","Menantu","Orang Tua","Mertua","Famili Lain"],c=n.indexOf(l.statusHubungan),M=n.indexOf(t.statusHubungan);return(c===-1?99:c)-(M===-1?99:M)})}),a},[p]),qe=async a=>{if(a.preventDefault(),!r)return alert("Sistem belum siap.");if(B)return;O(!0);let s="",l={};if(b==="resident"||b==="move"||b==="death"?(s="residents",l=i):b==="activity"?(s="activities",l=K):b==="complaint"&&(s="complaints",l=R,!de&&!l.tanggalPengaduan&&(l.tanggalPengaduan=Re())),new Blob([JSON.stringify(l)]).size>9e5){alert("Ukuran data/foto terlalu besar. Mohon kurangi jumlah foto."),O(!1);return}try{const t=Q(F,s);de&&Me?(await ue(ae(t,Me),{...l,updatedAt:ze()}),alert("Data berhasil diperbarui!"),H()):(await ca(t,{...l,createdAt:ze()}),b==="resident"?confirm(`Data berhasil disimpan!

Klik OK untuk tambah anggota keluarga lain.
Klik Cancel untuk selesai.`)?d(c=>({...I,nomorKK:c.nomorKK,alamat:c.alamat,statusRumah:c.statusRumah,statusHubungan:"Anak",isPendatang:c.isPendatang})):H():(alert("Data berhasil disimpan!"),H()))}catch(t){console.error("Gagal Menyimpan:",t),alert(`Gagal menyimpan data.
Error: ${t.message}`)}finally{O(!1)}},X=async(a,s)=>{if(confirm("Yakin hapus data ini secara permanen?"))try{await ya(ae(F,a,s))}catch(l){alert("Gagal menghapus: "+l.message)}},ce=async a=>{const s=Array.from(a.target.files||[]),l=[];for(const t of s)try{const n=await Fe(t);l.push(n)}catch(n){console.error(n)}b==="resident"?d(t=>({...t,files:[...t.files,...l]})):b==="activity"?A(t=>({...t,files:[...t.files||[],...l]})):b==="complaint"&&L(t=>({...t,files:[...t.files||[],...l]})),a.target.value=""},Je=a=>{b==="resident"?d(s=>({...s,files:s.files.filter((l,t)=>t!==a)})):b==="activity"?A(s=>({...s,files:(s.files||[]).filter((l,t)=>t!==a)})):b==="complaint"&&L(s=>({...s,files:(s.files||[]).filter((l,t)=>t!==a)}))},Ge=a=>{J({id:a,tanggapan:"",files:[]}),oe(!0)},Xe=async a=>{const s=Array.from(a.target.files||[]),l=[];for(const t of s)try{const n=await Fe(t);l.push(n)}catch(n){console.error(n)}J(t=>({...t,files:[...t.files,...l]})),a.target.value=""},Ye=async a=>{if(a.preventDefault(),!(!r||!z.id))try{await ue(ae(F,"complaints",z.id),{status:"Selesai",tanggapan:z.tanggapan,resolutionFiles:z.files,tanggalPenyelesaian:Re()}),oe(!1)}catch(s){console.error(s),alert("Gagal menyelesaikan pengaduan.")}},Ve=async(a,s)=>{const l=y.find(t=>t.id===a);if((l==null?void 0:l.status)==="Selesai")return alert("Pengaduan yang sudah selesai tidak dapat diubah statusnya lagi.");try{const t={status:s};s!=="Selesai"&&(t.tanggalPenyelesaian=""),await ue(ae(F,"complaints",a),t)}catch(t){console.error(t),alert("Gagal update status")}},D=(a,s)=>{re(a),O(!1),s?(ke(!0),G(s.id),a==="resident"&&d(s),a==="activity"&&A({...s,files:s.files||[]}),a==="complaint"&&L({...s,files:s.files||[]})):(ke(!1),G(null),a==="resident"&&d(I),a==="activity"&&A(pe),a==="complaint"&&L(he)),_(!0)},Ce=a=>{d({...a,alamatPindah:"",tanggalPindah:""}),G(a.id),re("move"),_(!0)},Ke=a=>{d({...a,isDeceased:!0,tanggalMeninggal:"",penyebabMeninggal:""}),G(a.id),re("death"),_(!0)},H=()=>{_(!1),oe(!1),d(I),A(pe),L(he)},Y=(a,s)=>e.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-2",children:a==null?void 0:a.map((l,t)=>e.jsxs("div",{className:"w-16 h-16 relative flex-shrink-0 group",children:[e.jsx("img",{src:l,className:"w-full h-full object-cover rounded border border-gray-200 cursor-pointer",onClick:()=>P(l)}),e.jsx("button",{type:"button",onClick:n=>{n.stopPropagation(),s?s(t):Je(t)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 shadow transition",children:e.jsx(ee,{size:12})})]},t))}),Se=a=>!a||a.length===0?null:e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(wa,{size:12})," Lampiran (",a.length,")"]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:a.map((s,l)=>e.jsx("div",{className:"w-10 h-10 rounded border border-gray-200 overflow-hidden cursor-pointer hover:opacity-80",onClick:()=>P(s),children:e.jsx("img",{src:s,className:"w-full h-full object-cover"})},l))})]}),Qe=()=>{let a="Laporan Ringkasan";return o==="warga"&&(a="Laporan Detail Data Warga"),o==="kegiatan"&&(a="Laporan Kegiatan & Dokumentasi"),o==="aduan"&&(a="Laporan & Status Pengaduan Warga"),e.jsxs("div",{className:"pb-20 bg-white p-6 rounded-xl border shadow-sm print:shadow-none print:border-none print:p-0 print:w-full",children:[e.jsxs("div",{className:"hidden print:flex flex-col items-center justify-center mb-8 border-b-2 border-gray-800 pb-4",children:[e.jsx("h1",{className:"text-2xl font-bold uppercase",children:"RT. 05 RW. 09 PERUMAHAN BUANA PERMAI"}),e.jsx("h2",{className:"text-lg font-medium",children:"Kelurahan Cipondoh, Kecamatan Cipondoh, Kota Tangerang"}),e.jsx("h3",{className:"text-xl font-bold mt-4 uppercase underline",children:a}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Dicetak pada: ",new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 print:hidden gap-4",children:[e.jsx("div",{className:"flex gap-2 bg-slate-100 p-1 rounded-lg overflow-x-auto w-full sm:w-auto",children:[{id:"summary",label:"Ringkasan",icon:e.jsx(De,{size:16})},{id:"warga",label:"Data Warga",icon:e.jsx(xa,{size:16})},{id:"kegiatan",label:"Kegiatan",icon:e.jsx(ua,{size:16})},{id:"aduan",label:"Pengaduan",icon:e.jsx(Ae,{size:16})}].map(s=>e.jsxs("button",{onClick:()=>u(s.id),className:`px-3 py-2 rounded-md text-sm font-medium flex items-center gap-2 transition ${o===s.id?"bg-white shadow text-blue-600":"text-slate-500 hover:bg-slate-200"}`,children:[s.icon," ",s.label]},s.id))}),e.jsxs("button",{onClick:()=>window.print(),className:"bg-slate-800 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-slate-700 shadow w-full sm:w-auto justify-center",children:[e.jsx(ma,{size:18})," Cetak Laporan"]})]}),e.jsxs("div",{className:"space-y-8 min-h-[50vh]",children:[o==="summary"&&e.jsxs("section",{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Total Warga"}),e.jsxs("p",{className:"text-2xl font-bold",children:[w.totalWarga," ",e.jsx("span",{className:"text-sm font-normal",children:"Jiwa"})]})]}),e.jsxs("div",{className:"p-4 bg-indigo-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Kepala Keluarga"}),e.jsxs("p",{className:"text-2xl font-bold",children:[w.totalKK," ",e.jsx("span",{className:"text-sm font-normal",children:"KK"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Pendatang"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:[w.totalPendatang," ",e.jsx("span",{className:"text-sm font-normal text-black",children:"Jiwa"})]})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Warga Meninggal"}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[w.totalMeninggal," ",e.jsx("span",{className:"text-sm font-normal text-black",children:"Jiwa"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("h4",{className:"font-bold border-b pb-2 mb-2",children:"Statistik Kendaraan & Hunian"}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{children:"Mobil"}),e.jsxs("span",{className:"font-bold",children:[w.totalMobil," Unit"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{children:"Motor"}),e.jsxs("span",{className:"font-bold",children:[w.totalMotor," Unit"]})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{children:"Status Rumah"}),e.jsxs("span",{className:"text-xs font-bold bg-gray-100 p-1 rounded",children:["Milik: ",w.rumahMilik," | Sewa: ",w.rumahSewa," | Menumpang: ",w.rumahMenumpang]})]})]}),e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("h4",{className:"font-bold border-b pb-2 mb-2",children:"Statistik Aduan"}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{children:"Selesai"}),e.jsx("span",{className:"font-bold text-green-600",children:y.filter(s=>s.status==="Selesai").length})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{children:"Dalam Proses"}),e.jsx("span",{className:"font-bold text-yellow-600",children:y.filter(s=>s.status!=="Selesai").length})]})]})]})]}),o==="warga"&&e.jsx("section",{className:"space-y-6",children:Object.entries(Ue).map(([s,l])=>{const t=l.find(n=>n.statusHubungan==="Kepala Keluarga")||l[0];return e.jsxs("div",{className:"border rounded-lg overflow-hidden break-inside-avoid page-break-after-auto mb-6 border-slate-300 shadow-sm print:shadow-none",children:[e.jsxs("div",{className:"bg-slate-100 p-4 border-b border-slate-300 flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-lg text-slate-800",children:[t.nama," ",e.jsxs("span",{className:"text-sm font-normal text-slate-600",children:["(",t.statusHubungan,")"]})]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["No. KK: ",e.jsx("span",{className:"font-mono font-bold text-slate-900",children:s})]})]}),e.jsxs("div",{className:"text-left sm:text-right mt-2 sm:mt-0",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-bold",children:"Alamat:"})," ",t.alamat]}),t.noHp&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-bold",children:"HP (Kepala):"})," ",t.noHp]})]})]}),e.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[e.jsx("thead",{className:"bg-slate-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left w-8",children:"No"}),e.jsx("th",{className:"p-2 text-left",children:"Nama / NIK / HP"}),e.jsx("th",{className:"p-2 text-left",children:"L/P & TTL"}),e.jsx("th",{className:"p-2 text-left",children:"Status/Pekerjaan"}),e.jsx("th",{className:"p-2 text-center",children:"Hubungan"}),e.jsx("th",{className:"p-2 text-center w-40",children:"Foto"})]})}),e.jsx("tbody",{className:"divide-y",children:l.map((n,c)=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-2 text-center",children:c+1}),e.jsxs("td",{className:"p-2",children:[e.jsx("div",{className:"font-bold",children:n.nama}),e.jsx("div",{className:"text-slate-500 text-xs",children:n.nik}),n.noHp&&e.jsxs("div",{className:"text-slate-500 text-[10px] mt-0.5",children:["ðŸ“ž ",n.noHp]})]}),e.jsxs("td",{className:"p-2",children:[n.jenisKelamin==="Laki-laki"?"L":"P",", ",n.tempatLahir,e.jsx("div",{className:"text-slate-500 text-xs",children:n.tanggalLahir})]}),e.jsxs("td",{className:"p-2",children:[e.jsx("div",{children:n.statusPerkawinan}),e.jsx("div",{className:"text-slate-500 text-xs",children:n.pekerjaan})]}),e.jsx("td",{className:"p-2 text-center",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${n.statusHubungan==="Kepala Keluarga"?"bg-blue-100 text-blue-700 font-bold":"bg-slate-100"}`,children:n.statusHubungan})}),e.jsx("td",{className:"p-2 text-center",children:n.files&&n.files.length>0?e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:n.files.map((M,V)=>e.jsx("img",{src:M,className:"w-40 h-40 object-cover border rounded shadow-sm print:w-40 print:h-40 cursor-pointer",onClick:()=>P(M)},V))}):"-"})]},n.id))})]})]},s)})}),o==="kegiatan"&&e.jsxs("section",{children:[N.length===0&&e.jsx("p",{className:"text-center italic text-gray-500",children:"Tidak ada data kegiatan."}),e.jsx("div",{className:"space-y-6",children:N.map((s,l)=>e.jsx("div",{className:"border-b-2 border-slate-100 pb-6 break-inside-avoid",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-slate-800 text-white w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-full font-bold",children:l+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-lg text-slate-800",children:s.namaKegiatan}),e.jsx("span",{className:"text-sm font-mono text-slate-500 bg-slate-100 px-2 py-1 rounded w-fit",children:s.tanggal})]}),e.jsx("p",{className:"text-slate-700 text-sm whitespace-pre-wrap mb-3 text-justify",children:s.deskripsi}),s.keterangan&&e.jsxs("div",{className:"text-xs bg-yellow-50 border border-yellow-200 p-2 rounded text-yellow-800 mb-3 inline-block",children:[e.jsx("strong",{children:"Catatan:"})," ",s.keterangan]}),s.files&&s.files.length>0&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2",children:s.files.map((t,n)=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("img",{src:t,className:"w-full h-64 object-cover rounded-lg border shadow-sm cursor-pointer hover:opacity-95",onClick:()=>P(t)}),e.jsxs("span",{className:"text-[10px] text-center text-slate-400",children:["Dokumentasi ",n+1]})]},n))})]})]})},s.id))})]}),o==="aduan"&&e.jsx("section",{children:e.jsx("div",{className:"space-y-6",children:y.map((s,l)=>e.jsxs("div",{className:"border border-slate-200 rounded-xl p-5 break-inside-avoid bg-white shadow-sm print:shadow-none",children:[e.jsxs("div",{className:"flex justify-between items-start border-b border-slate-100 pb-3 mb-4",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-bold text-lg text-slate-800 block",children:["Laporan #",l+1,": ",s.namaPelapor]}),e.jsxs("span",{className:"text-xs text-slate-500",children:["Tanggal Masuk: ",s.tanggalPengaduan]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${s.status==="Selesai"?"bg-green-100 text-green-700 border-green-200":s.status==="Proses"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-red-100 text-red-700 border-red-200"}`,children:s.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("p",{className:"text-sm font-bold text-red-700 mb-2 flex items-center gap-2",children:[e.jsx(ga,{size:16})," MASALAH / KELUHAN"]}),e.jsx("div",{className:"text-sm text-slate-700 bg-red-50 p-4 rounded-lg border border-red-100 flex-1 mb-3",children:s.deskripsi}),s.files&&s.files.length>0?e.jsxs("div",{className:"mt-auto",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 block mb-2",children:"FOTO BUKTI AWAL:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.files.map((t,n)=>e.jsx("img",{src:t,className:"w-full h-48 object-cover border rounded-lg shadow-sm cursor-pointer hover:opacity-90",onClick:()=>P(t)},n))})]}):e.jsx("p",{className:"text-xs text-slate-400 italic text-center p-4 border border-dashed rounded",children:"Tidak ada foto bukti awal."})]}),e.jsxs("div",{className:"flex flex-col h-full border-l pl-0 md:pl-8 border-slate-100",children:[e.jsxs("p",{className:"text-sm font-bold text-green-700 mb-2 flex items-center gap-2",children:[e.jsx(Te,{size:16})," PENYELESAIAN / TINDAK LANJUT"]}),s.tanggapan?e.jsxs("div",{className:"mb-3 flex-1",children:[e.jsx("div",{className:"text-sm text-slate-700 bg-green-50 p-4 rounded-lg border border-green-100 mb-2",children:s.tanggapan}),e.jsxs("p",{className:"text-xs text-green-700 font-mono text-right",children:["Diselesaikan: ",s.tanggalPenyelesaian]})]}):e.jsx("p",{className:"text-sm text-slate-400 italic bg-slate-50 p-4 rounded-lg mb-3 flex-1",children:"Belum ada data penyelesaian."}),s.resolutionFiles&&s.resolutionFiles.length>0?e.jsxs("div",{className:"mt-auto",children:[e.jsx("span",{className:"text-xs font-bold text-green-600 block mb-2",children:"FOTO HASIL PENYELESAIAN:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.resolutionFiles.map((t,n)=>e.jsx("img",{src:t,className:"w-full h-48 object-cover border rounded-lg shadow-sm cursor-pointer hover:opacity-90",onClick:()=>P(t)},n))})]}):e.jsx("p",{className:"text-xs text-slate-400 italic text-center p-4 border border-dashed rounded mt-auto",children:"Tidak ada foto penyelesaian."})]})]})]},s.id))})}),e.jsx("div",{className:"hidden print:flex justify-end mt-12 pt-8 break-inside-avoid",children:e.jsxs("div",{className:"text-center w-64",children:[e.jsxs("p",{className:"mb-24",children:["Mengetahui,",e.jsx("br",{}),"Ketua RT. 05 RW. 09"]}),e.jsx("p",{className:"font-bold underline",children:"( ....................................... )"})]})})]})]})},Ze=()=>{const a=p.filter(l=>U===""||l.nama.toLowerCase().includes(U.toLowerCase())||l.nomorKK.includes(U)?f==="kk"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved&&!l.isDeceased:f==="pindah"?l.isMoved:f==="meninggal"?l.isDeceased:f==="datang"?l.isPendatang&&!l.isMoved&&!l.isDeceased:f==="milik"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved&&l.statusRumah==="Milik Sendiri":f==="sewa"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved&&l.statusRumah==="Sewa/Kontrak":f==="numpang"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved&&l.statusRumah==="Menumpang":!1:!1),s=l=>p.filter(t=>t.nomorKK===l);if(q){const l=s(q);return e.jsxs("div",{className:"animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("button",{onClick:()=>we(null),className:"p-2 bg-white border rounded-full",children:e.jsx(pa,{size:20})}),e.jsxs("h2",{className:"text-xl font-bold",children:["Detail Keluarga (KK: ",q,")"]}),e.jsxs("button",{onClick:()=>{const t=l.find(c=>c.statusHubungan==="Kepala Keluarga")||l[0],n={...I,nomorKK:q,alamat:(t==null?void 0:t.alamat)||"",isPendatang:t==null?void 0:t.isPendatang};D("resident"),d(n)},className:"ml-auto bg-green-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(Le,{size:16})," Tambah Anggota"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(t=>e.jsx(He,{data:t,onEdit:()=>D("resident",t),onDelete:()=>X("residents",t.id),onMove:()=>Ce(t),onDeath:()=>Ke(t),onPreview:n=>P(n)},t.id))})]})}return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 mb-6",children:[e.jsx(E,{icon:e.jsx(Z,{}),label:"Total Warga",value:w.totalWarga,color:"bg-blue-600",active:!1,onClick:()=>{}}),e.jsx(E,{icon:e.jsx(ha,{}),label:"Kepala Keluarga",value:w.totalKK,color:"bg-indigo-500",active:f==="kk",onClick:()=>C("kk")}),e.jsx(E,{icon:e.jsx(Le,{}),label:"Pendatang",value:w.totalPendatang,color:"bg-green-600",active:f==="datang",onClick:()=>C("datang")}),e.jsx(E,{icon:e.jsx(te,{}),label:"Warga Pindah",value:w.totalPindah,color:"bg-orange-500",active:f==="pindah",onClick:()=>C("pindah")}),e.jsx(E,{icon:e.jsx(le,{}),label:"Meninggal",value:w.totalMeninggal,color:"bg-red-600",active:f==="meninggal",onClick:()=>C("meninggal")})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4",children:[e.jsx("button",{onClick:()=>C("kk"),className:`px-3 py-1 rounded text-xs border ${f==="kk"?"bg-slate-800 text-white":"bg-white"}`,children:"Semua KK"}),e.jsx("button",{onClick:()=>C("datang"),className:`px-3 py-1 rounded text-xs border ${f==="datang"?"bg-green-600 text-white":"bg-white"}`,children:"Pendatang"}),e.jsx("button",{onClick:()=>C("milik"),className:`px-3 py-1 rounded text-xs border ${f==="milik"?"bg-emerald-600 text-white":"bg-white"}`,children:"Rumah Milik"}),e.jsx("button",{onClick:()=>C("sewa"),className:`px-3 py-1 rounded text-xs border ${f==="sewa"?"bg-orange-500 text-white":"bg-white"}`,children:"Sewa/Kontrak"}),e.jsx("button",{onClick:()=>C("numpang"),className:`px-3 py-1 rounded text-xs border ${f==="numpang"?"bg-purple-500 text-white":"bg-white"}`,children:"Menumpang"}),e.jsx("button",{onClick:()=>C("meninggal"),className:`px-3 py-1 rounded text-xs border ${f==="meninggal"?"bg-red-600 text-white":"bg-white"}`,children:"Arsip Meninggal"})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(ba,{className:"absolute left-3 top-2.5 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Cari Nama / KK...",value:U,onChange:l=>We(l.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:()=>D("resident"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(me,{size:18})," Baru"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(l=>["kk","milik","sewa","numpang"].includes(f)?e.jsx(Ca,{data:l,memberCount:s(l.nomorKK).length,onClick:()=>we(l.nomorKK)},l.id):e.jsx(He,{data:l,onEdit:()=>D("resident",l),onDelete:()=>X("residents",l.id),onMove:()=>Ce(l),onDeath:()=>Ke(l),onPreview:t=>P(t)},l.id))})]})},ea=()=>{const a=N.filter(s=>!(W&&s.tanggal<W||$&&s.tanggal>$));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Kegiatan RT"}),e.jsxs("button",{onClick:()=>D("activity"),className:"bg-purple-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(me,{size:18})," Tambah"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(Pe,{size:14,className:"inline"})," Periode:"]}),e.jsx("input",{type:"date",value:W,onChange:s=>ve(s.target.value),className:"border rounded text-sm px-1"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"date",value:$,onChange:s=>ye(s.target.value),className:"border rounded text-sm px-1"}),(W||$)&&e.jsx("button",{onClick:()=>{ve(""),ye("")},className:"text-xs text-red-500",children:"Reset"})]}),e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-bold text-lg",children:s.namaKegiatan}),e.jsx("span",{className:"text-sm bg-purple-100 text-purple-700 px-2 py-1 rounded h-fit",children:s.tanggal})]}),e.jsx("p",{className:"text-gray-600 text-sm whitespace-pre-wrap",children:s.deskripsi}),s.keterangan&&e.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded border",children:s.keterangan}),Se(s.files),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsxs("button",{onClick:()=>D("activity",s),className:"text-blue-600 text-sm flex items-center gap-1",children:[e.jsx(be,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>X("activities",s.id),className:"text-red-600 text-sm flex items-center gap-1",children:[e.jsx(fe,{size:14})," Hapus"]})]})]},s.id))})]})},aa=()=>{const a=y.filter(s=>!(ie!=="Semua"&&s.status!==ie));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Pengaduan"}),e.jsxs("button",{onClick:()=>D("complaint"),className:"bg-orange-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(me,{size:18})," Buat"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(fa,{size:14,className:"inline"})," Status:"]}),e.jsxs("select",{value:ie,onChange:s=>_e(s.target.value),className:"border rounded text-sm px-2 py-1",children:[e.jsx("option",{value:"Semua",children:"Semua"}),e.jsx("option",{value:"Menunggu",children:"Menunggu"}),e.jsx("option",{value:"Proses",children:"Proses"}),e.jsx("option",{value:"Selesai",children:"Selesai"})]})]}),e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-bold",children:s.namaPelapor}),e.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${s.status==="Selesai"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:s.deskripsi}),Se(s.files),s.status==="Selesai"&&e.jsxs("div",{className:"bg-green-50 p-2 rounded text-xs text-green-800 border border-green-200",children:["âœ… ",s.tanggapan]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2 pt-2 border-t flex-wrap",children:[["Menunggu","Proses"].map(l=>e.jsx("button",{onClick:()=>Ve(s.id,l),className:"text-xs border px-2 py-1 rounded hover:bg-gray-50",children:l},l)),e.jsx("button",{onClick:()=>Ge(s.id),className:"text-xs border px-2 py-1 rounded hover:bg-green-50 text-green-700 font-bold",children:"Selesai"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{onClick:()=>D("complaint",s),className:"text-blue-500",children:e.jsx(be,{size:16})}),e.jsx("button",{onClick:()=>X("complaints",s.id),className:"text-red-500",children:e.jsx(fe,{size:16})})]})]})]},s.id))})]})};return e.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 font-sans",children:[e.jsxs("header",{className:"bg-white border-b sticky top-0 z-30 shadow-sm p-4 print:hidden",children:[e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 text-white p-2 rounded",children:e.jsx(Z,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-sm leading-tight",children:"RT. 05 RW. 09 Buana Permai"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sistem Data"})]})]}),e.jsxs("div",{className:"flex mt-4 border-t pt-2 gap-4 overflow-x-auto",children:[e.jsx(se,{active:x==="penduduk",onClick:()=>h("penduduk"),icon:e.jsx(Z,{size:16}),label:"Warga"}),e.jsx(se,{active:x==="kegiatan",onClick:()=>h("kegiatan"),icon:e.jsx(Pe,{size:16}),label:"Kegiatan"}),e.jsx(se,{active:x==="pengaduan",onClick:()=>h("pengaduan"),icon:e.jsx(Ae,{size:16}),label:"Aduan"}),e.jsx(se,{active:x==="laporan",onClick:()=>h("laporan"),icon:e.jsx(De,{size:16}),label:"Laporan"})]})]}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-4",children:[x==="penduduk"&&Ze(),x==="kegiatan"&&ea(),x==="pengaduan"&&aa(),x==="laporan"&&Qe()]}),Ne&&e.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4 cursor-pointer print:hidden",onClick:()=>P(null),children:[e.jsx("img",{src:Ne,className:"max-w-full max-h-full rounded shadow-lg object-contain"}),e.jsx("button",{className:"absolute top-4 right-4 text-white bg-black/50 rounded-full p-2 hover:bg-black/70 transition",children:e.jsx(ee,{size:24})})]}),Oe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto print:hidden",children:e.jsxs("div",{className:"bg-white w-full rounded-xl max-w-lg relative flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-xl sticky top-0 z-10",children:[e.jsxs("h2",{className:"font-bold text-lg capitalize",children:[de?"Edit":"Tambah"," ",b]}),e.jsx("button",{onClick:H,children:e.jsx(ee,{size:24,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:qe,className:"p-4 overflow-y-auto space-y-6",children:[b==="resident"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(Ee,{size:18})," Data Pribadi"]}),e.jsx(v,{label:"NIK",value:i.nik,onChange:a=>d({...i,nik:a.target.value}),required:!0}),e.jsx(v,{label:"Nama Lengkap",value:i.nama,onChange:a=>d({...i,nama:a.target.value}),required:!0}),e.jsx(v,{label:"No Handphone (WA)",value:i.noHp,onChange:a=>d({...i,noHp:a.target.value})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(v,{label:"Tempat Lahir",value:i.tempatLahir,onChange:a=>d({...i,tempatLahir:a.target.value})}),e.jsx(v,{label:"Tgl Lahir",type:"date",value:i.tanggalLahir,onChange:a=>d({...i,tanggalLahir:a.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(T,{label:"Jenis Kelamin",value:i.jenisKelamin,onChange:a=>d({...i,jenisKelamin:a.target.value}),options:["Laki-laki","Perempuan"]}),e.jsx(T,{label:"Gol. Darah",value:i.golDarah,onChange:a=>d({...i,golDarah:a.target.value}),options:["-","A","B","AB","O"]})]}),e.jsx(T,{label:"Agama",value:i.agama,onChange:a=>d({...i,agama:a.target.value}),options:["Islam","Kristen","Katolik","Hindu","Buddha","Konghucu"]}),e.jsx(T,{label:"Pendidikan Terakhir",value:i.pendidikan,onChange:a=>d({...i,pendidikan:a.target.value}),options:["Tidak/Belum Sekolah","SD/Sederajat","SMP/Sederajat","SMA/Sederajat","D1","D2","D3","S1","S2","S3"]}),e.jsx(v,{label:"Pekerjaan",value:i.pekerjaan,onChange:a=>d({...i,pekerjaan:a.target.value})}),e.jsx(T,{label:"Status Kawin",value:i.statusPerkawinan,onChange:a=>d({...i,statusPerkawinan:a.target.value}),options:["Belum Kawin","Kawin","Cerai Hidup","Cerai Mati"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(Z,{size:18})," Data Keluarga"]}),e.jsx(v,{label:"Nomor KK",value:i.nomorKK,onChange:a=>d({...i,nomorKK:a.target.value}),required:!0}),e.jsx(T,{label:"Hubungan",value:i.statusHubungan,onChange:a=>d({...i,statusHubungan:a.target.value}),options:["Kepala Keluarga","Suami","Istri","Anak","Menantu","Orang Tua","Mertua","Famili Lain"]}),e.jsx(v,{label:"Alamat Domisili",value:i.alamat,onChange:a=>d({...i,alamat:a.target.value})}),e.jsxs("div",{className:"flex items-center gap-2 bg-green-50 p-3 rounded border border-green-200",children:[e.jsx("input",{type:"checkbox",checked:i.isPendatang,onChange:a=>d({...i,isPendatang:a.target.checked}),className:"w-5 h-5 text-green-600 rounded"}),e.jsx("label",{className:"text-sm font-medium text-green-800",children:"Warga Pendatang (Baru Masuk)"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(ra,{size:18})," Aset & Kepemilikan"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(T,{label:"Status Rumah",value:i.statusRumah,onChange:a=>d({...i,statusRumah:a.target.value}),options:["Milik Sendiri","Sewa/Kontrak","Menumpang"]}),e.jsx(T,{label:"BPJS",value:i.jenisBpjs,onChange:a=>d({...i,jenisBpjs:a.target.value}),options:["Tidak Memiliki","BPJS Mandiri","BPJS Kantor","BPJS PBI"]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded border border-slate-200 space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Kendaraan"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i.hasMobil,onChange:a=>d({...i,hasMobil:a.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm w-16",children:"Mobil"}),e.jsx("input",{type:"text",disabled:!i.hasMobil,value:i.platMobil,onChange:a=>d({...i,platMobil:a.target.value}),placeholder:"Plat Nomor",className:"flex-1 border rounded px-2 py-1 text-sm disabled:bg-slate-100"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i.hasMotor,onChange:a=>d({...i,hasMotor:a.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm w-16",children:"Motor"}),e.jsx("input",{type:"text",disabled:!i.hasMotor,value:i.platMotor,onChange:a=>d({...i,platMotor:a.target.value}),placeholder:"Plat Nomor",className:"flex-1 border rounded px-2 py-1 text-sm disabled:bg-slate-100"})]})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Catatan Tambahan"}),e.jsx("textarea",{value:i.catatan,onChange:a=>d({...i,catatan:a.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Contoh: Sakit menahun, butuh bantuan, dll."})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Dokumen"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ce,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Y(i.files)]})]})]}),b==="move"&&e.jsxs("div",{className:"space-y-4 bg-orange-50 p-4 rounded border border-orange-200",children:[e.jsxs("div",{className:"flex gap-2 text-orange-800 text-sm mb-2",children:[e.jsx(te,{size:16})," ",e.jsx("p",{children:"Form Lapor Pindah Warga"})]}),e.jsx(v,{label:"Tanggal Pindah",type:"date",value:i.tanggalPindah,onChange:a=>d({...i,tanggalPindah:a.target.value}),required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Alamat Pindah"}),e.jsx("textarea",{className:"w-full border rounded-lg p-2 focus:ring-2 focus:ring-blue-500",rows:3,value:i.alamatPindah,onChange:a=>d({...i,alamatPindah:a.target.value}),required:!0})]})]}),b==="death"&&e.jsxs("div",{className:"space-y-4 bg-red-50 p-4 rounded border border-red-200",children:[e.jsxs("div",{className:"flex gap-2 text-red-800 text-sm mb-2",children:[e.jsx(le,{size:16})," ",e.jsx("p",{children:"Form Lapor Warga Meninggal"})]}),e.jsx(v,{label:"Tanggal Meninggal",type:"date",value:i.tanggalMeninggal,onChange:a=>d({...i,tanggalMeninggal:a.target.value}),required:!0}),e.jsx(v,{label:"Penyebab Meninggal",value:i.penyebabMeninggal,onChange:a=>d({...i,penyebabMeninggal:a.target.value}),required:!0})]}),b==="activity"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{label:"Nama Kegiatan",value:K.namaKegiatan,onChange:a=>A({...K,namaKegiatan:a.target.value}),required:!0}),e.jsx(v,{label:"Tanggal",type:"date",value:K.tanggal,onChange:a=>A({...K,tanggal:a.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:3,placeholder:"Deskripsi",value:K.deskripsi,onChange:a=>A({...K,deskripsi:a.target.value})}),e.jsx(v,{label:"Keterangan",value:K.keterangan,onChange:a=>A({...K,keterangan:a.target.value})}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ce,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Y(K.files)]})]}),b==="complaint"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{label:"Nama Pelapor",value:R.namaPelapor,onChange:a=>L({...R,namaPelapor:a.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:4,placeholder:"Isi Pengaduan...",value:R.deskripsi,onChange:a=>L({...R,deskripsi:a.target.value}),required:!0}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Bukti"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ce,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Y(R.files)]})]}),e.jsx("div",{className:"pt-4 border-t sticky bottom-0 bg-white",children:e.jsx("button",{type:"submit",disabled:B,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold shadow hover:bg-blue-700 disabled:bg-blue-300 flex justify-center items-center gap-2",children:B?e.jsxs(e.Fragment,{children:[e.jsx(ia,{className:"animate-spin"})," Menyimpan..."]}):"SIMPAN DATA"})})]})]})}),$e&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 print:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[e.jsx(Te,{size:20})," Selesaikan Pengaduan"]}),e.jsx("button",{onClick:H,className:"text-gray-500 hover:text-red-500",children:e.jsx(ee,{size:20})})]}),e.jsxs("form",{onSubmit:Ye,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catatan / Tanggapan Penyelesaian"}),e.jsx("textarea",{value:z.tanggapan,onChange:a=>J({...z,tanggapan:a.target.value}),placeholder:"Contoh: Masalah telah diperbaiki pada hari Senin...",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 resize-none",required:!0})]}),e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Bukti Foto Penyelesaian"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Xe,className:"text-sm w-full file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),Y(z.files,a=>J(s=>({...s,files:s.files.filter((l,t)=>t!==a)})))]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 shadow-sm",children:"Simpan Selesai"})]})]})]})})]})}function se({active:r,onClick:m,icon:x,label:h}){return e.jsxs("button",{onClick:m,className:`flex items-center gap-1 px-3 py-2 text-sm font-medium border-b-2 transition ${r?"border-blue-600 text-blue-600":"border-transparent text-gray-500"}`,children:[x," ",h]})}function E({icon:r,label:m,value:x,color:h,active:o,onClick:u}){return e.jsxs("div",{onClick:u,className:`p-3 rounded-lg border flex items-center gap-3 cursor-pointer ${o?"ring-2 ring-blue-400 bg-blue-50":"bg-white"}`,children:[e.jsx("div",{className:`${h} text-white p-2 rounded shadow`,children:r}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:m}),e.jsx("p",{className:"text-xl font-bold",children:x})]})]})}function He({data:r,onEdit:m,onDelete:x,onMove:h,onDeath:o,onPreview:u}){const p=r.statusHubungan==="Kepala Keluarga";return e.jsxs("div",{className:`p-4 rounded-xl border shadow-sm ${r.isMoved?"bg-orange-50":r.isDeceased?"bg-red-50":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center border",children:r.files&&r.files.length>0?e.jsx("img",{src:r.files[0],className:"w-full h-full object-cover cursor-pointer",onClick:()=>u(r.files[0])}):e.jsx(Ee,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold truncate",children:r.nama}),e.jsx("p",{className:"text-xs text-gray-500",children:r.statusHubungan})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.isMoved&&e.jsx("span",{className:"text-[10px] bg-orange-600 text-white px-2 py-0.5 rounded",children:"PINDAH"}),r.isDeceased&&e.jsx("span",{className:"text-[10px] bg-red-600 text-white px-2 py-0.5 rounded",children:"MENINGGAL"}),r.isPendatang&&!r.isMoved&&!r.isDeceased&&e.jsx("span",{className:"text-[10px] bg-green-600 text-white px-2 py-0.5 rounded",children:"PENDATANG"})]})]}),e.jsxs("div",{className:"mt-3 text-xs space-y-1 text-gray-600 border-t pt-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"NIK:"})," ",r.nik]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"KK:"})," ",r.nomorKK]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"JK:"})," ",r.jenisKelamin]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Gol.D:"})," ",r.golDarah]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Agama:"})," ",r.agama]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Status:"})," ",r.statusPerkawinan]})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Pekerjaan:"})," ",r.pekerjaan]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Alamat:"})," ",r.alamat]}),r.noHp&&e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"HP:"})," ",r.noHp]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[r.hasMobil&&e.jsxs("span",{className:"text-[10px] bg-orange-100 text-orange-700 px-1 rounded flex items-center gap-1",children:[e.jsx(ja,{size:10})," ",r.platMobil]}),r.hasMotor&&e.jsxs("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1 rounded flex items-center gap-1",children:[e.jsx(Na,{size:10})," ",r.platMotor]})]}),r.files&&r.files.length>0&&e.jsx("div",{className:"flex gap-1 mt-2 overflow-x-auto pt-1",children:r.files.map((j,N)=>e.jsx("img",{src:j,className:"w-8 h-8 rounded object-cover border cursor-pointer hover:opacity-80",onClick:()=>u(j)},N))})]}),r.catatan&&e.jsxs("div",{className:"bg-yellow-50 p-2 rounded text-yellow-800 text-[10px] sm:text-xs mt-2 border border-yellow-100 flex gap-1 items-start",children:[e.jsx(va,{size:12,className:"mt-0.5 flex-shrink-0"})," ",e.jsx("span",{children:r.catatan})]}),p&&!r.isMoved&&!r.isDeceased&&e.jsx("div",{className:"flex justify-between border-t pt-2 mt-2",children:e.jsxs("span",{className:"text-gray-500 text-[10px]",children:["Rumah: ",r.statusRumah]})}),r.isMoved&&e.jsxs("div",{className:"bg-orange-100 p-2 rounded text-orange-700 mt-2 text-xs",children:[e.jsxs("span",{className:"font-bold flex items-center gap-1",children:[e.jsx(te,{size:10})," Pindah ke:"]}),r.alamatPindah," (",r.tanggalPindah,")"]}),r.isDeceased&&e.jsxs("div",{className:"bg-red-100 p-2 rounded text-red-700 mt-2 text-xs",children:[e.jsxs("span",{className:"font-bold flex items-center gap-1",children:[e.jsx(le,{size:10})," Meninggal:"]})," ",r.tanggalMeninggal," (",r.penyebabMeninggal,")"]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center pt-2 border-t",children:[!r.isMoved&&!r.isDeceased&&e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:h,className:"text-orange-600 text-xs flex items-center gap-1 border border-orange-200 px-2 py-1 rounded hover:bg-orange-50",children:[e.jsx(te,{size:12})," Pindah"]}),e.jsxs("button",{onClick:o,className:"text-red-600 text-xs flex items-center gap-1 border border-red-200 px-2 py-1 rounded hover:bg-red-50",children:[e.jsx(le,{size:12})," Meninggal"]})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("button",{onClick:m,className:"text-blue-600 bg-blue-50 p-1 rounded",children:e.jsx(be,{size:16})}),e.jsx("button",{onClick:x,className:"text-red-600 bg-red-50 p-1 rounded",children:e.jsx(fe,{size:16})})]})]})]})}function Ca({data:r,memberCount:m,onClick:x}){return e.jsxs("div",{onClick:x,className:"p-4 rounded-xl border shadow-sm bg-white cursor-pointer hover:shadow-md flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-full font-bold w-10 h-10 flex items-center justify-center overflow-hidden",children:r.files&&r.files.length>0?e.jsx("img",{src:r.files[0],className:"w-full h-full object-cover"}):r.nama[0]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:r.nama}),e.jsxs("p",{className:"text-xs text-gray-500",children:["KK: ",r.nomorKK]})]})]}),e.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[m," Anggota"]})]})}function v({label:r,name:m,type:x="text",value:h,onChange:o,placeholder:u,required:p,disabled:j,className:N}){const k=ne.useMemo(()=>`input-${m}-${Math.random().toString(36).substr(2,9)}`,[m]),y=S=>{if(x==="date"&&S.target.showPicker)try{S.target.showPicker()}catch{}};return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:k,className:"text-sm font-medium text-gray-700 mb-1 block",children:[r," ",p&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:k,type:x,name:m,value:h,onChange:o,onClick:x==="date"?S=>y(S):void 0,placeholder:u,required:p,disabled:j,className:`px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition w-full min-h-[42px] ${N}`})]})}function T({label:r,name:m,value:x,onChange:h,options:o,required:u}){const p=ne.useMemo(()=>`select-${m}-${Math.random().toString(36).substr(2,9)}`,[m]);return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:p,className:"text-sm font-medium text-gray-700 mb-1 block",children:[r," ",u&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{id:p,name:m,value:x,onChange:h,required:u,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white w-full min-h-[42px]",children:o.map(j=>e.jsx("option",{value:j,children:j},j))})]})}class Ka extends ne.Component{constructor(m){super(m),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(m){return{hasError:!0,error:m}}componentDidCatch(m,x){console.error("Uncaught error:",m,x),this.setState({errorInfo:x})}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"#721c24",backgroundColor:"#f8d7da",fontFamily:"sans-serif",height:"100vh",boxSizing:"border-box"},children:[e.jsx("h2",{style:{borderBottom:"1px solid #f5c6cb",paddingBottom:"10px"},children:"Oops, terjadi kesalahan fatal."}),e.jsx("p",{children:"Aplikasi mengalami crash. Mohon screenshot pesan di bawah ini dan kirimkan ke pengembang:"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Error:"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",border:"1px solid #f5c6cb"},children:this.state.error&&this.state.error.toString()})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Stack Trace:"}),e.jsxs("details",{style:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[e.jsx("summary",{children:"Klik untuk melihat detail"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",fontSize:"12px",marginTop:"5px",border:"1px solid #ccc"},children:this.state.errorInfo&&this.state.errorInfo.componentStack})]})]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",cursor:"pointer",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",fontSize:"16px"},children:"Muat Ulang Halaman"})]}):this.props.children}}const Ie=document.getElementById("root");Ie?ka(Ie).render(e.jsx(ne.StrictMode,{children:e.jsx(Ka,{children:e.jsx(Ma,{})})})):console.error("Gagal menemukan elemen ID 'root' di index.html");
