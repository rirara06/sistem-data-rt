import{i as qe,g as We,a as Ge,r as u,s as $e,o as Xe,b as ee,c as W,j as e,U as ae,C as ve,M as Je,X as te,L as Ve,d as Ye,u as se,e as G,f as ye,h as Qe,A as Ze,k as Ne,F as ea,l as Me,H as aa,K as ta,B as sa,S as na,P as ne,m as de,T as ce,n as la,p as ia,q as ra,I as oa,R as Pe,t as da}from"./vendor-xYtEPhlP.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))m(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const w of d.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&m(w)}).observe(document,{childList:!0,subtree:!0});function o(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function m(l){if(l.ep)return;l.ep=!0;const d=o(l);fetch(l.href,d)}})();const ca={apiKey:"AIzaSyBwf0YITW6dueNHMtfD_d-fA0TcVhBT06c",authDomain:"rt-05-rw-09.firebaseapp.com",projectId:"rt-05-rw-09",storageBucket:"rt-05-rw-09.firebasestorage.app",messagingSenderId:"656172952610",appId:"1:656172952610:web:f6c98f827617589e73ae7b"},Ae=qe(ca),F=We(Ae),ke=Ge(Ae),T=typeof __app_id<"u"?__app_id:"default-app-id",we=i=>new Promise((c,o)=>{const m=new FileReader;m.readAsDataURL(i),m.onload=l=>{var w;const d=new Image;d.src=(w=l.target)==null?void 0:w.result,d.onload=()=>{const S=document.createElement("canvas");let b=d.width,y=d.height;const j=800;b>y?b>j&&(y*=j/b,b=j):y>j&&(b*=j/y,y=j),S.width=b,S.height=y;const M=S.getContext("2d");if(!M){o(new Error("Canvas ctx error"));return}M.drawImage(d,0,0,b,y),c(S.toDataURL("image/jpeg",.6))},d.onerror=S=>o(S)},m.onerror=l=>o(l)}),Se=()=>new Date().toISOString().split("T")[0],E={nomorKK:"",alamat:"",statusHubungan:"Kepala Keluarga",nik:"",nama:"",tempatLahir:"",tanggalLahir:"",jenisKelamin:"Laki-laki",golDarah:"-",agama:"Islam",statusPerkawinan:"Belum Kawin",pendidikan:"SMA/Sederajat",pekerjaan:"",statusRumah:"Milik Sendiri",jenisBpjs:"Tidak Memiliki",hasMobil:!1,platMobil:"",hasMotor:!1,platMotor:"",isMoved:!1,alamatPindah:"",tanggalPindah:"",isPendatang:!1,catatan:"",files:[]},le={namaKegiatan:"",tanggal:"",deskripsi:"",keterangan:"",files:[]},ie={namaPelapor:"",deskripsi:"",status:"Menunggu",tanggapan:"",files:[],tanggalPengaduan:"",tanggalPenyelesaian:""};function ua(){const[i,c]=u.useState(null),[o,m]=u.useState("penduduk"),[l,d]=u.useState([]),[w,S]=u.useState([]),[b,y]=u.useState([]),[j,M]=u.useState(!1),[Fe,$]=u.useState(!1),[f,ue]=u.useState("resident"),[H,me]=u.useState(""),[B,ge]=u.useState(""),[X,Te]=u.useState("Semua"),[O,De]=u.useState(""),[U,xe]=u.useState(null),[h,R]=u.useState("kk"),[Re,J]=u.useState(!1),[C,V]=u.useState({id:"",tanggapan:"",files:[]}),[Y,pe]=u.useState(!1),[fe,Q]=u.useState(null),[x,p]=u.useState(E),[v,N]=u.useState(le),[z,P]=u.useState(ie);u.useEffect(()=>($e(ke).catch(a=>{console.error("Auth Error:",a),alert("Gagal Login ke Sistem Database. Periksa koneksi internet Anda.")}),Xe(ke,c)),[]),u.useEffect(()=>{if(!i)return;const a=ee(W(F,"artifacts",T,"public","data","residents"),n=>{const g=n.docs.map(r=>({id:r.id,...r.data(),files:r.data().files||[],catatan:r.data().catatan||""}));g.sort((r,L)=>{const je=["Kepala Keluarga","Istri","Suami","Anak"];return je.indexOf(r.statusHubungan)-je.indexOf(L.statusHubungan)}),d(g)},n=>console.error("Err Residents:",n)),t=ee(W(F,"artifacts",T,"public","data","activities"),n=>{const g=n.docs.map(r=>({id:r.id,...r.data(),files:r.data().files||[]}));g.sort((r,L)=>new Date(L.tanggal).getTime()-new Date(r.tanggal).getTime()),S(g)},n=>console.error("Err Activities:",n)),s=ee(W(F,"artifacts",T,"public","data","complaints"),n=>{const g=n.docs.map(r=>({id:r.id,...r.data(),files:r.data().files||[],tanggalPengaduan:r.data().tanggalPengaduan||"",tanggalPenyelesaian:r.data().tanggalPenyelesaian||""}));y(g.sort((r,L)=>r.status==="Menunggu"&&L.status!=="Menunggu"?-1:r.status!=="Menunggu"&&L.status==="Menunggu"?1:0))},n=>console.error("Err Complaints:",n));return()=>{a(),t(),s()}},[i]);const A=u.useMemo(()=>{const a=l.filter(n=>!n.isMoved),t=l.filter(n=>n.isMoved),s=a.filter(n=>n.statusHubungan==="Kepala Keluarga");return{totalWarga:a.length,totalKK:s.length,totalPindah:t.length,totalPendatang:a.filter(n=>n.isPendatang).length,rumahMilik:s.filter(n=>n.statusRumah==="Milik Sendiri").length,rumahSewa:s.filter(n=>n.statusRumah==="Sewa/Kontrak").length,rumahMenumpang:s.filter(n=>n.statusRumah==="Menumpang").length}},[l]),ze=async a=>{if(a.preventDefault(),!i)return alert("Sistem belum siap.");if(j)return;M(!0);let t="",s={};if(f==="resident"||f==="move"?(t="residents",s=x):f==="activity"?(t="activities",s=v):f==="complaint"&&(t="complaints",s=z,!Y&&!s.tanggalPengaduan&&(s.tanggalPengaduan=Se())),new Blob([JSON.stringify(s)]).size>9e5){alert("Ukuran data/foto terlalu besar. Mohon kurangi jumlah foto."),M(!1);return}try{const n=W(F,"artifacts",T,"public","data",t);Y&&fe?(await se(G(n,fe),{...s,updatedAt:ye()}),alert("Data berhasil diperbarui!"),I()):(await Qe(n,{...s,createdAt:ye()}),f==="resident"?confirm(`Data berhasil disimpan!

Klik OK untuk tambah anggota keluarga lain.
Klik Cancel untuk selesai.`)?p(r=>({...E,nomorKK:r.nomorKK,alamat:r.alamat,statusRumah:r.statusRumah,statusHubungan:"Anak",isPendatang:r.isPendatang})):I():(alert("Data berhasil disimpan!"),I()))}catch(n){console.error("Gagal Menyimpan:",n),alert(`Gagal menyimpan data.
Error: ${n.message}`)}finally{M(!1)}},_=async(a,t)=>{if(confirm("Yakin hapus data ini?"))try{await ra(G(F,"artifacts",T,"public","data",a,t))}catch(s){alert("Gagal menghapus: "+s.message)}},Z=async a=>{const t=Array.from(a.target.files||[]),s=[];for(const n of t)try{const g=await we(n);s.push(g)}catch(g){console.error(g)}f==="resident"?p(n=>({...n,files:[...n.files,...s]})):f==="activity"?N(n=>({...n,files:[...n.files||[],...s]})):f==="complaint"&&P(n=>({...n,files:[...n.files||[],...s]})),a.target.value=""},Ie=a=>{f==="resident"?p(t=>({...t,files:t.files.filter((s,n)=>n!==a)})):f==="activity"?N(t=>({...t,files:(t.files||[]).filter((s,n)=>n!==a)})):f==="complaint"&&P(t=>({...t,files:(t.files||[]).filter((s,n)=>n!==a)}))},Le=a=>{V({id:a,tanggapan:"",files:[]}),J(!0)},Ee=async a=>{const t=Array.from(a.target.files||[]),s=[];for(const n of t)try{const g=await we(n);s.push(g)}catch(g){console.error(g)}V(n=>({...n,files:[...n.files,...s]})),a.target.value=""},He=async a=>{if(a.preventDefault(),!(!i||!C.id))try{const t=b.find(g=>g.id===C.id),n=[...(t==null?void 0:t.files)||[],...C.files];await se(G(F,"artifacts",T,"public","data","complaints",C.id),{status:"Selesai",tanggapan:C.tanggapan,files:n,tanggalPenyelesaian:Se()}),J(!1)}catch(t){console.error(t),alert("Gagal menyelesaikan pengaduan.")}},Be=async(a,t)=>{try{const s={status:t};t!=="Selesai"&&(s.tanggalPenyelesaian=""),await se(G(F,"artifacts",T,"public","data","complaints",a),s)}catch(s){console.error(s),alert("Gagal update status")}},K=(a,t)=>{ue(a),M(!1),t?(pe(!0),Q(t.id),a==="resident"&&p(t),a==="activity"&&N({...t,files:t.files||[]}),a==="complaint"&&P({...t,files:t.files||[]})):(pe(!1),Q(null),a==="resident"&&p(E),a==="activity"&&N(le),a==="complaint"&&P(ie)),$(!0)},he=a=>{p({...a,alamatPindah:"",tanggalPindah:""}),Q(a.id),ue("move"),$(!0)},I=()=>{$(!1),J(!1),p(E),N(le),P(ie)},q=a=>e.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-2",children:a==null?void 0:a.map((t,s)=>e.jsxs("div",{className:"w-16 h-16 relative flex-shrink-0 group",children:[e.jsx("img",{src:t,className:"w-full h-full object-cover rounded border border-gray-200"}),e.jsx("button",{type:"button",onClick:()=>Ie(s),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 shadow",children:e.jsx(te,{size:12})})]},s))}),be=a=>!a||a.length===0?null:e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(oa,{size:12})," Lampiran (",a.length,")"]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:a.map((t,s)=>e.jsx("div",{className:"w-10 h-10 rounded border border-gray-200 overflow-hidden cursor-pointer hover:opacity-80",onClick:()=>window.open(t),children:e.jsx("img",{src:t,className:"w-full h-full object-cover"})},s))})]}),Oe=()=>{const a=l.filter(s=>O===""||s.nama.toLowerCase().includes(O.toLowerCase())||s.nomorKK.includes(O)?h==="kk"?s.statusHubungan==="Kepala Keluarga"&&!s.isMoved:h==="pindah"?s.isMoved:h==="datang"?s.isPendatang&&!s.isMoved:h==="milik"?s.statusHubungan==="Kepala Keluarga"&&!s.isMoved&&s.statusRumah==="Milik Sendiri":h==="sewa"?s.statusHubungan==="Kepala Keluarga"&&!s.isMoved&&s.statusRumah==="Sewa/Kontrak":h==="numpang"?s.statusHubungan==="Kepala Keluarga"&&!s.isMoved&&s.statusRumah==="Menumpang":!1:!1),t=s=>l.filter(n=>n.nomorKK===s);if(U){const s=t(U);return e.jsxs("div",{className:"animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("button",{onClick:()=>xe(null),className:"p-2 bg-white border rounded-full",children:e.jsx(Ze,{size:20})}),e.jsxs("h2",{className:"text-xl font-bold",children:["Detail Keluarga (KK: ",U,")"]}),e.jsxs("button",{onClick:()=>{const n=s.find(r=>r.statusHubungan==="Kepala Keluarga")||s[0],g={...E,nomorKK:U,alamat:(n==null?void 0:n.alamat)||"",isPendatang:n==null?void 0:n.isPendatang};K("resident"),p(g)},className:"ml-auto bg-green-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(Ne,{size:16})," Tambah Anggota"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(n=>e.jsx(Ce,{data:n,onEdit:()=>K("resident",n),onDelete:()=>_("residents",n.id),onMove:()=>he(n)},n.id))})]})}return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[e.jsx(D,{icon:e.jsx(ae,{}),label:"Total Warga",value:A.totalWarga,color:"bg-blue-600",active:!1,onClick:()=>{}}),e.jsx(D,{icon:e.jsx(ea,{}),label:"Kepala Keluarga",value:A.totalKK,color:"bg-indigo-500",active:h==="kk",onClick:()=>R("kk")}),e.jsx(D,{icon:e.jsx(Me,{}),label:"Warga Pindah",value:A.totalPindah,color:"bg-red-500",active:h==="pindah",onClick:()=>R("pindah")}),e.jsx(D,{icon:e.jsx(Ne,{}),label:"Warga Datang",value:A.totalPendatang,color:"bg-green-500",active:h==="datang",onClick:()=>R("datang")})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-2",children:"FILTER STATUS RUMAH (KK)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(D,{icon:e.jsx(aa,{}),label:"Milik Sendiri",value:A.rumahMilik,color:"bg-emerald-600",active:h==="milik",onClick:()=>R("milik")}),e.jsx(D,{icon:e.jsx(ta,{}),label:"Sewa",value:A.rumahSewa,color:"bg-orange-500",active:h==="sewa",onClick:()=>R("sewa")}),e.jsx(D,{icon:e.jsx(sa,{}),label:"Menumpang",value:A.rumahMenumpang,color:"bg-purple-500",active:h==="numpang",onClick:()=>R("numpang")})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(na,{className:"absolute left-3 top-2.5 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Cari Nama / KK...",value:O,onChange:s=>De(s.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:()=>K("resident"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(ne,{size:18})," Baru"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(s=>["kk","milik","sewa","numpang"].includes(h)?e.jsx(ma,{data:s,memberCount:t(s.nomorKK).length,onClick:()=>xe(s.nomorKK)},s.id):e.jsx(Ce,{data:s,onEdit:()=>K("resident",s),onDelete:()=>_("residents",s.id),onMove:()=>he(s)},s.id))})]})},Ue=()=>{const a=w.filter(t=>!(H&&t.tanggal<H||B&&t.tanggal>B));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Kegiatan RT"}),e.jsxs("button",{onClick:()=>K("activity"),className:"bg-purple-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(ne,{size:18})," Tambah"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(ve,{size:14,className:"inline"})," Periode:"]}),e.jsx("input",{type:"date",value:H,onChange:t=>me(t.target.value),className:"border rounded text-sm px-1"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"date",value:B,onChange:t=>ge(t.target.value),className:"border rounded text-sm px-1"}),(H||B)&&e.jsx("button",{onClick:()=>{me(""),ge("")},className:"text-xs text-red-500",children:"Reset"})]}),e.jsx("div",{className:"space-y-4",children:a.map(t=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-bold text-lg",children:t.namaKegiatan}),e.jsx("span",{className:"text-sm bg-purple-100 text-purple-700 px-2 py-1 rounded h-fit",children:t.tanggal})]}),e.jsx("p",{className:"text-gray-600 text-sm whitespace-pre-wrap",children:t.deskripsi}),t.keterangan&&e.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded border",children:t.keterangan}),be(t.files),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsxs("button",{onClick:()=>K("activity",t),className:"text-blue-600 text-sm flex items-center gap-1",children:[e.jsx(de,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>_("activities",t.id),className:"text-red-600 text-sm flex items-center gap-1",children:[e.jsx(ce,{size:14})," Hapus"]})]})]},t.id))})]})},_e=()=>{const a=b.filter(t=>!(X!=="Semua"&&t.status!==X));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Pengaduan"}),e.jsxs("button",{onClick:()=>K("complaint"),className:"bg-orange-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(ne,{size:18})," Buat"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(la,{size:14,className:"inline"})," Status:"]}),e.jsxs("select",{value:X,onChange:t=>Te(t.target.value),className:"border rounded text-sm px-2 py-1",children:[e.jsx("option",{value:"Semua",children:"Semua"}),e.jsx("option",{value:"Menunggu",children:"Menunggu"}),e.jsx("option",{value:"Proses",children:"Proses"}),e.jsx("option",{value:"Selesai",children:"Selesai"})]})]}),e.jsx("div",{className:"space-y-4",children:a.map(t=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-bold",children:t.namaPelapor}),e.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${t.status==="Selesai"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:t.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:t.deskripsi}),be(t.files),t.status==="Selesai"&&e.jsxs("div",{className:"bg-green-50 p-2 rounded text-xs text-green-800 border border-green-200",children:["âœ… ",t.tanggapan]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2 pt-2 border-t flex-wrap",children:[["Menunggu","Proses"].map(s=>e.jsx("button",{onClick:()=>Be(t.id,s),className:"text-xs border px-2 py-1 rounded hover:bg-gray-50",children:s},s)),e.jsx("button",{onClick:()=>Le(t.id),className:"text-xs border px-2 py-1 rounded hover:bg-green-50 text-green-700 font-bold",children:"Selesai"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{onClick:()=>K("complaint",t),className:"text-blue-500",children:e.jsx(de,{size:16})}),e.jsx("button",{onClick:()=>_("complaints",t.id),className:"text-red-500",children:e.jsx(ce,{size:16})})]})]})]},t.id))})]})};return e.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 font-sans",children:[e.jsxs("header",{className:"bg-white border-b sticky top-0 z-30 shadow-sm p-4",children:[e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 text-white p-2 rounded",children:e.jsx(ae,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-sm leading-tight",children:"RT. 05 RW. 09 Buana Permai"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sistem Data"})]})]}),e.jsxs("div",{className:"flex mt-4 border-t pt-2 gap-4 overflow-x-auto",children:[e.jsx(re,{active:o==="penduduk",onClick:()=>m("penduduk"),icon:e.jsx(ae,{size:16}),label:"Warga"}),e.jsx(re,{active:o==="kegiatan",onClick:()=>m("kegiatan"),icon:e.jsx(ve,{size:16}),label:"Kegiatan"}),e.jsx(re,{active:o==="pengaduan",onClick:()=>m("pengaduan"),icon:e.jsx(Je,{size:16}),label:"Aduan"})]})]}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-4",children:[o==="penduduk"&&Oe(),o==="kegiatan"&&Ue(),o==="pengaduan"&&_e()]}),Fe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white w-full rounded-xl max-w-lg relative flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-xl sticky top-0 z-10",children:[e.jsxs("h2",{className:"font-bold text-lg capitalize",children:[Y?"Edit":"Tambah"," ",f]}),e.jsx("button",{onClick:I,children:e.jsx(te,{size:24,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:ze,className:"p-4 overflow-y-auto space-y-4",children:[f==="resident"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"NIK",value:x.nik,onChange:a=>p({...x,nik:a.target.value}),required:!0}),e.jsx(k,{label:"Nama Lengkap",value:x.nama,onChange:a=>p({...x,nama:a.target.value}),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(k,{label:"Tempat Lahir",value:x.tempatLahir,onChange:a=>p({...x,tempatLahir:a.target.value})}),e.jsx(k,{label:"Tgl Lahir",type:"date",value:x.tanggalLahir,onChange:a=>p({...x,tanggalLahir:a.target.value})})]}),e.jsx(oe,{label:"Jenis Kelamin",value:x.jenisKelamin,onChange:a=>p({...x,jenisKelamin:a.target.value}),options:["Laki-laki","Perempuan"]}),e.jsx(k,{label:"Nomor KK",value:x.nomorKK,onChange:a=>p({...x,nomorKK:a.target.value}),required:!0}),e.jsx(oe,{label:"Hubungan",value:x.statusHubungan,onChange:a=>p({...x,statusHubungan:a.target.value}),options:["Kepala Keluarga","Suami","Istri","Anak","Menantu","Orang Tua","Mertua","Famili Lain"]}),e.jsx(oe,{label:"Status Rumah",value:x.statusRumah,onChange:a=>p({...x,statusRumah:a.target.value}),options:["Milik Sendiri","Sewa/Kontrak","Menumpang"]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Dokumen"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Z,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(x.files)]})]}),f==="activity"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Nama Kegiatan",value:v.namaKegiatan,onChange:a=>N({...v,namaKegiatan:a.target.value}),required:!0}),e.jsx(k,{label:"Tanggal",type:"date",value:v.tanggal,onChange:a=>N({...v,tanggal:a.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:3,placeholder:"Deskripsi",value:v.deskripsi,onChange:a=>N({...v,deskripsi:a.target.value})}),e.jsx(k,{label:"Keterangan",value:v.keterangan,onChange:a=>N({...v,keterangan:a.target.value})}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Z,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(v.files)]})]}),f==="complaint"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Nama Pelapor",value:z.namaPelapor,onChange:a=>P({...z,namaPelapor:a.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:4,placeholder:"Isi Pengaduan...",value:z.deskripsi,onChange:a=>P({...z,deskripsi:a.target.value}),required:!0}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Bukti"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Z,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(z.files)]})]}),e.jsx("div",{className:"pt-4 border-t sticky bottom-0 bg-white",children:e.jsx("button",{type:"submit",disabled:j,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold shadow hover:bg-blue-700 disabled:bg-blue-300 flex justify-center items-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"animate-spin"})," Menyimpan..."]}):"SIMPAN DATA"})})]})]})}),Re&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[e.jsx(Ye,{size:20})," Selesaikan Pengaduan"]}),e.jsx("button",{onClick:I,className:"text-gray-500 hover:text-red-500",children:e.jsx(te,{size:20})})]}),e.jsxs("form",{onSubmit:He,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catatan / Tanggapan Penyelesaian"}),e.jsx("textarea",{value:C.tanggapan,onChange:a=>V({...C,tanggapan:a.target.value}),placeholder:"Contoh: Masalah telah diperbaiki pada hari Senin...",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 resize-none",required:!0})]}),e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Bukti Foto Penyelesaian"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Ee,className:"text-sm w-full file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),q(C.files)]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 shadow-sm",children:"Simpan Selesai"})]})]})]})})]})}function re({active:i,onClick:c,icon:o,label:m}){return e.jsxs("button",{onClick:c,className:`flex items-center gap-1 px-3 py-2 text-sm font-medium border-b-2 transition ${i?"border-blue-600 text-blue-600":"border-transparent text-gray-500"}`,children:[o," ",m]})}function D({icon:i,label:c,value:o,color:m,active:l,onClick:d}){return e.jsxs("div",{onClick:d,className:`p-3 rounded-lg border flex items-center gap-3 cursor-pointer ${l?"ring-2 ring-blue-400 bg-blue-50":"bg-white"}`,children:[e.jsx("div",{className:`${m} text-white p-2 rounded shadow`,children:i}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:c}),e.jsx("p",{className:"text-xl font-bold",children:o})]})]})}function Ce({data:i,onEdit:c,onDelete:o,onMove:m}){return e.jsxs("div",{className:`p-4 rounded-xl border shadow-sm ${i.isMoved?"bg-red-50":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:e.jsx(ia,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold truncate",children:i.nama}),e.jsx("p",{className:"text-xs text-gray-500",children:i.statusHubungan})]})]}),i.isMoved&&e.jsx("span",{className:"text-[10px] bg-red-600 text-white px-2 py-0.5 rounded",children:"PINDAH"})]}),e.jsxs("div",{className:"mt-3 text-xs space-y-1 text-gray-600 border-t pt-2",children:[e.jsxs("p",{children:["NIK: ",i.nik]}),e.jsxs("p",{children:["TTL: ",i.tempatLahir,", ",i.tanggalLahir]}),e.jsxs("p",{children:["JK: ",i.jenisKelamin]})]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center pt-2 border-t",children:[!i.isMoved&&e.jsxs("button",{onClick:m,className:"text-orange-600 text-xs flex items-center gap-1",children:[e.jsx(Me,{size:12})," Pindah"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("button",{onClick:c,className:"text-blue-600 bg-blue-50 p-1 rounded",children:e.jsx(de,{size:16})}),e.jsx("button",{onClick:o,className:"text-red-600 bg-red-50 p-1 rounded",children:e.jsx(ce,{size:16})})]})]})]})}function ma({data:i,memberCount:c,onClick:o}){return e.jsxs("div",{onClick:o,className:"p-4 rounded-xl border shadow-sm bg-white cursor-pointer hover:shadow-md flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-full font-bold",children:i.nama[0]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:i.nama}),e.jsxs("p",{className:"text-xs text-gray-500",children:["KK: ",i.nomorKK]})]})]}),e.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[c," Anggota"]})]})}function k({label:i,value:c,onChange:o,required:m,type:l="text"}){return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:[i," ",m&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:l,value:c,onChange:o,required:m,className:"w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}function oe({label:i,value:c,onChange:o,options:m,required:l}){return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:[i," ",l&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:c,onChange:o,required:l,className:"w-full border px-3 py-2 rounded-lg bg-white",children:m.map(d=>e.jsx("option",{value:d,children:d},d))})]})}class ga extends Pe.Component{constructor(c){super(c),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(c){return{hasError:!0,error:c}}componentDidCatch(c,o){console.error("Uncaught error:",c,o),this.setState({errorInfo:o})}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"#721c24",backgroundColor:"#f8d7da",fontFamily:"sans-serif",height:"100vh",boxSizing:"border-box"},children:[e.jsx("h2",{style:{borderBottom:"1px solid #f5c6cb",paddingBottom:"10px"},children:"Oops, terjadi kesalahan fatal."}),e.jsx("p",{children:"Aplikasi mengalami crash. Mohon screenshot pesan di bawah ini dan kirimkan ke pengembang:"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Error:"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",border:"1px solid #f5c6cb"},children:this.state.error&&this.state.error.toString()})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Stack Trace:"}),e.jsxs("details",{style:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[e.jsx("summary",{children:"Klik untuk melihat detail"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",fontSize:"12px",marginTop:"5px",border:"1px solid #ccc"},children:this.state.errorInfo&&this.state.errorInfo.componentStack})]})]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",cursor:"pointer",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",fontSize:"16px"},children:"Muat Ulang Halaman"})]}):this.props.children}}const Ke=document.getElementById("root");Ke?da(Ke).render(e.jsx(Pe.StrictMode,{children:e.jsx(ga,{children:e.jsx(ua,{})})})):console.error("Gagal menemukan elemen ID 'root' di index.html");
