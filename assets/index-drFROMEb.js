import{i as aa,g as sa,a as ta,r as g,o as la,b as me,c as V,j as e,U as Q,C as Ae,M as De,d as Te,X as Z,e as Ie,H as na,L as te,f as le,h as ra,k as ue,s as ia,l as oa,u as ge,m as ee,n as ze,p as da,q as ca,A as xa,P as ma,T as ua,t as ga,v as pa,F as ha,S as ba,w as pe,x as je,y as Ne,z as fa,R as ne,B as ja,D as Na,E as va,G as ya,I as wa,J as ka}from"./vendor-s1sEaKki.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const m of o)if(m.type==="childList")for(const p of m.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&h(p)}).observe(document,{childList:!0,subtree:!0});function x(o){const m={};return o.integrity&&(m.integrity=o.integrity),o.referrerPolicy&&(m.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?m.credentials="include":o.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function h(o){if(o.ep)return;o.ep=!0;const m=x(o);fetch(o.href,m)}})();let ve;try{typeof __firebase_config<"u"?ve=JSON.parse(__firebase_config):ve={apiKey:"AIzaSyBwf0YITW6dueNHMtfD_d-fA0TcVhBT06c",authDomain:"rt-05-rw-09.firebaseapp.com",projectId:"rt-05-rw-09",storageBucket:"rt-05-rw-09.firebasestorage.app",messagingSenderId:"656172952610",appId:"1:656172952610:web:f6c98f827617589e73ae7b"}}catch(r){console.error("Error parsing firebase config",r)}const Ee=aa(ve),L=sa(Ee),he=ta(Ee),Fe=r=>new Promise((u,x)=>{const h=new FileReader;h.readAsDataURL(r),h.onload=o=>{var p;const m=new Image;m.src=(p=o.target)==null?void 0:p.result,m.onload=()=>{const f=document.createElement("canvas");let N=m.width,w=m.height;const y=800;N>w?N>y&&(w*=y/N,N=y):w>y&&(N*=y/w,w=y),f.width=N,f.height=w;const C=f.getContext("2d");if(!C){x(new Error("Canvas ctx error"));return}C.drawImage(m,0,0,N,w),u(f.toDataURL("image/jpeg",.7))},m.onerror=f=>x(f)},h.onerror=o=>x(o)}),Le=()=>new Date().toISOString().split("T")[0],I={nomorKK:"",alamat:"",statusHubungan:"Kepala Keluarga",isPendatang:!1,nik:"",nama:"",noHp:"",tempatLahir:"",tanggalLahir:"",jenisKelamin:"Laki-laki",golDarah:"-",agama:"Islam",statusPerkawinan:"Belum Kawin",pendidikan:"SMA/Sederajat",pekerjaan:"",statusRumah:"Milik Sendiri",jenisBpjs:"Tidak Memiliki",hasMobil:!1,platMobil:"",hasMotor:!1,platMotor:"",catatan:"",isMoved:!1,alamatPindah:"",tanggalPindah:"",isDeceased:!1,tanggalMeninggal:"",penyebabMeninggal:"",files:[]},be={namaKegiatan:"",tanggal:"",deskripsi:"",keterangan:"",files:[]},fe={namaPelapor:"",deskripsi:"",status:"Menunggu",tanggapan:"",files:[],tanggalPengaduan:"",tanggalPenyelesaian:""};function Ma(){const[r,u]=g.useState(null),[x,h]=g.useState("penduduk"),[o,m]=g.useState("summary"),[p,f]=g.useState([]),[N,w]=g.useState([]),[y,C]=g.useState([]),[E,B]=g.useState(!1),[Be,O]=g.useState(!1),[b,re]=g.useState("resident"),[ye,S]=g.useState(null),[_,we]=g.useState(""),[W,ke]=g.useState(""),[ie,Oe]=g.useState("Semua"),[$,_e]=g.useState(""),[U,Me]=g.useState(null),[j,A]=g.useState("kk"),[We,oe]=g.useState(!1),[z,q]=g.useState({id:"",tanggapan:"",files:[]}),[de,Ke]=g.useState(!1),[Ce,G]=g.useState(null),[i,d]=g.useState(I),[K,P]=g.useState(be),[R,F]=g.useState(fe);g.useEffect(()=>((async()=>{try{typeof __initial_auth_token<"u"&&__initial_auth_token?await ia(he,__initial_auth_token):await oa(he)}catch(a){console.error("Auth Error:",a)}})(),la(he,u)),[]),g.useEffect(()=>{if(!r)return;const s=me(V(L,"residents"),t=>{const n=t.docs.map(c=>({id:c.id,...c.data(),files:c.data().files||[],catatan:c.data().catatan||""}));n.sort((c,k)=>{const Y=["Kepala Keluarga","Istri","Suami","Anak"];return Y.indexOf(c.statusHubungan)-Y.indexOf(k.statusHubungan)}),f(n)},t=>console.error("Error Resident:",t)),a=me(V(L,"activities"),t=>{const n=t.docs.map(c=>({id:c.id,...c.data(),files:c.data().files||[]}));n.sort((c,k)=>new Date(k.tanggal).getTime()-new Date(c.tanggal).getTime()),w(n)},t=>console.error("Error Activity:",t)),l=me(V(L,"complaints"),t=>{const n=t.docs.map(c=>({id:c.id,...c.data(),files:c.data().files||[],resolutionFiles:c.data().resolutionFiles||[],tanggalPengaduan:c.data().tanggalPengaduan||"",tanggalPenyelesaian:c.data().tanggalPenyelesaian||""}));C(n.sort((c,k)=>c.status==="Menunggu"&&k.status!=="Menunggu"?-1:c.status!=="Menunggu"&&k.status==="Menunggu"?1:0))},t=>console.error("Error Complaint:",t));return()=>{s(),a(),l()}},[r]);const M=g.useMemo(()=>{const s=p.filter(n=>!n.isMoved&&!n.isDeceased),a=p.filter(n=>n.isMoved),l=p.filter(n=>n.isDeceased),t=s.filter(n=>n.statusHubungan==="Kepala Keluarga");return{totalWarga:s.length,totalKK:t.length,totalPindah:a.length,totalMeninggal:l.length,totalPendatang:s.filter(n=>n.isPendatang).length,rumahMilik:t.filter(n=>n.statusRumah==="Milik Sendiri").length,rumahSewa:t.filter(n=>n.statusRumah==="Sewa/Kontrak").length,rumahMenumpang:t.filter(n=>n.statusRumah==="Menumpang").length,totalMobil:s.filter(n=>n.hasMobil).length,totalMotor:s.filter(n=>n.hasMotor).length,lakiLaki:s.filter(n=>n.jenisKelamin==="Laki-laki").length,perempuan:s.filter(n=>n.jenisKelamin==="Perempuan").length}},[p]),$e=g.useMemo(()=>{const s={};return p.filter(a=>!a.isMoved&&!a.isDeceased).forEach(a=>{s[a.nomorKK]||(s[a.nomorKK]=[]),s[a.nomorKK].push(a)}),Object.keys(s).forEach(a=>{s[a].sort((l,t)=>{const n=["Kepala Keluarga","Suami","Istri","Anak","Menantu","Orang Tua","Mertua","Famili Lain"],c=n.indexOf(l.statusHubungan),k=n.indexOf(t.statusHubungan);return(c===-1?99:c)-(k===-1?99:k)})}),s},[p]),Ue=async s=>{if(s.preventDefault(),!r)return alert("Sistem belum siap.");if(E)return;B(!0);let a="",l={};if(b==="resident"||b==="move"||b==="death"?(a="residents",l=i):b==="activity"?(a="activities",l=K):b==="complaint"&&(a="complaints",l=R,!de&&!l.tanggalPengaduan&&(l.tanggalPengaduan=Le())),new Blob([JSON.stringify(l)]).size>9e5){alert("Ukuran data/foto terlalu besar. Mohon kurangi jumlah foto."),B(!1);return}try{const t=V(L,a);de&&Ce?(await ge(ee(t,Ce),{...l,updatedAt:ze()}),alert("Data berhasil diperbarui!"),H()):(await da(t,{...l,createdAt:ze()}),b==="resident"?confirm(`Data berhasil disimpan!

Klik OK untuk tambah anggota keluarga lain.
Klik Cancel untuk selesai.`)?d(c=>({...I,nomorKK:c.nomorKK,alamat:c.alamat,statusRumah:c.statusRumah,statusHubungan:"Anak",isPendatang:c.isPendatang})):H():(alert("Data berhasil disimpan!"),H()))}catch(t){console.error("Gagal Menyimpan:",t),alert(`Gagal menyimpan data.
Error: ${t.message}`)}finally{B(!1)}},J=async(s,a)=>{if(confirm("Yakin hapus data ini secara permanen?"))try{await ya(ee(L,s,a))}catch(l){alert("Gagal menghapus: "+l.message)}},ce=async s=>{const a=Array.from(s.target.files||[]),l=[];for(const t of a)try{const n=await Fe(t);l.push(n)}catch(n){console.error(n)}b==="resident"?d(t=>({...t,files:[...t.files,...l]})):b==="activity"?P(t=>({...t,files:[...t.files||[],...l]})):b==="complaint"&&F(t=>({...t,files:[...t.files||[],...l]})),s.target.value=""},qe=s=>{b==="resident"?d(a=>({...a,files:a.files.filter((l,t)=>t!==s)})):b==="activity"?P(a=>({...a,files:(a.files||[]).filter((l,t)=>t!==s)})):b==="complaint"&&F(a=>({...a,files:(a.files||[]).filter((l,t)=>t!==s)}))},Ge=s=>{q({id:s,tanggapan:"",files:[]}),oe(!0)},Je=async s=>{const a=Array.from(s.target.files||[]),l=[];for(const t of a)try{const n=await Fe(t);l.push(n)}catch(n){console.error(n)}q(t=>({...t,files:[...t.files,...l]})),s.target.value=""},Xe=async s=>{if(s.preventDefault(),!(!r||!z.id))try{await ge(ee(L,"complaints",z.id),{status:"Selesai",tanggapan:z.tanggapan,resolutionFiles:z.files,tanggalPenyelesaian:Le()}),oe(!1)}catch(a){console.error(a),alert("Gagal menyelesaikan pengaduan.")}},Ye=async(s,a)=>{const l=y.find(t=>t.id===s);if((l==null?void 0:l.status)==="Selesai")return alert("Pengaduan yang sudah selesai tidak dapat diubah statusnya lagi.");try{const t={status:a};a!=="Selesai"&&(t.tanggalPenyelesaian=""),await ge(ee(L,"complaints",s),t)}catch(t){console.error(t),alert("Gagal update status")}},D=(s,a)=>{re(s),B(!1),a?(Ke(!0),G(a.id),s==="resident"&&d(a),s==="activity"&&P({...a,files:a.files||[]}),s==="complaint"&&F({...a,files:a.files||[]})):(Ke(!1),G(null),s==="resident"&&d(I),s==="activity"&&P(be),s==="complaint"&&F(fe)),O(!0)},Se=s=>{d({...s,alamatPindah:"",tanggalPindah:""}),G(s.id),re("move"),O(!0)},Pe=s=>{d({...s,isDeceased:!0,tanggalMeninggal:"",penyebabMeninggal:""}),G(s.id),re("death"),O(!0)},H=()=>{O(!1),oe(!1),d(I),P(be),F(fe)},X=(s,a)=>e.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-2",children:s==null?void 0:s.map((l,t)=>e.jsxs("div",{className:"w-16 h-16 relative flex-shrink-0 group",children:[e.jsx("img",{src:l,className:"w-full h-full object-cover rounded border border-gray-200 cursor-pointer",onClick:()=>S(l)}),e.jsx("button",{type:"button",onClick:n=>{n.stopPropagation(),a?a(t):qe(t)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 shadow transition",children:e.jsx(Z,{size:12})})]},t))}),xe=s=>!s||s.length===0?null:e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(wa,{size:12})," Lampiran (",s.length,")"]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:s.map((a,l)=>e.jsx("div",{className:"w-10 h-10 rounded border border-gray-200 overflow-hidden cursor-pointer hover:opacity-80",onClick:()=>S(a),children:e.jsx("img",{src:a,className:"w-full h-full object-cover"})},l))})]}),Ve=()=>{let s="Laporan Ringkasan";return o==="warga"&&(s="Laporan Detail Data Warga"),o==="kegiatan"&&(s="Laporan Kegiatan & Dokumentasi"),o==="aduan"&&(s="Laporan & Status Pengaduan Warga"),e.jsxs("div",{className:"pb-20 bg-white p-6 rounded-xl border shadow-sm print:shadow-none print:border-none print:p-0 print:w-full",children:[e.jsxs("div",{className:"hidden print:flex flex-col items-center justify-center mb-8 border-b-2 border-gray-800 pb-4",children:[e.jsx("h1",{className:"text-2xl font-bold uppercase",children:"RT. 05 RW. 09 PERUMAHAN BUANA PERMAI"}),e.jsx("h2",{className:"text-lg font-medium",children:"Kelurahan Cipondoh, Kecamatan Cipondoh, Kota Tangerang"}),e.jsx("h3",{className:"text-xl font-bold mt-4 uppercase underline",children:s}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Dicetak pada: ",new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 print:hidden gap-4",children:[e.jsx("div",{className:"flex gap-2 bg-slate-100 p-1 rounded-lg overflow-x-auto w-full sm:w-auto",children:[{id:"summary",label:"Ringkasan",icon:e.jsx(Te,{size:16})},{id:"warga",label:"Data Warga",icon:e.jsx(ca,{size:16})},{id:"kegiatan",label:"Kegiatan",icon:e.jsx(xa,{size:16})},{id:"aduan",label:"Pengaduan",icon:e.jsx(De,{size:16})}].map(a=>e.jsxs("button",{onClick:()=>m(a.id),className:`px-3 py-2 rounded-md text-sm font-medium flex items-center gap-2 transition ${o===a.id?"bg-white shadow text-blue-600":"text-slate-500 hover:bg-slate-200"}`,children:[a.icon," ",a.label]},a.id))}),e.jsxs("button",{onClick:()=>window.print(),className:"bg-slate-800 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-slate-700 shadow w-full sm:w-auto justify-center",children:[e.jsx(ma,{size:18})," Cetak Laporan"]})]}),e.jsxs("div",{className:"space-y-8 min-h-[50vh]",children:[o==="summary"&&e.jsxs("section",{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Total Warga"}),e.jsxs("p",{className:"text-2xl font-bold",children:[M.totalWarga," ",e.jsx("span",{className:"text-sm font-normal",children:"Jiwa"})]})]}),e.jsxs("div",{className:"p-4 bg-indigo-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Kepala Keluarga"}),e.jsxs("p",{className:"text-2xl font-bold",children:[M.totalKK," ",e.jsx("span",{className:"text-sm font-normal",children:"KK"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Warga Meninggal"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[M.totalMeninggal," ",e.jsx("span",{className:"text-sm font-normal text-black",children:"Jiwa"})]})]}),e.jsxs("div",{className:"p-4 bg-orange-50 rounded border print:border-gray-300",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Status Rumah"}),e.jsxs("p",{className:"text-sm font-bold",children:["Milik: ",M.rumahMilik," | Sewa: ",M.rumahSewa]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("h4",{className:"font-bold border-b pb-2 mb-2",children:"Statistik Kendaraan"}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{children:"Mobil"}),e.jsxs("span",{className:"font-bold",children:[M.totalMobil," Unit"]})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{children:"Motor"}),e.jsxs("span",{className:"font-bold",children:[M.totalMotor," Unit"]})]})]}),e.jsxs("div",{className:"border rounded p-4",children:[e.jsx("h4",{className:"font-bold border-b pb-2 mb-2",children:"Statistik Aduan"}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{children:"Selesai"}),e.jsx("span",{className:"font-bold text-green-600",children:y.filter(a=>a.status==="Selesai").length})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{children:"Dalam Proses"}),e.jsx("span",{className:"font-bold text-yellow-600",children:y.filter(a=>a.status!=="Selesai").length})]})]})]})]}),o==="warga"&&e.jsx("section",{className:"space-y-6",children:Object.entries($e).map(([a,l])=>{const t=l.find(n=>n.statusHubungan==="Kepala Keluarga")||l[0];return e.jsxs("div",{className:"border rounded-lg overflow-hidden break-inside-avoid page-break-after-auto mb-6 border-slate-300 shadow-sm print:shadow-none",children:[e.jsxs("div",{className:"bg-slate-100 p-4 border-b border-slate-300 flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-lg text-slate-800",children:[t.nama," ",e.jsxs("span",{className:"text-sm font-normal text-slate-600",children:["(",t.statusHubungan,")"]})]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["No. KK: ",e.jsx("span",{className:"font-mono font-bold text-slate-900",children:a})]})]}),e.jsxs("div",{className:"text-left sm:text-right mt-2 sm:mt-0",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-bold",children:"Alamat:"})," ",t.alamat]}),t.noHp&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-bold",children:"HP (Kepala):"})," ",t.noHp]})]})]}),e.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[e.jsx("thead",{className:"bg-slate-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left w-8",children:"No"}),e.jsx("th",{className:"p-2 text-left",children:"Nama / NIK / HP"}),e.jsx("th",{className:"p-2 text-left",children:"L/P & TTL"}),e.jsx("th",{className:"p-2 text-left",children:"Status/Pekerjaan"}),e.jsx("th",{className:"p-2 text-center",children:"Hubungan"}),e.jsx("th",{className:"p-2 text-center w-40",children:"Foto"})]})}),e.jsx("tbody",{className:"divide-y",children:l.map((n,c)=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-2 text-center",children:c+1}),e.jsxs("td",{className:"p-2",children:[e.jsx("div",{className:"font-bold",children:n.nama}),e.jsx("div",{className:"text-slate-500 text-xs",children:n.nik}),n.noHp&&e.jsxs("div",{className:"text-slate-500 text-[10px] mt-0.5",children:["ðŸ“ž ",n.noHp]})]}),e.jsxs("td",{className:"p-2",children:[n.jenisKelamin==="Laki-laki"?"L":"P",", ",n.tempatLahir,e.jsx("div",{className:"text-slate-500 text-xs",children:n.tanggalLahir})]}),e.jsxs("td",{className:"p-2",children:[e.jsx("div",{children:n.statusPerkawinan}),e.jsx("div",{className:"text-slate-500 text-xs",children:n.pekerjaan})]}),e.jsx("td",{className:"p-2 text-center",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${n.statusHubungan==="Kepala Keluarga"?"bg-blue-100 text-blue-700 font-bold":"bg-slate-100"}`,children:n.statusHubungan})}),e.jsx("td",{className:"p-2 text-center",children:n.files&&n.files.length>0?e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:n.files.map((k,Y)=>e.jsx("img",{src:k,className:"w-40 h-40 object-cover border rounded shadow-sm print:w-40 print:h-40 cursor-pointer",onClick:()=>S(k)},Y))}):"-"})]},n.id))})]})]},a)})}),o==="kegiatan"&&e.jsxs("section",{children:[N.length===0&&e.jsx("p",{className:"text-center italic text-gray-500",children:"Tidak ada data kegiatan."}),e.jsx("div",{className:"space-y-6",children:N.map((a,l)=>e.jsx("div",{className:"border-b-2 border-slate-100 pb-6 break-inside-avoid",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-slate-800 text-white w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-full font-bold",children:l+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between mb-2",children:[e.jsx("h4",{className:"font-bold text-lg text-slate-800",children:a.namaKegiatan}),e.jsx("span",{className:"text-sm font-mono text-slate-500 bg-slate-100 px-2 py-1 rounded w-fit",children:a.tanggal})]}),e.jsx("p",{className:"text-slate-700 text-sm whitespace-pre-wrap mb-3 text-justify",children:a.deskripsi}),a.keterangan&&e.jsxs("div",{className:"text-xs bg-yellow-50 border border-yellow-200 p-2 rounded text-yellow-800 mb-3 inline-block",children:[e.jsx("strong",{children:"Catatan:"})," ",a.keterangan]}),a.files&&a.files.length>0&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2",children:a.files.map((t,n)=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("img",{src:t,className:"w-full h-64 object-cover rounded-lg border shadow-sm cursor-pointer hover:opacity-95",onClick:()=>S(t)}),e.jsxs("span",{className:"text-[10px] text-center text-slate-400",children:["Dokumentasi ",n+1]})]},n))})]})]})},a.id))})]}),o==="aduan"&&e.jsx("section",{children:e.jsx("div",{className:"space-y-6",children:y.map((a,l)=>e.jsxs("div",{className:"border border-slate-200 rounded-xl p-5 break-inside-avoid bg-white shadow-sm print:shadow-none",children:[e.jsxs("div",{className:"flex justify-between items-start border-b border-slate-100 pb-3 mb-4",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-bold text-lg text-slate-800 block",children:["Laporan #",l+1,": ",a.namaPelapor]}),e.jsxs("span",{className:"text-xs text-slate-500",children:["Tanggal Masuk: ",a.tanggalPengaduan]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${a.status==="Selesai"?"bg-green-100 text-green-700 border-green-200":a.status==="Proses"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-red-100 text-red-700 border-red-200"}`,children:a.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("p",{className:"text-sm font-bold text-red-700 mb-2 flex items-center gap-2",children:[e.jsx(ua,{size:16})," MASALAH / KELUHAN"]}),e.jsx("div",{className:"text-sm text-slate-700 bg-red-50 p-4 rounded-lg border border-red-100 flex-1 mb-3",children:a.deskripsi}),a.files&&a.files.length>0?e.jsxs("div",{className:"mt-auto",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 block mb-2",children:"FOTO BUKTI AWAL:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.files.map((t,n)=>e.jsx("img",{src:t,className:"w-full h-48 object-cover border rounded-lg shadow-sm cursor-pointer hover:opacity-90",onClick:()=>S(t)},n))})]}):e.jsx("p",{className:"text-xs text-slate-400 italic text-center p-4 border border-dashed rounded",children:"Tidak ada foto bukti awal."})]}),e.jsxs("div",{className:"flex flex-col h-full border-l pl-0 md:pl-8 border-slate-100",children:[e.jsxs("p",{className:"text-sm font-bold text-green-700 mb-2 flex items-center gap-2",children:[e.jsx(ue,{size:16})," PENYELESAIAN / TINDAK LANJUT"]}),a.tanggapan?e.jsxs("div",{className:"mb-3 flex-1",children:[e.jsx("div",{className:"text-sm text-slate-700 bg-green-50 p-4 rounded-lg border border-green-100 mb-2",children:a.tanggapan}),e.jsxs("p",{className:"text-xs text-green-700 font-mono text-right",children:["Diselesaikan: ",a.tanggalPenyelesaian]})]}):e.jsx("p",{className:"text-sm text-slate-400 italic bg-slate-50 p-4 rounded-lg mb-3 flex-1",children:"Belum ada data penyelesaian."}),a.resolutionFiles&&a.resolutionFiles.length>0?e.jsxs("div",{className:"mt-auto",children:[e.jsx("span",{className:"text-xs font-bold text-green-600 block mb-2",children:"FOTO HASIL PENYELESAIAN:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.resolutionFiles.map((t,n)=>e.jsx("img",{src:t,className:"w-full h-48 object-cover border rounded-lg shadow-sm cursor-pointer hover:opacity-90",onClick:()=>S(t)},n))})]}):e.jsx("p",{className:"text-xs text-slate-400 italic text-center p-4 border border-dashed rounded mt-auto",children:"Tidak ada foto penyelesaian."})]})]})]},a.id))})}),e.jsx("div",{className:"hidden print:flex justify-end mt-12 pt-8 break-inside-avoid",children:e.jsxs("div",{className:"text-center w-64",children:[e.jsxs("p",{className:"mb-24",children:["Mengetahui,",e.jsx("br",{}),"Ketua RT. 05 RW. 09"]}),e.jsx("p",{className:"font-bold underline",children:"( ....................................... )"})]})})]})]})},Qe=()=>{const s=p.filter(l=>$===""||l.nama.toLowerCase().includes($.toLowerCase())||l.nomorKK.includes($)?j==="kk"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved&&!l.isDeceased:j==="pindah"?l.isMoved:j==="meninggal"?l.isDeceased:j==="datang"?l.isPendatang&&!l.isMoved&&!l.isDeceased:j==="milik"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved&&l.statusRumah==="Milik Sendiri":j==="sewa"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved&&l.statusRumah==="Sewa/Kontrak":j==="numpang"?l.statusHubungan==="Kepala Keluarga"&&!l.isMoved&&l.statusRumah==="Menumpang":!1:!1),a=l=>p.filter(t=>t.nomorKK===l);if(U){const l=a(U);return e.jsxs("div",{className:"animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("button",{onClick:()=>Me(null),className:"p-2 bg-white border rounded-full",children:e.jsx(ga,{size:20})}),e.jsxs("h2",{className:"text-xl font-bold",children:["Detail Keluarga (KK: ",U,")"]}),e.jsxs("button",{onClick:()=>{const t=l.find(c=>c.statusHubungan==="Kepala Keluarga")||l[0],n={...I,nomorKK:U,alamat:(t==null?void 0:t.alamat)||"",isPendatang:t==null?void 0:t.isPendatang};D("resident"),d(n)},className:"ml-auto bg-green-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(pa,{size:16})," Tambah Anggota"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(t=>e.jsx(Re,{data:t,onEdit:()=>D("resident",t),onDelete:()=>J("residents",t.id),onMove:()=>Se(t),onDeath:()=>Pe(t),onPreview:n=>S(n)},t.id))})]})}return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[e.jsx(se,{icon:e.jsx(Q,{}),label:"Total Warga",value:M.totalWarga,color:"bg-blue-600",active:!1,onClick:()=>{}}),e.jsx(se,{icon:e.jsx(ha,{}),label:"Kepala Keluarga",value:M.totalKK,color:"bg-indigo-500",active:j==="kk",onClick:()=>A("kk")}),e.jsx(se,{icon:e.jsx(te,{}),label:"Warga Pindah",value:M.totalPindah,color:"bg-orange-500",active:j==="pindah",onClick:()=>A("pindah")}),e.jsx(se,{icon:e.jsx(le,{}),label:"Meninggal",value:M.totalMeninggal,color:"bg-red-600",active:j==="meninggal",onClick:()=>A("meninggal")})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4",children:[e.jsx("button",{onClick:()=>A("kk"),className:`px-3 py-1 rounded text-xs border ${j==="kk"?"bg-slate-800 text-white":"bg-white"}`,children:"Semua KK"}),e.jsx("button",{onClick:()=>A("datang"),className:`px-3 py-1 rounded text-xs border ${j==="datang"?"bg-green-600 text-white":"bg-white"}`,children:"Pendatang"}),e.jsx("button",{onClick:()=>A("milik"),className:`px-3 py-1 rounded text-xs border ${j==="milik"?"bg-emerald-600 text-white":"bg-white"}`,children:"Rumah Milik"}),e.jsx("button",{onClick:()=>A("sewa"),className:`px-3 py-1 rounded text-xs border ${j==="sewa"?"bg-orange-500 text-white":"bg-white"}`,children:"Sewa/Kontrak"}),e.jsx("button",{onClick:()=>A("meninggal"),className:`px-3 py-1 rounded text-xs border ${j==="meninggal"?"bg-red-600 text-white":"bg-white"}`,children:"Arsip Meninggal"})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(ba,{className:"absolute left-3 top-2.5 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Cari Nama / KK...",value:$,onChange:l=>_e(l.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:()=>D("resident"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(pe,{size:18})," Baru"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(l=>["kk","milik","sewa","numpang"].includes(j)?e.jsx(Ka,{data:l,memberCount:a(l.nomorKK).length,onClick:()=>Me(l.nomorKK)},l.id):e.jsx(Re,{data:l,onEdit:()=>D("resident",l),onDelete:()=>J("residents",l.id),onMove:()=>Se(l),onDeath:()=>Pe(l),onPreview:t=>S(t)},l.id))})]})},Ze=()=>{const s=N.filter(a=>!(_&&a.tanggal<_||W&&a.tanggal>W));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Kegiatan RT"}),e.jsxs("button",{onClick:()=>D("activity"),className:"bg-purple-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(pe,{size:18})," Tambah"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(Ae,{size:14,className:"inline"})," Periode:"]}),e.jsx("input",{type:"date",value:_,onChange:a=>we(a.target.value),className:"border rounded text-sm px-1"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"date",value:W,onChange:a=>ke(a.target.value),className:"border rounded text-sm px-1"}),(_||W)&&e.jsx("button",{onClick:()=>{we(""),ke("")},className:"text-xs text-red-500",children:"Reset"})]}),e.jsx("div",{className:"space-y-4",children:s.map(a=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-bold text-lg",children:a.namaKegiatan}),e.jsx("span",{className:"text-sm bg-purple-100 text-purple-700 px-2 py-1 rounded h-fit",children:a.tanggal})]}),e.jsx("p",{className:"text-gray-600 text-sm whitespace-pre-wrap",children:a.deskripsi}),a.keterangan&&e.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded border",children:a.keterangan}),xe(a.files),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsxs("button",{onClick:()=>D("activity",a),className:"text-blue-600 text-sm flex items-center gap-1",children:[e.jsx(je,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>J("activities",a.id),className:"text-red-600 text-sm flex items-center gap-1",children:[e.jsx(Ne,{size:14})," Hapus"]})]})]},a.id))})]})},ea=()=>{const s=y.filter(a=>!(ie!=="Semua"&&a.status!==ie));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Pengaduan"}),e.jsxs("button",{onClick:()=>D("complaint"),className:"bg-orange-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(pe,{size:18})," Buat"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(fa,{size:14,className:"inline"})," Status:"]}),e.jsxs("select",{value:ie,onChange:a=>Oe(a.target.value),className:"border rounded text-sm px-2 py-1",children:[e.jsx("option",{value:"Semua",children:"Semua"}),e.jsx("option",{value:"Menunggu",children:"Menunggu"}),e.jsx("option",{value:"Proses",children:"Proses"}),e.jsx("option",{value:"Selesai",children:"Selesai"})]})]}),e.jsx("div",{className:"space-y-4",children:s.map(a=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-bold",children:a.namaPelapor}),e.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${a.status==="Selesai"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:a.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:a.deskripsi}),a.files&&a.files.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-[10px] text-gray-400 block mb-1",children:"Bukti Awal:"}),xe(a.files)]}),a.status==="Selesai"&&e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200 mt-2 mb-2 text-sm",children:[e.jsxs("p",{className:"font-bold text-green-800 mb-1 flex items-center gap-1",children:[e.jsx(ue,{size:12})," Penyelesaian:"]}),e.jsx("p",{className:"text-green-700 mb-2",children:a.tanggapan}),a.resolutionFiles&&a.resolutionFiles.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Foto Bukti Selesai:"}),xe(a.resolutionFiles)]}),e.jsx("p",{className:"text-[10px] text-green-600 text-right mt-1",children:a.tanggalPenyelesaian})]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2 pt-2 border-t flex-wrap",children:[a.status!=="Selesai"&&e.jsxs(e.Fragment,{children:[["Menunggu","Proses"].map(l=>e.jsx("button",{onClick:()=>Ye(a.id,l),className:`text-xs border px-2 py-1 rounded hover:bg-gray-50 ${a.status===l?"bg-gray-800 text-white":""}`,children:l},l)),e.jsx("button",{onClick:()=>Ge(a.id),className:"text-xs border px-2 py-1 rounded hover:bg-green-50 text-green-700 font-bold",children:"Selesai"})]}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{onClick:()=>D("complaint",a),className:"text-blue-500",children:e.jsx(je,{size:16})}),e.jsx("button",{onClick:()=>J("complaints",a.id),className:"text-red-500",children:e.jsx(Ne,{size:16})})]})]})]},a.id))})]})};return e.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 font-sans",children:[e.jsxs("header",{className:"bg-white border-b sticky top-0 z-30 shadow-sm p-4 print:hidden",children:[e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 text-white p-2 rounded",children:e.jsx(Q,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-sm leading-tight",children:"RT. 05 RW. 09 Buana Permai"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sistem Data"})]})]}),e.jsxs("div",{className:"flex mt-4 border-t pt-2 gap-4 overflow-x-auto",children:[e.jsx(ae,{active:x==="penduduk",onClick:()=>h("penduduk"),icon:e.jsx(Q,{size:16}),label:"Warga"}),e.jsx(ae,{active:x==="kegiatan",onClick:()=>h("kegiatan"),icon:e.jsx(Ae,{size:16}),label:"Kegiatan"}),e.jsx(ae,{active:x==="pengaduan",onClick:()=>h("pengaduan"),icon:e.jsx(De,{size:16}),label:"Aduan"}),e.jsx(ae,{active:x==="laporan",onClick:()=>h("laporan"),icon:e.jsx(Te,{size:16}),label:"Laporan"})]})]}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-4",children:[x==="penduduk"&&Qe(),x==="kegiatan"&&Ze(),x==="pengaduan"&&ea(),x==="laporan"&&Ve()]}),ye&&e.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4 cursor-pointer print:hidden",onClick:()=>S(null),children:[e.jsx("img",{src:ye,className:"max-w-full max-h-full rounded shadow-lg object-contain"}),e.jsx("button",{className:"absolute top-4 right-4 text-white bg-black/50 rounded-full p-2 hover:bg-black/70 transition",children:e.jsx(Z,{size:24})})]}),Be&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto print:hidden",children:e.jsxs("div",{className:"bg-white w-full rounded-xl max-w-lg relative flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-xl sticky top-0 z-10",children:[e.jsxs("h2",{className:"font-bold text-lg capitalize",children:[de?"Edit":"Tambah"," ",b]}),e.jsx("button",{onClick:H,children:e.jsx(Z,{size:24,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:Ue,className:"p-4 overflow-y-auto space-y-6",children:[b==="resident"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(Ie,{size:18})," Data Pribadi"]}),e.jsx(v,{label:"NIK",value:i.nik,onChange:s=>d({...i,nik:s.target.value}),required:!0}),e.jsx(v,{label:"Nama Lengkap",value:i.nama,onChange:s=>d({...i,nama:s.target.value}),required:!0}),e.jsx(v,{label:"No Handphone (WA)",value:i.noHp,onChange:s=>d({...i,noHp:s.target.value})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(v,{label:"Tempat Lahir",value:i.tempatLahir,onChange:s=>d({...i,tempatLahir:s.target.value})}),e.jsx(v,{label:"Tgl Lahir",type:"date",value:i.tanggalLahir,onChange:s=>d({...i,tanggalLahir:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(T,{label:"Jenis Kelamin",value:i.jenisKelamin,onChange:s=>d({...i,jenisKelamin:s.target.value}),options:["Laki-laki","Perempuan"]}),e.jsx(T,{label:"Gol. Darah",value:i.golDarah,onChange:s=>d({...i,golDarah:s.target.value}),options:["-","A","B","AB","O"]})]}),e.jsx(T,{label:"Agama",value:i.agama,onChange:s=>d({...i,agama:s.target.value}),options:["Islam","Kristen","Katolik","Hindu","Buddha","Konghucu"]}),e.jsx(T,{label:"Pendidikan Terakhir",value:i.pendidikan,onChange:s=>d({...i,pendidikan:s.target.value}),options:["Tidak/Belum Sekolah","SD/Sederajat","SMP/Sederajat","SMA/Sederajat","D1","D2","D3","S1","S2","S3"]}),e.jsx(v,{label:"Pekerjaan",value:i.pekerjaan,onChange:s=>d({...i,pekerjaan:s.target.value})}),e.jsx(T,{label:"Status Kawin",value:i.statusPerkawinan,onChange:s=>d({...i,statusPerkawinan:s.target.value}),options:["Belum Kawin","Kawin","Cerai Hidup","Cerai Mati"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(Q,{size:18})," Data Keluarga"]}),e.jsx(v,{label:"Nomor KK",value:i.nomorKK,onChange:s=>d({...i,nomorKK:s.target.value}),required:!0}),e.jsx(T,{label:"Hubungan",value:i.statusHubungan,onChange:s=>d({...i,statusHubungan:s.target.value}),options:["Kepala Keluarga","Suami","Istri","Anak","Menantu","Orang Tua","Mertua","Famili Lain"]}),e.jsx(v,{label:"Alamat Domisili",value:i.alamat,onChange:s=>d({...i,alamat:s.target.value})}),e.jsxs("div",{className:"flex items-center gap-2 bg-green-50 p-3 rounded border border-green-200",children:[e.jsx("input",{type:"checkbox",checked:i.isPendatang,onChange:s=>d({...i,isPendatang:s.target.checked}),className:"w-5 h-5 text-green-600 rounded"}),e.jsx("label",{className:"text-sm font-medium text-green-800",children:"Warga Pendatang (Baru Masuk)"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(na,{size:18})," Aset & Kepemilikan"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(T,{label:"Status Rumah",value:i.statusRumah,onChange:s=>d({...i,statusRumah:s.target.value}),options:["Milik Sendiri","Sewa/Kontrak","Menumpang"]}),e.jsx(T,{label:"BPJS",value:i.jenisBpjs,onChange:s=>d({...i,jenisBpjs:s.target.value}),options:["Tidak Memiliki","BPJS Mandiri","BPJS Kantor","BPJS PBI"]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded border border-slate-200 space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Kendaraan"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i.hasMobil,onChange:s=>d({...i,hasMobil:s.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm w-16",children:"Mobil"}),e.jsx("input",{type:"text",disabled:!i.hasMobil,value:i.platMobil,onChange:s=>d({...i,platMobil:s.target.value}),placeholder:"Plat Nomor",className:"flex-1 border rounded px-2 py-1 text-sm disabled:bg-slate-100"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i.hasMotor,onChange:s=>d({...i,hasMotor:s.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm w-16",children:"Motor"}),e.jsx("input",{type:"text",disabled:!i.hasMotor,value:i.platMotor,onChange:s=>d({...i,platMotor:s.target.value}),placeholder:"Plat Nomor",className:"flex-1 border rounded px-2 py-1 text-sm disabled:bg-slate-100"})]})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Catatan Tambahan"}),e.jsx("textarea",{value:i.catatan,onChange:s=>d({...i,catatan:s.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Contoh: Sakit menahun, butuh bantuan, dll."})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Dokumen"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ce,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),X(i.files)]})]})]}),b==="move"&&e.jsxs("div",{className:"space-y-4 bg-orange-50 p-4 rounded border border-orange-200",children:[e.jsxs("div",{className:"flex gap-2 text-orange-800 text-sm mb-2",children:[e.jsx(te,{size:16})," ",e.jsx("p",{children:"Form Lapor Pindah Warga"})]}),e.jsx(v,{label:"Tanggal Pindah",type:"date",value:i.tanggalPindah,onChange:s=>d({...i,tanggalPindah:s.target.value}),required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Alamat Pindah"}),e.jsx("textarea",{className:"w-full border rounded-lg p-2 focus:ring-2 focus:ring-blue-500",rows:3,value:i.alamatPindah,onChange:s=>d({...i,alamatPindah:s.target.value}),required:!0})]})]}),b==="death"&&e.jsxs("div",{className:"space-y-4 bg-red-50 p-4 rounded border border-red-200",children:[e.jsxs("div",{className:"flex gap-2 text-red-800 text-sm mb-2",children:[e.jsx(le,{size:16})," ",e.jsx("p",{children:"Form Lapor Warga Meninggal"})]}),e.jsx(v,{label:"Tanggal Meninggal",type:"date",value:i.tanggalMeninggal,onChange:s=>d({...i,tanggalMeninggal:s.target.value}),required:!0}),e.jsx(v,{label:"Penyebab Meninggal",value:i.penyebabMeninggal,onChange:s=>d({...i,penyebabMeninggal:s.target.value}),required:!0})]}),b==="activity"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{label:"Nama Kegiatan",value:K.namaKegiatan,onChange:s=>P({...K,namaKegiatan:s.target.value}),required:!0}),e.jsx(v,{label:"Tanggal",type:"date",value:K.tanggal,onChange:s=>P({...K,tanggal:s.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:3,placeholder:"Deskripsi",value:K.deskripsi,onChange:s=>P({...K,deskripsi:s.target.value})}),e.jsx(v,{label:"Keterangan",value:K.keterangan,onChange:s=>P({...K,keterangan:s.target.value})}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ce,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),X(K.files)]})]}),b==="complaint"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{label:"Nama Pelapor",value:R.namaPelapor,onChange:s=>F({...R,namaPelapor:s.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:4,placeholder:"Isi Pengaduan...",value:R.deskripsi,onChange:s=>F({...R,deskripsi:s.target.value}),required:!0}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Bukti"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ce,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),X(R.files)]})]}),e.jsx("div",{className:"pt-4 border-t sticky bottom-0 bg-white",children:e.jsx("button",{type:"submit",disabled:E,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold shadow hover:bg-blue-700 disabled:bg-blue-300 flex justify-center items-center gap-2",children:E?e.jsxs(e.Fragment,{children:[e.jsx(ra,{className:"animate-spin"})," Menyimpan..."]}):"SIMPAN DATA"})})]})]})}),We&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 print:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[e.jsx(ue,{size:20})," Selesaikan Pengaduan"]}),e.jsx("button",{onClick:H,className:"text-gray-500 hover:text-red-500",children:e.jsx(Z,{size:20})})]}),e.jsxs("form",{onSubmit:Xe,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catatan / Tanggapan Penyelesaian"}),e.jsx("textarea",{value:z.tanggapan,onChange:s=>q({...z,tanggapan:s.target.value}),placeholder:"Contoh: Masalah telah diperbaiki pada hari Senin...",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 resize-none",required:!0})]}),e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Bukti Foto Penyelesaian"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Je,className:"text-sm w-full file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),X(z.files,s=>q(a=>({...a,files:a.files.filter((l,t)=>t!==s)})))]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 shadow-sm",children:"Simpan Selesai"})]})]})]})})]})}function ae({active:r,onClick:u,icon:x,label:h}){return e.jsxs("button",{onClick:u,className:`flex items-center gap-1 px-3 py-2 text-sm font-medium border-b-2 transition ${r?"border-blue-600 text-blue-600":"border-transparent text-gray-500"}`,children:[x," ",h]})}function se({icon:r,label:u,value:x,color:h,active:o,onClick:m}){return e.jsxs("div",{onClick:m,className:`p-3 rounded-lg border flex items-center gap-3 cursor-pointer ${o?"ring-2 ring-blue-400 bg-blue-50":"bg-white"}`,children:[e.jsx("div",{className:`${h} text-white p-2 rounded shadow`,children:r}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:u}),e.jsx("p",{className:"text-xl font-bold",children:x})]})]})}function Re({data:r,onEdit:u,onDelete:x,onMove:h,onDeath:o,onPreview:m}){const p=r.statusHubungan==="Kepala Keluarga";return e.jsxs("div",{className:`p-4 rounded-xl border shadow-sm ${r.isMoved?"bg-orange-50":r.isDeceased?"bg-red-50":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center border",children:r.files&&r.files.length>0?e.jsx("img",{src:r.files[0],className:"w-full h-full object-cover cursor-pointer",onClick:()=>m(r.files[0])}):e.jsx(Ie,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold truncate",children:r.nama}),e.jsx("p",{className:"text-xs text-gray-500",children:r.statusHubungan})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.isMoved&&e.jsx("span",{className:"text-[10px] bg-orange-600 text-white px-2 py-0.5 rounded",children:"PINDAH"}),r.isDeceased&&e.jsx("span",{className:"text-[10px] bg-red-600 text-white px-2 py-0.5 rounded",children:"MENINGGAL"}),r.isPendatang&&!r.isMoved&&!r.isDeceased&&e.jsx("span",{className:"text-[10px] bg-green-600 text-white px-2 py-0.5 rounded",children:"PENDATANG"})]})]}),e.jsxs("div",{className:"mt-3 text-xs space-y-1 text-gray-600 border-t pt-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"NIK:"})," ",r.nik]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"KK:"})," ",r.nomorKK]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"JK:"})," ",r.jenisKelamin]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Gol.D:"})," ",r.golDarah]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Agama:"})," ",r.agama]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Status:"})," ",r.statusPerkawinan]})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Pekerjaan:"})," ",r.pekerjaan]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Alamat:"})," ",r.alamat]}),r.noHp&&e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"HP:"})," ",r.noHp]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[r.hasMobil&&e.jsxs("span",{className:"text-[10px] bg-orange-100 text-orange-700 px-1 rounded flex items-center gap-1",children:[e.jsx(ja,{size:10})," ",r.platMobil]}),r.hasMotor&&e.jsxs("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1 rounded flex items-center gap-1",children:[e.jsx(Na,{size:10})," ",r.platMotor]})]}),r.files&&r.files.length>0&&e.jsx("div",{className:"flex gap-1 mt-2 overflow-x-auto pt-1",children:r.files.map((f,N)=>e.jsx("img",{src:f,className:"w-8 h-8 rounded object-cover border cursor-pointer hover:opacity-80",onClick:()=>m(f)},N))})]}),r.catatan&&e.jsxs("div",{className:"bg-yellow-50 p-2 rounded text-yellow-800 text-[10px] sm:text-xs mt-2 border border-yellow-100 flex gap-1 items-start",children:[e.jsx(va,{size:12,className:"mt-0.5 flex-shrink-0"})," ",e.jsx("span",{children:r.catatan})]}),p&&!r.isMoved&&!r.isDeceased&&e.jsx("div",{className:"flex justify-between border-t pt-2 mt-2",children:e.jsxs("span",{className:"text-gray-500 text-[10px]",children:["Rumah: ",r.statusRumah]})}),r.isMoved&&e.jsxs("div",{className:"bg-orange-100 p-2 rounded text-orange-700 mt-2 text-xs",children:[e.jsxs("span",{className:"font-bold flex items-center gap-1",children:[e.jsx(te,{size:10})," Pindah ke:"]}),r.alamatPindah," (",r.tanggalPindah,")"]}),r.isDeceased&&e.jsxs("div",{className:"bg-red-100 p-2 rounded text-red-700 mt-2 text-xs",children:[e.jsxs("span",{className:"font-bold flex items-center gap-1",children:[e.jsx(le,{size:10})," Meninggal:"]})," ",r.tanggalMeninggal," (",r.penyebabMeninggal,")"]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center pt-2 border-t",children:[!r.isMoved&&!r.isDeceased&&e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:h,className:"text-orange-600 text-xs flex items-center gap-1 border border-orange-200 px-2 py-1 rounded hover:bg-orange-50",children:[e.jsx(te,{size:12})," Pindah"]}),e.jsxs("button",{onClick:o,className:"text-red-600 text-xs flex items-center gap-1 border border-red-200 px-2 py-1 rounded hover:bg-red-50",children:[e.jsx(le,{size:12})," Meninggal"]})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("button",{onClick:u,className:"text-blue-600 bg-blue-50 p-1 rounded",children:e.jsx(je,{size:16})}),e.jsx("button",{onClick:x,className:"text-red-600 bg-red-50 p-1 rounded",children:e.jsx(Ne,{size:16})})]})]})]})}function Ka({data:r,memberCount:u,onClick:x}){return e.jsxs("div",{onClick:x,className:"p-4 rounded-xl border shadow-sm bg-white cursor-pointer hover:shadow-md flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-full font-bold w-10 h-10 flex items-center justify-center overflow-hidden",children:r.files&&r.files.length>0?e.jsx("img",{src:r.files[0],className:"w-full h-full object-cover"}):r.nama[0]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:r.nama}),e.jsxs("p",{className:"text-xs text-gray-500",children:["KK: ",r.nomorKK]})]})]}),e.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[u," Anggota"]})]})}function v({label:r,name:u,type:x="text",value:h,onChange:o,placeholder:m,required:p,disabled:f,className:N}){const w=ne.useMemo(()=>`input-${u}-${Math.random().toString(36).substr(2,9)}`,[u]),y=C=>{if(x==="date"&&C.target.showPicker)try{C.target.showPicker()}catch{}};return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:w,className:"text-sm font-medium text-gray-700 mb-1 block",children:[r," ",p&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:w,type:x,name:u,value:h,onChange:o,onClick:x==="date"?C=>y(C):void 0,placeholder:m,required:p,disabled:f,className:`px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition w-full min-h-[42px] ${N}`})]})}function T({label:r,name:u,value:x,onChange:h,options:o,required:m}){const p=ne.useMemo(()=>`select-${u}-${Math.random().toString(36).substr(2,9)}`,[u]);return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:p,className:"text-sm font-medium text-gray-700 mb-1 block",children:[r," ",m&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{id:p,name:u,value:x,onChange:h,required:m,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white w-full min-h-[42px]",children:o.map(f=>e.jsx("option",{value:f,children:f},f))})]})}class Ca extends ne.Component{constructor(u){super(u),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(u){return{hasError:!0,error:u}}componentDidCatch(u,x){console.error("Uncaught error:",u,x),this.setState({errorInfo:x})}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"#721c24",backgroundColor:"#f8d7da",fontFamily:"sans-serif",height:"100vh",boxSizing:"border-box"},children:[e.jsx("h2",{style:{borderBottom:"1px solid #f5c6cb",paddingBottom:"10px"},children:"Oops, terjadi kesalahan fatal."}),e.jsx("p",{children:"Aplikasi mengalami crash. Mohon screenshot pesan di bawah ini dan kirimkan ke pengembang:"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Error:"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",border:"1px solid #f5c6cb"},children:this.state.error&&this.state.error.toString()})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Stack Trace:"}),e.jsxs("details",{style:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[e.jsx("summary",{children:"Klik untuk melihat detail"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",fontSize:"12px",marginTop:"5px",border:"1px solid #ccc"},children:this.state.errorInfo&&this.state.errorInfo.componentStack})]})]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",cursor:"pointer",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",fontSize:"16px"},children:"Muat Ulang Halaman"})]}):this.props.children}}const He=document.getElementById("root");He?ka(He).render(e.jsx(ne.StrictMode,{children:e.jsx(Ca,{children:e.jsx(Ma,{})})})):console.error("Gagal menemukan elemen ID 'root' di index.html");
