import{i as Ge,g as Je,a as Xe,r as x,o as Ve,b as se,c as q,j as e,U as G,C as we,M as Ye,X as te,d as Te,H as Se,L as Qe,e as Ze,s as ea,f as aa,u as le,h as J,k as Ce,l as sa,A as ta,m as Ke,F as Fe,n as ce,K as la,B as na,S as ia,P as ne,p as ue,T as me,q as ra,R as X,t as oa,v as da,w as ca,I as ua,x as ma}from"./vendor-BB97hy5k.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))g(r);new MutationObserver(r=>{for(const m of r)if(m.type==="childList")for(const f of m.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&g(f)}).observe(document,{childList:!0,subtree:!0});function d(r){const m={};return r.integrity&&(m.integrity=r.integrity),r.referrerPolicy&&(m.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?m.credentials="include":r.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function g(r){if(r.ep)return;r.ep=!0;const m=d(r);fetch(r.href,m)}})();let xe;try{typeof __firebase_config<"u"?xe=JSON.parse(__firebase_config):xe={apiKey:"AIzaSyBwf0YITW6dueNHMtfD_d-fA0TcVhBT06c",authDomain:"rt-05-rw-09.firebaseapp.com",projectId:"rt-05-rw-09",storageBucket:"rt-05-rw-09.firebasestorage.app",messagingSenderId:"656172952610",appId:"1:656172952610:web:f6c98f827617589e73ae7b"}}catch(n){console.error("Error parsing firebase config",n)}const ze=Ge(xe),T=Je(ze),ie=Xe(ze),Me=n=>new Promise((o,d)=>{const g=new FileReader;g.readAsDataURL(n),g.onload=r=>{var f;const m=new Image;m.src=(f=r.target)==null?void 0:f.result,m.onload=()=>{const b=document.createElement("canvas");let v=m.width,N=m.height;const y=800;v>N?v>y&&(N*=y/v,v=y):N>y&&(v*=y/N,N=y),b.width=v,b.height=N;const k=b.getContext("2d");if(!k){d(new Error("Canvas ctx error"));return}k.drawImage(m,0,0,v,N),o(b.toDataURL("image/jpeg",.6))},m.onerror=b=>d(b)},g.onerror=r=>d(r)}),Pe=()=>new Date().toISOString().split("T")[0],E={nomorKK:"",alamat:"",statusHubungan:"Kepala Keluarga",isPendatang:!1,nik:"",nama:"",tempatLahir:"",tanggalLahir:"",jenisKelamin:"Laki-laki",golDarah:"-",agama:"Islam",statusPerkawinan:"Belum Kawin",pendidikan:"SMA/Sederajat",pekerjaan:"",statusRumah:"Milik Sendiri",jenisBpjs:"Tidak Memiliki",hasMobil:!1,platMobil:"",hasMotor:!1,platMotor:"",catatan:"",isMoved:!1,alamatPindah:"",tanggalPindah:"",files:[]},re={namaKegiatan:"",tanggal:"",deskripsi:"",keterangan:"",files:[]},oe={namaPelapor:"",deskripsi:"",status:"Menunggu",tanggapan:"",files:[],tanggalPengaduan:"",tanggalPenyelesaian:""};function xa(){const[n,o]=x.useState(null),[d,g]=x.useState("penduduk"),[r,m]=x.useState([]),[f,b]=x.useState([]),[v,N]=x.useState([]),[y,k]=x.useState(!1),[ge,V]=x.useState(!1),[h,pe]=x.useState("resident"),[H,he]=x.useState(""),[L,fe]=x.useState(""),[Y,Re]=x.useState("Semua"),[_,Ie]=x.useState(""),[O,be]=x.useState(null),[j,z]=x.useState("kk"),[Be,Q]=x.useState(!1),[K,U]=x.useState({id:"",tanggapan:"",files:[]}),[Z,je]=x.useState(!1),[ve,ee]=x.useState(null),[i,c]=x.useState(E),[S,C]=x.useState(re),[R,A]=x.useState(oe);x.useEffect(()=>((async()=>{try{typeof __initial_auth_token<"u"&&__initial_auth_token?await ea(ie,__initial_auth_token):await aa(ie)}catch(s){console.error("Auth Error:",s)}})(),Ve(ie,o)),[]),x.useEffect(()=>{if(!n)return;const a=se(q(T,"residents"),l=>{const p=l.docs.map(u=>({id:u.id,...u.data(),files:u.data().files||[],catatan:u.data().catatan||""}));p.sort((u,B)=>{const ke=["Kepala Keluarga","Istri","Suami","Anak"];return ke.indexOf(u.statusHubungan)-ke.indexOf(B.statusHubungan)}),m(p)},l=>console.error("Error Resident:",l)),s=se(q(T,"activities"),l=>{const p=l.docs.map(u=>({id:u.id,...u.data(),files:u.data().files||[]}));p.sort((u,B)=>new Date(B.tanggal).getTime()-new Date(u.tanggal).getTime()),b(p)},l=>console.error("Error Activity:",l)),t=se(q(T,"complaints"),l=>{const p=l.docs.map(u=>({id:u.id,...u.data(),files:u.data().files||[],tanggalPengaduan:u.data().tanggalPengaduan||"",tanggalPenyelesaian:u.data().tanggalPenyelesaian||""}));N(p.sort((u,B)=>u.status==="Menunggu"&&B.status!=="Menunggu"?-1:u.status!=="Menunggu"&&B.status==="Menunggu"?1:0))},l=>console.error("Error Complaint:",l));return()=>{a(),s(),t()}},[n]);const D=x.useMemo(()=>{const a=r.filter(l=>!l.isMoved),s=r.filter(l=>l.isMoved),t=a.filter(l=>l.statusHubungan==="Kepala Keluarga");return{totalWarga:a.length,totalKK:t.length,totalPindah:s.length,totalPendatang:a.filter(l=>l.isPendatang).length,rumahMilik:t.filter(l=>l.statusRumah==="Milik Sendiri").length,rumahSewa:t.filter(l=>l.statusRumah==="Sewa/Kontrak").length,rumahMenumpang:t.filter(l=>l.statusRumah==="Menumpang").length}},[r]),Ee=async a=>{if(a.preventDefault(),!n)return alert("Sistem belum siap.");if(y)return;k(!0);let s="",t={};if(h==="resident"||h==="move"?(s="residents",t=i):h==="activity"?(s="activities",t=S):h==="complaint"&&(s="complaints",t=R,!Z&&!t.tanggalPengaduan&&(t.tanggalPengaduan=Pe())),new Blob([JSON.stringify(t)]).size>9e5){alert("Ukuran data/foto terlalu besar. Mohon kurangi jumlah foto."),k(!1);return}try{const l=q(T,s);Z&&ve?(await le(J(l,ve),{...t,updatedAt:Ce()}),alert("Data berhasil diperbarui!"),I()):(await sa(l,{...t,createdAt:Ce()}),h==="resident"?confirm(`Data berhasil disimpan!

Klik OK untuk tambah anggota keluarga lain.
Klik Cancel untuk selesai.`)?c(u=>({...E,nomorKK:u.nomorKK,alamat:u.alamat,statusRumah:u.statusRumah,statusHubungan:"Anak",isPendatang:u.isPendatang})):I():(alert("Data berhasil disimpan!"),I()))}catch(l){console.error("Gagal Menyimpan:",l),alert(`Gagal menyimpan data.
Error: ${l.message}`)}finally{k(!1)}},$=async(a,s)=>{if(confirm("Yakin hapus data ini?"))try{await ca(J(T,a,s))}catch(t){alert("Gagal menghapus: "+t.message)}},ae=async a=>{const s=Array.from(a.target.files||[]),t=[];for(const l of s)try{const p=await Me(l);t.push(p)}catch(p){console.error(p)}h==="resident"?c(l=>({...l,files:[...l.files,...t]})):h==="activity"?C(l=>({...l,files:[...l.files||[],...t]})):h==="complaint"&&A(l=>({...l,files:[...l.files||[],...t]})),a.target.value=""},He=a=>{h==="resident"?c(s=>({...s,files:s.files.filter((t,l)=>l!==a)})):h==="activity"?C(s=>({...s,files:(s.files||[]).filter((t,l)=>l!==a)})):h==="complaint"&&A(s=>({...s,files:(s.files||[]).filter((t,l)=>l!==a)}))},Le=a=>{U({id:a,tanggapan:"",files:[]}),Q(!0)},_e=async a=>{const s=Array.from(a.target.files||[]),t=[];for(const l of s)try{const p=await Me(l);t.push(p)}catch(p){console.error(p)}U(l=>({...l,files:[...l.files,...t]})),a.target.value=""},Oe=async a=>{if(a.preventDefault(),!(!n||!K.id))try{const s=v.find(p=>p.id===K.id),l=[...(s==null?void 0:s.files)||[],...K.files];await le(J(T,"complaints",K.id),{status:"Selesai",tanggapan:K.tanggapan,files:l,tanggalPenyelesaian:Pe()}),Q(!1)}catch(s){console.error(s),alert("Gagal menyelesaikan pengaduan.")}},Ue=async(a,s)=>{try{const t={status:s};s!=="Selesai"&&(t.tanggalPenyelesaian=""),await le(J(T,"complaints",a),t)}catch(t){console.error(t),alert("Gagal update status")}},M=(a,s)=>{pe(a),k(!1),s?(je(!0),ee(s.id),a==="resident"&&c(s),a==="activity"&&C({...s,files:s.files||[]}),a==="complaint"&&A({...s,files:s.files||[]})):(je(!1),ee(null),a==="resident"&&c(E),a==="activity"&&C(re),a==="complaint"&&A(oe)),V(!0)},Ne=a=>{c({...a,alamatPindah:"",tanggalPindah:""}),ee(a.id),pe("move"),V(!0)},I=()=>{V(!1),Q(!1),c(E),C(re),A(oe)},W=(a,s)=>e.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-2",children:a==null?void 0:a.map((t,l)=>e.jsxs("div",{className:"w-16 h-16 relative flex-shrink-0 group",children:[e.jsx("img",{src:t,className:"w-full h-full object-cover rounded border border-gray-200 cursor-pointer",onClick:()=>window.open(t)}),e.jsx("button",{type:"button",onClick:()=>s?s(l):He(l),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 shadow transition",children:e.jsx(te,{size:12})})]},l))}),ye=a=>!a||a.length===0?null:e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[e.jsx(ua,{size:12})," Lampiran (",a.length,")"]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:a.map((s,t)=>e.jsx("div",{className:"w-10 h-10 rounded border border-gray-200 overflow-hidden cursor-pointer hover:opacity-80",onClick:()=>window.open(s),children:e.jsx("img",{src:s,className:"w-full h-full object-cover"})},t))})]}),$e=()=>{const a=r.filter(t=>_===""||t.nama.toLowerCase().includes(_.toLowerCase())||t.nomorKK.includes(_)?j==="kk"?t.statusHubungan==="Kepala Keluarga"&&!t.isMoved:j==="pindah"?t.isMoved:j==="datang"?t.isPendatang&&!t.isMoved:j==="milik"?t.statusHubungan==="Kepala Keluarga"&&!t.isMoved&&t.statusRumah==="Milik Sendiri":j==="sewa"?t.statusHubungan==="Kepala Keluarga"&&!t.isMoved&&t.statusRumah==="Sewa/Kontrak":j==="numpang"?t.statusHubungan==="Kepala Keluarga"&&!t.isMoved&&t.statusRumah==="Menumpang":!1:!1),s=t=>r.filter(l=>l.nomorKK===t);if(O){const t=s(O);return e.jsxs("div",{className:"animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("button",{onClick:()=>be(null),className:"p-2 bg-white border rounded-full",children:e.jsx(ta,{size:20})}),e.jsxs("h2",{className:"text-xl font-bold",children:["Detail Keluarga (KK: ",O,")"]}),e.jsxs("button",{onClick:()=>{const l=t.find(u=>u.statusHubungan==="Kepala Keluarga")||t[0],p={...E,nomorKK:O,alamat:(l==null?void 0:l.alamat)||"",isPendatang:l==null?void 0:l.isPendatang};M("resident"),c(p)},className:"ml-auto bg-green-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(Ke,{size:16})," Tambah Anggota"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(l=>e.jsx(Ae,{data:l,onEdit:()=>M("resident",l),onDelete:()=>$("residents",l.id),onMove:()=>Ne(l)},l.id))})]})}return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[e.jsx(F,{icon:e.jsx(G,{}),label:"Total Warga",value:D.totalWarga,color:"bg-blue-600",active:!1,onClick:()=>{}}),e.jsx(F,{icon:e.jsx(Fe,{}),label:"Kepala Keluarga",value:D.totalKK,color:"bg-indigo-500",active:j==="kk",onClick:()=>z("kk")}),e.jsx(F,{icon:e.jsx(ce,{}),label:"Warga Pindah",value:D.totalPindah,color:"bg-red-500",active:j==="pindah",onClick:()=>z("pindah")}),e.jsx(F,{icon:e.jsx(Ke,{}),label:"Warga Datang",value:D.totalPendatang,color:"bg-green-500",active:j==="datang",onClick:()=>z("datang")})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-2",children:"FILTER STATUS RUMAH (KK)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(F,{icon:e.jsx(Se,{}),label:"Milik Sendiri",value:D.rumahMilik,color:"bg-emerald-600",active:j==="milik",onClick:()=>z("milik")}),e.jsx(F,{icon:e.jsx(la,{}),label:"Sewa",value:D.rumahSewa,color:"bg-orange-500",active:j==="sewa",onClick:()=>z("sewa")}),e.jsx(F,{icon:e.jsx(na,{}),label:"Menumpang",value:D.rumahMenumpang,color:"bg-purple-500",active:j==="numpang",onClick:()=>z("numpang")})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(ia,{className:"absolute left-3 top-2.5 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Cari Nama / KK...",value:_,onChange:t=>Ie(t.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("button",{onClick:()=>M("resident"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(ne,{size:18})," Baru"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(t=>["kk","milik","sewa","numpang"].includes(j)?e.jsx(ga,{data:t,memberCount:s(t.nomorKK).length,onClick:()=>be(t.nomorKK)},t.id):e.jsx(Ae,{data:t,onEdit:()=>M("resident",t),onDelete:()=>$("residents",t.id),onMove:()=>Ne(t)},t.id))})]})},We=()=>{const a=f.filter(s=>!(H&&s.tanggal<H||L&&s.tanggal>L));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Kegiatan RT"}),e.jsxs("button",{onClick:()=>M("activity"),className:"bg-purple-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(ne,{size:18})," Tambah"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(we,{size:14,className:"inline"})," Periode:"]}),e.jsx("input",{type:"date",value:H,onChange:s=>he(s.target.value),className:"border rounded text-sm px-1"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"date",value:L,onChange:s=>fe(s.target.value),className:"border rounded text-sm px-1"}),(H||L)&&e.jsx("button",{onClick:()=>{he(""),fe("")},className:"text-xs text-red-500",children:"Reset"})]}),e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-bold text-lg",children:s.namaKegiatan}),e.jsx("span",{className:"text-sm bg-purple-100 text-purple-700 px-2 py-1 rounded h-fit",children:s.tanggal})]}),e.jsx("p",{className:"text-gray-600 text-sm whitespace-pre-wrap",children:s.deskripsi}),s.keterangan&&e.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded border",children:s.keterangan}),ye(s.files),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsxs("button",{onClick:()=>M("activity",s),className:"text-blue-600 text-sm flex items-center gap-1",children:[e.jsx(ue,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>$("activities",s.id),className:"text-red-600 text-sm flex items-center gap-1",children:[e.jsx(me,{size:14})," Hapus"]})]})]},s.id))})]})},qe=()=>{const a=v.filter(s=>!(Y!=="Semua"&&s.status!==Y));return e.jsxs("div",{className:"pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Pengaduan"}),e.jsxs("button",{onClick:()=>M("complaint"),className:"bg-orange-600 text-white px-3 py-2 rounded flex items-center gap-1",children:[e.jsx(ne,{size:18})," Buat"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 items-center bg-white p-2 rounded border",children:[e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[e.jsx(ra,{size:14,className:"inline"})," Status:"]}),e.jsxs("select",{value:Y,onChange:s=>Re(s.target.value),className:"border rounded text-sm px-2 py-1",children:[e.jsx("option",{value:"Semua",children:"Semua"}),e.jsx("option",{value:"Menunggu",children:"Menunggu"}),e.jsx("option",{value:"Proses",children:"Proses"}),e.jsx("option",{value:"Selesai",children:"Selesai"})]})]}),e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-bold",children:s.namaPelapor}),e.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${s.status==="Selesai"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.status})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:s.deskripsi}),ye(s.files),s.status==="Selesai"&&e.jsxs("div",{className:"bg-green-50 p-2 rounded text-xs text-green-800 border border-green-200",children:["âœ… ",s.tanggapan]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2 pt-2 border-t flex-wrap",children:[["Menunggu","Proses"].map(t=>e.jsx("button",{onClick:()=>Ue(s.id,t),className:"text-xs border px-2 py-1 rounded hover:bg-gray-50",children:t},t)),e.jsx("button",{onClick:()=>Le(s.id),className:"text-xs border px-2 py-1 rounded hover:bg-green-50 text-green-700 font-bold",children:"Selesai"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{onClick:()=>M("complaint",s),className:"text-blue-500",children:e.jsx(ue,{size:16})}),e.jsx("button",{onClick:()=>$("complaints",s.id),className:"text-red-500",children:e.jsx(me,{size:16})})]})]})]},s.id))})]})};return e.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 font-sans",children:[e.jsxs("header",{className:"bg-white border-b sticky top-0 z-30 shadow-sm p-4",children:[e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 text-white p-2 rounded",children:e.jsx(G,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-sm leading-tight",children:"RT. 05 RW. 09 Buana Permai"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sistem Data"})]})]}),e.jsxs("div",{className:"flex mt-4 border-t pt-2 gap-4 overflow-x-auto",children:[e.jsx(de,{active:d==="penduduk",onClick:()=>g("penduduk"),icon:e.jsx(G,{size:16}),label:"Warga"}),e.jsx(de,{active:d==="kegiatan",onClick:()=>g("kegiatan"),icon:e.jsx(we,{size:16}),label:"Kegiatan"}),e.jsx(de,{active:d==="pengaduan",onClick:()=>g("pengaduan"),icon:e.jsx(Ye,{size:16}),label:"Aduan"})]})]}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-4",children:[d==="penduduk"&&$e(),d==="kegiatan"&&We(),d==="pengaduan"&&qe()]}),ge&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white w-full rounded-xl max-w-lg relative flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-xl sticky top-0 z-10",children:[e.jsxs("h2",{className:"font-bold text-lg capitalize",children:[Z?"Edit":"Tambah"," ",h]}),e.jsx("button",{onClick:I,children:e.jsx(te,{size:24,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:Ee,className:"p-4 overflow-y-auto space-y-6",children:[h==="resident"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(Te,{size:18})," Data Pribadi"]}),e.jsx(w,{label:"NIK",value:i.nik,onChange:a=>c({...i,nik:a.target.value}),required:!0}),e.jsx(w,{label:"Nama Lengkap",value:i.nama,onChange:a=>c({...i,nama:a.target.value}),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(w,{label:"Tempat Lahir",value:i.tempatLahir,onChange:a=>c({...i,tempatLahir:a.target.value})}),e.jsx(w,{label:"Tgl Lahir",type:"date",value:i.tanggalLahir,onChange:a=>c({...i,tanggalLahir:a.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(P,{label:"Jenis Kelamin",value:i.jenisKelamin,onChange:a=>c({...i,jenisKelamin:a.target.value}),options:["Laki-laki","Perempuan"]}),e.jsx(P,{label:"Gol. Darah",value:i.golDarah,onChange:a=>c({...i,golDarah:a.target.value}),options:["-","A","B","AB","O"]})]}),e.jsx(P,{label:"Agama",value:i.agama,onChange:a=>c({...i,agama:a.target.value}),options:["Islam","Kristen","Katolik","Hindu","Buddha","Konghucu"]}),e.jsx(P,{label:"Pendidikan Terakhir",value:i.pendidikan,onChange:a=>c({...i,pendidikan:a.target.value}),options:["Tidak/Belum Sekolah","SD/Sederajat","SMP/Sederajat","SMA/Sederajat","D1","D2","D3","S1","S2","S3"]}),e.jsx(w,{label:"Pekerjaan",value:i.pekerjaan,onChange:a=>c({...i,pekerjaan:a.target.value})}),e.jsx(P,{label:"Status Kawin",value:i.statusPerkawinan,onChange:a=>c({...i,statusPerkawinan:a.target.value}),options:["Belum Kawin","Kawin","Cerai Hidup","Cerai Mati"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(G,{size:18})," Data Keluarga"]}),e.jsx(w,{label:"Nomor KK",value:i.nomorKK,onChange:a=>c({...i,nomorKK:a.target.value}),required:!0}),e.jsx(P,{label:"Hubungan",value:i.statusHubungan,onChange:a=>c({...i,statusHubungan:a.target.value}),options:["Kepala Keluarga","Suami","Istri","Anak","Menantu","Orang Tua","Mertua","Famili Lain"]}),e.jsx(w,{label:"Alamat Domisili",value:i.alamat,onChange:a=>c({...i,alamat:a.target.value})}),e.jsxs("div",{className:"flex items-center gap-2 bg-green-50 p-3 rounded border border-green-200",children:[e.jsx("input",{type:"checkbox",checked:i.isPendatang,onChange:a=>c({...i,isPendatang:a.target.checked}),className:"w-5 h-5 text-green-600 rounded"}),e.jsx("label",{className:"text-sm font-medium text-green-800",children:"Warga Pendatang (Baru Masuk)"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-blue-700 border-b pb-2 flex gap-2",children:[e.jsx(Se,{size:18})," Aset & Kepemilikan"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(P,{label:"Status Rumah",value:i.statusRumah,onChange:a=>c({...i,statusRumah:a.target.value}),options:["Milik Sendiri","Sewa/Kontrak","Menumpang"]}),e.jsx(P,{label:"BPJS",value:i.jenisBpjs,onChange:a=>c({...i,jenisBpjs:a.target.value}),options:["Tidak Memiliki","BPJS Mandiri","BPJS Kantor","BPJS PBI"]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded border border-slate-200 space-y-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Kendaraan"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i.hasMobil,onChange:a=>c({...i,hasMobil:a.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm w-16",children:"Mobil"}),e.jsx("input",{type:"text",disabled:!i.hasMobil,value:i.platMobil,onChange:a=>c({...i,platMobil:a.target.value}),placeholder:"Plat Nomor",className:"flex-1 border rounded px-2 py-1 text-sm disabled:bg-slate-100"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i.hasMotor,onChange:a=>c({...i,hasMotor:a.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm w-16",children:"Motor"}),e.jsx("input",{type:"text",disabled:!i.hasMotor,value:i.platMotor,onChange:a=>c({...i,platMotor:a.target.value}),placeholder:"Plat Nomor",className:"flex-1 border rounded px-2 py-1 text-sm disabled:bg-slate-100"})]})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Catatan Tambahan"}),e.jsx("textarea",{value:i.catatan,onChange:a=>c({...i,catatan:a.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Contoh: Sakit menahun, butuh bantuan, dll."})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Dokumen"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ae,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),W(i.files)]})]})]}),h==="activity"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:"Nama Kegiatan",value:S.namaKegiatan,onChange:a=>C({...S,namaKegiatan:a.target.value}),required:!0}),e.jsx(w,{label:"Tanggal",type:"date",value:S.tanggal,onChange:a=>C({...S,tanggal:a.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:3,placeholder:"Deskripsi",value:S.deskripsi,onChange:a=>C({...S,deskripsi:a.target.value})}),e.jsx(w,{label:"Keterangan",value:S.keterangan,onChange:a=>C({...S,keterangan:a.target.value})}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ae,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),W(S.files)]})]}),h==="complaint"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{label:"Nama Pelapor",value:R.namaPelapor,onChange:a=>A({...R,namaPelapor:a.target.value}),required:!0}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:4,placeholder:"Isi Pengaduan...",value:R.deskripsi,onChange:a=>A({...R,deskripsi:a.target.value}),required:!0}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Foto Bukti"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ae,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),W(R.files)]})]}),e.jsx("div",{className:"pt-4 border-t sticky bottom-0 bg-white",children:e.jsx("button",{type:"submit",disabled:y,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold shadow hover:bg-blue-700 disabled:bg-blue-300 flex justify-center items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"animate-spin"})," Menyimpan..."]}):"SIMPAN DATA"})})]})]})}),Be&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6 relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[e.jsx(Ze,{size:20})," Selesaikan Pengaduan"]}),e.jsx("button",{onClick:I,className:"text-gray-500 hover:text-red-500",children:e.jsx(te,{size:20})})]}),e.jsxs("form",{onSubmit:Oe,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catatan / Tanggapan Penyelesaian"}),e.jsx("textarea",{value:K.tanggapan,onChange:a=>U({...K,tanggapan:a.target.value}),placeholder:"Contoh: Masalah telah diperbaiki pada hari Senin...",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 resize-none",required:!0})]}),e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Bukti Foto Penyelesaian"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:_e,className:"text-sm w-full file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),W(K.files,a=>U(s=>({...s,files:s.files.filter((t,l)=>l!==a)})))]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 shadow-sm",children:"Simpan Selesai"})]})]})]})})]})}function de({active:n,onClick:o,icon:d,label:g}){return e.jsxs("button",{onClick:o,className:`flex items-center gap-1 px-3 py-2 text-sm font-medium border-b-2 transition ${n?"border-blue-600 text-blue-600":"border-transparent text-gray-500"}`,children:[d," ",g]})}function F({icon:n,label:o,value:d,color:g,active:r,onClick:m}){return e.jsxs("div",{onClick:m,className:`p-3 rounded-lg border flex items-center gap-3 cursor-pointer ${r?"ring-2 ring-blue-400 bg-blue-50":"bg-white"}`,children:[e.jsx("div",{className:`${g} text-white p-2 rounded shadow`,children:n}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:o}),e.jsx("p",{className:"text-xl font-bold",children:d})]})]})}function Ae({data:n,onEdit:o,onDelete:d,onMove:g}){const r=n.statusHubungan==="Kepala Keluarga";return e.jsxs("div",{className:`p-4 rounded-xl border shadow-sm ${n.isMoved?"bg-red-50":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:e.jsx(Te,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold truncate",children:n.nama}),e.jsx("p",{className:"text-xs text-gray-500",children:n.statusHubungan})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.isMoved&&e.jsx("span",{className:"text-[10px] bg-red-600 text-white px-2 py-0.5 rounded",children:"PINDAH"}),n.isPendatang&&!n.isMoved&&e.jsx("span",{className:"text-[10px] bg-green-600 text-white px-2 py-0.5 rounded",children:"PENDATANG"})]})]}),e.jsxs("div",{className:"mt-3 text-xs space-y-1 text-gray-600 border-t pt-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"NIK:"})," ",n.nik]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"KK:"})," ",n.nomorKK]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"JK:"})," ",n.jenisKelamin]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Gol.D:"})," ",n.golDarah]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Agama:"})," ",n.agama]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Status:"})," ",n.statusPerkawinan]})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Pekerjaan:"})," ",n.pekerjaan]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Alamat:"})," ",n.alamat]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[n.hasMobil&&e.jsxs("span",{className:"text-[10px] bg-orange-100 text-orange-700 px-1 rounded flex items-center gap-1",children:[e.jsx(oa,{size:10})," ",n.platMobil]}),n.hasMotor&&e.jsxs("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1 rounded flex items-center gap-1",children:[e.jsx(da,{size:10})," ",n.platMotor]})]})]}),n.catatan&&e.jsxs("div",{className:"bg-yellow-50 p-2 rounded text-yellow-800 text-[10px] sm:text-xs mt-2 border border-yellow-100 flex gap-1 items-start",children:[e.jsx(Fe,{size:12,className:"mt-0.5 flex-shrink-0"})," ",e.jsx("span",{children:n.catatan})]}),r&&!n.isMoved&&e.jsx("div",{className:"flex justify-between border-t pt-2 mt-2",children:e.jsxs("span",{className:"text-gray-500 text-[10px]",children:["Rumah: ",n.statusRumah]})}),n.isMoved&&e.jsxs("div",{className:"bg-red-100 p-2 rounded text-red-700 mt-2 text-xs",children:[e.jsxs("span",{className:"font-bold flex items-center gap-1",children:[e.jsx(ce,{size:10})," Pindah ke:"]}),n.alamatPindah," (",n.tanggalPindah,")"]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center pt-2 border-t",children:[!n.isMoved&&e.jsxs("button",{onClick:g,className:"text-orange-600 text-xs flex items-center gap-1",children:[e.jsx(ce,{size:12})," Pindah"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("button",{onClick:o,className:"text-blue-600 bg-blue-50 p-1 rounded",children:e.jsx(ue,{size:16})}),e.jsx("button",{onClick:d,className:"text-red-600 bg-red-50 p-1 rounded",children:e.jsx(me,{size:16})})]})]})]})}function ga({data:n,memberCount:o,onClick:d}){return e.jsxs("div",{onClick:d,className:"p-4 rounded-xl border shadow-sm bg-white cursor-pointer hover:shadow-md flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-full font-bold",children:n.nama[0]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:n.nama}),e.jsxs("p",{className:"text-xs text-gray-500",children:["KK: ",n.nomorKK]})]})]}),e.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[o," Anggota"]})]})}function w({label:n,name:o,type:d="text",value:g,onChange:r,placeholder:m,required:f,disabled:b,className:v}){const N=X.useMemo(()=>`input-${o}-${Math.random().toString(36).substr(2,9)}`,[o]),y=k=>{if(d==="date"&&k.target.showPicker)try{k.target.showPicker()}catch{}};return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:N,className:"text-sm font-medium text-gray-700 mb-1 block",children:[n," ",f&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:N,type:d,name:o,value:g,onChange:r,onClick:d==="date"?k=>y(k):void 0,placeholder:m,required:f,disabled:b,className:`px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition w-full min-h-[42px] ${v}`})]})}function P({label:n,name:o,value:d,onChange:g,options:r,required:m}){const f=X.useMemo(()=>`select-${o}-${Math.random().toString(36).substr(2,9)}`,[o]);return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("label",{htmlFor:f,className:"text-sm font-medium text-gray-700 mb-1 block",children:[n," ",m&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{id:f,name:o,value:d,onChange:g,required:m,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white w-full min-h-[42px]",children:r.map(b=>e.jsx("option",{value:b,children:b},b))})]})}class pa extends X.Component{constructor(o){super(o),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(o){return{hasError:!0,error:o}}componentDidCatch(o,d){console.error("Uncaught error:",o,d),this.setState({errorInfo:d})}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"#721c24",backgroundColor:"#f8d7da",fontFamily:"sans-serif",height:"100vh",boxSizing:"border-box"},children:[e.jsx("h2",{style:{borderBottom:"1px solid #f5c6cb",paddingBottom:"10px"},children:"Oops, terjadi kesalahan fatal."}),e.jsx("p",{children:"Aplikasi mengalami crash. Mohon screenshot pesan di bawah ini dan kirimkan ke pengembang:"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Error:"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",border:"1px solid #f5c6cb"},children:this.state.error&&this.state.error.toString()})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("strong",{children:"Stack Trace:"}),e.jsxs("details",{style:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[e.jsx("summary",{children:"Klik untuk melihat detail"}),e.jsx("pre",{style:{background:"#fff",padding:"15px",borderRadius:"5px",overflowX:"auto",fontSize:"12px",marginTop:"5px",border:"1px solid #ccc"},children:this.state.errorInfo&&this.state.errorInfo.componentStack})]})]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",cursor:"pointer",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",fontSize:"16px"},children:"Muat Ulang Halaman"})]}):this.props.children}}const De=document.getElementById("root");De?ma(De).render(e.jsx(X.StrictMode,{children:e.jsx(pa,{children:e.jsx(xa,{})})})):console.error("Gagal menemukan elemen ID 'root' di index.html");
